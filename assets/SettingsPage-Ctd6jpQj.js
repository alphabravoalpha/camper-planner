import{c as C,f as S,d as A,u as D,x as L,s as E,P as O,j as e}from"./index-Awy_9YCo.js";import{a as r,L as h}from"./react-vendor-BKsxK57A.js";import{S as P}from"./SEOHead-CHCsLDEO.js";import{A as R}from"./arrow-left-C9q-5FNn.js";import{D as T}from"./download-DTOE3Qtv.js";import{T as U,C as I}from"./trash-2-CM2XJ1uJ.js";import{S as V}from"./shield-MF_GHeJM.js";import"./state-vendor-E9RzGJqF.js";const M=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],$=C("database",M),W=()=>{const[u,x]=r.useState(!1),{addNotification:a}=S(),{profile:g,clearProfile:m}=A(),{waypoints:y,clearRoute:p}=D(),f=L(s=>s.savedTrips),{hasConsent:n,updateConsent:b}=E(),i=O.getInstance(),d=i.getAnalyticsData(),j=r.useCallback(()=>{let s=0;for(const l in localStorage)Object.prototype.hasOwnProperty.call(localStorage,l)&&(s+=(localStorage[l].length+l.length)*2);return(s/1024).toFixed(1)},[]),v=r.useCallback(()=>{const s={};for(const o in localStorage)if(Object.prototype.hasOwnProperty.call(localStorage,o))try{s[o]=JSON.parse(localStorage[o])}catch{s[o]=localStorage[o]}const l=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),c=URL.createObjectURL(l),t=document.createElement("a");t.href=c,t.download=`camper-planner-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(c),a({type:"success",message:"All data exported successfully"})},[a]),N=r.useCallback(()=>{try{m&&m(),p&&p(),localStorage.clear(),x(!1),a({type:"success",message:"All data cleared. Reload to reset the app."})}catch{a({type:"error",message:"Failed to clear data. Try clearing browser data manually."})}},[m,p,a]),w=r.useCallback(()=>{const s=i.exportData(),l=new Blob([s],{type:"application/json"}),c=URL.createObjectURL(l),t=document.createElement("a");t.href=c,t.download=`camper-planner-analytics-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(c),a({type:"success",message:"Analytics data exported"})},[i,a]),k=r.useCallback(()=>{i.clearData(),a({type:"success",message:"Analytics data cleared"})},[i,a]);return e.jsxs("div",{className:"min-h-screen bg-neutral-50 animate-fade-in",children:[e.jsx(P,{title:"Settings — European Camper Trip Planner",description:"Manage your data, export trips, and configure European Camper Trip Planner settings.",url:"https://camperplanning.com/settings",noindex:!0}),e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary-700 to-primary-900 text-white",children:[e.jsx("img",{src:"/images/hero-settings.jpg",alt:"",className:"absolute inset-0 w-full h-full object-cover opacity-20 mix-blend-overlay",loading:"lazy"}),e.jsx("div",{className:"relative max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-10 sm:py-12",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(h,{to:"/",className:"p-2 rounded-lg text-white/60 hover:text-white hover:bg-white/10 transition-colors",children:e.jsx(R,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-display font-bold tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-primary-200 text-sm mt-1",children:"Manage your data, preferences, and privacy"})]})]})})]}),e.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx($,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-display font-semibold text-neutral-900",children:"Your Data"})]}),e.jsx("p",{className:"text-sm text-neutral-500 mb-4",children:"All your data is stored locally in your browser. Nothing is sent to any server."}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-primary-600",children:g?"✓":"—"}),e.jsx("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Vehicle Profile"})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-primary-600",children:y?.length||0}),e.jsx("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Waypoints"})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-primary-600",children:f?.length||0}),e.jsx("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Saved Trips"})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-primary-600",children:j()}),e.jsx("div",{className:"text-xs text-neutral-500 mt-0.5",children:"KB Used"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-6",children:[e.jsx("h2",{className:"text-lg font-display font-semibold text-neutral-900 mb-4",children:"Data Management"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:v,className:"w-full flex items-center gap-3 p-3 border border-neutral-200 rounded-lg text-sm font-medium text-neutral-700 hover:bg-neutral-50 transition-colors",children:[e.jsx(T,{className:"w-5 h-5 text-primary-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{children:"Export all data"}),e.jsx("div",{className:"text-xs text-neutral-400 font-normal",children:"Download a backup of all your trips, vehicle profile, and settings"})]})]}),u?e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-800 font-medium mb-3",children:"Are you sure? This will permanently delete all your data. Export a backup first if needed."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:N,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors",children:"Yes, clear everything"}),e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-neutral-300 text-neutral-700 rounded-lg text-sm font-medium hover:bg-neutral-50 transition-colors",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>x(!0),className:"w-full flex items-center gap-3 p-3 border border-red-200 rounded-lg text-sm font-medium text-red-700 hover:bg-red-50 transition-colors",children:[e.jsx(U,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{children:"Clear all data"}),e.jsx("div",{className:"text-xs text-red-400 font-normal",children:"Remove all saved trips, vehicle profile, and preferences"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(I,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-display font-semibold text-neutral-900",children:"Analytics"})]}),e.jsx("p",{className:"text-sm text-neutral-500 mb-4",children:"Local usage analytics help us improve the app. All data stays in your browser."}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 rounded-lg mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-neutral-700",children:"Analytics consent"}),e.jsx("div",{className:"text-xs text-neutral-500",children:n?"Analytics are enabled":"Analytics are disabled"})]}),e.jsx("button",{onClick:()=>b(!n),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n?"bg-primary-600":"bg-neutral-300"}`,role:"switch","aria-checked":n,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-primary-600",children:d.events.length}),e.jsx("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Events"})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-primary-600",children:d.session.pageViews}),e.jsx("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Page Views"})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-sm font-bold text-primary-600",children:d.session.lastActivity?new Date(d.session.lastActivity).toLocaleDateString():"—"}),e.jsx("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Last Activity"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:w,className:"flex-1 px-3 py-2 border border-neutral-200 rounded-lg text-sm font-medium text-neutral-700 hover:bg-neutral-50 transition-colors",children:"Export Analytics Data"}),e.jsx("button",{onClick:k,className:"flex-1 px-3 py-2 border border-red-200 rounded-lg text-sm font-medium text-red-700 hover:bg-red-50 transition-colors",children:"Clear Analytics Data"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(V,{className:"w-5 h-5 text-green-600"}),e.jsx("h2",{className:"text-lg font-display font-semibold text-neutral-900",children:"Privacy"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-neutral-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 flex-shrink-0 mt-1.5"}),"All data stored locally in your browser — never sent to any server"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 flex-shrink-0 mt-1.5"}),"No user accounts, no tracking cookies — optional local analytics with your consent"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 flex-shrink-0 mt-1.5"}),"Export or delete your data at any time"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 flex-shrink-0 mt-1.5"}),"Affiliate links are clearly labelled and optional"]})]}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsx(h,{to:"/privacy",className:"text-sm text-primary-600 underline hover:text-primary-800",children:"Privacy Policy"}),e.jsx(h,{to:"/terms",className:"text-sm text-primary-600 underline hover:text-primary-800",children:"Terms of Use"})]})]})]})})]})};export{W as default};
