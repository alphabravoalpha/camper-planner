const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlannerPage-xnW7JCKT.js","assets/react-vendor-BKsxK57A.js","assets/map-vendor-F4U-KZbU.js","assets/triangle-alert-oK0vtSes.js","assets/file-text-BO-Du2qG.js","assets/trash-2-CXzQI0PQ.js","assets/zap-Dyf1JRNY.js","assets/fuel-CS20jEOc.js","assets/star-D6oyp8Jf.js","assets/clock-n08F2Q77.js","assets/download-CAtqHR9p.js","assets/globe-qA3Rn5-L.js","assets/chevron-down-DCNy2wcB.js","assets/lightbulb-BosV7wQ9.js","assets/chevron-left-C4Ub1YKc.js","assets/chevron-right-D1THuWzG.js","assets/state-vendor-E9RzGJqF.js","assets/PlannerPage-DdS04Ii9.css","assets/AboutPage-_CD-dQq4.js","assets/shield-CXznv9fF.js","assets/HelpPage-B3RpodEY.js","assets/SettingsPage-Dbl6qzmE.js","assets/arrow-left-BmrahGeR.js","assets/NotFoundPage-BFCFE1Q8.js","assets/SupportPage-CM6ymmHV.js","assets/PrivacyPolicyPage-NQ2KZ-KZ.js","assets/TermsPage-CwckRtkl.js","assets/AffiliateDisclosurePage-Cq_jEVyI.js","assets/FeedbackPage-BnUzoGY9.js","assets/BlogListPage-Chw422id.js","assets/SEOHead-Z3bai8I-.js","assets/BlogPostPage-CygZpQUk.js"])))=>i.map(i=>d[i]);
var Bt=Object.defineProperty;var Ut=(s,t,e)=>t in s?Bt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var L=(s,t,e)=>Ut(s,typeof t!="symbol"?t+"":t,e);import{r as Kt,c as Wt,a as N,u as Ot,L as _,R as z,d as Ht,e as qt,O as Gt}from"./react-vendor-BKsxK57A.js";import{c as ae}from"./state-vendor-E9RzGJqF.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();var De={exports:{}},ye={};var nt;function Jt(){if(nt)return ye;nt=1;var s=Kt(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var c,p={},d=null,f=null;u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(f=l.ref);for(c in l)n.call(l,c)&&!i.hasOwnProperty(c)&&(p[c]=l[c]);if(o&&o.defaultProps)for(c in l=o.defaultProps,l)p[c]===void 0&&(p[c]=l[c]);return{$$typeof:t,type:o,key:d,ref:f,props:p,_owner:r.current}}return ye.Fragment=e,ye.jsx=a,ye.jsxs=a,ye}var st;function Yt(){return st||(st=1,De.exports=Jt()),De.exports}var h=Yt(),Oe={},rt;function Qt(){if(rt)return Oe;rt=1;var s=Wt();return Oe.createRoot=s.createRoot,Oe.hydrateRoot=s.hydrateRoot,Oe}var Zt=Qt();const Xt="modulepreload",en=function(s){return"/"+s},it={},F=function(t,e,n){let r=Promise.resolve();if(e&&e.length>0){let l=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");r=l(e.map(u=>{if(u=en(u),u in it)return;it[u]=!0;const c=u.endsWith(".css"),p=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Xt,c||(d.as="script"),d.crossOrigin="",d.href=u,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,y)=>{d.addEventListener("load",f),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};function tn(){if(console&&console.warn){for(var s=arguments.length,t=new Array(s),e=0;e<s;e++)t[e]=arguments[e];typeof t[0]=="string"&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t)}}const at={};function qe(){for(var s=arguments.length,t=new Array(s),e=0;e<s;e++)t[e]=arguments[e];typeof t[0]=="string"&&at[t[0]]||(typeof t[0]=="string"&&(at[t[0]]=new Date),tn(...t))}const jt=(s,t)=>()=>{if(s.isInitialized)t();else{const e=()=>{setTimeout(()=>{s.off("initialized",e)},0),t()};s.on("initialized",e)}};function ot(s,t,e){s.loadNamespaces(t,jt(s,e))}function lt(s,t,e,n){typeof e=="string"&&(e=[e]),e.forEach(r=>{s.options.ns.indexOf(r)<0&&s.options.ns.push(r)}),s.loadLanguages(t,jt(s,n))}function nn(s,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=t.languages[0],r=t.options?t.options.fallbackLng:!1,i=t.languages[t.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=t.services.backendConnector.state[`${o}|${l}`];return u===-1||u===2};return e.bindI18n&&e.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!a(t.isLanguageChangingTo,s)?!1:!!(t.hasResourceBundle(n,s)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||a(n,s)&&(!r||a(i,s)))}function sn(s,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!t.languages||!t.languages.length?(qe("i18n.languages were undefined or empty",t.languages),!0):t.options.ignoreJSONStructure!==void 0?t.hasLoadedNamespace(s,{lng:e.lng,precheck:(r,i)=>{if(e.bindI18n&&e.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,s))return!1}}):nn(s,t,e)}const rn=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,an={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},on=s=>an[s],ln=s=>s.replace(rn,on);let Ge={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:ln};function cn(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ge={...Ge,...s}}function un(){return Ge}let Lt;function dn(s){Lt=s}function hn(){return Lt}const pn={type:"3rdParty",init(s){cn(s.options.react),dn(s)}},fn=N.createContext();class gn{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const mn=(s,t)=>{const e=N.useRef();return N.useEffect(()=>{e.current=s},[s,t]),e.current};function yn(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:e}=t,{i18n:n,defaultNS:r}=N.useContext(fn)||{},i=e||n||hn();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new gn),!i){qe("You will need to pass in an i18next instance by using initReactI18next");const v=(k,E)=>typeof E=="string"?E:E&&typeof E=="object"&&typeof E.defaultValue=="string"?E.defaultValue:Array.isArray(k)?k[k.length-1]:k,S=[v,{},!1];return S.t=v,S.i18n={},S.ready=!1,S}i.options.react&&i.options.react.wait!==void 0&&qe("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...un(),...i.options.react,...t},{useSuspense:o,keyPrefix:l}=a;let u=r||i.options&&i.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const c=(i.isInitialized||i.initializedStoreOnce)&&u.every(v=>sn(v,i,a));function p(){return i.getFixedT(t.lng||null,a.nsMode==="fallback"?u:u[0],l)}const[d,f]=N.useState(p);let y=u.join();t.lng&&(y=`${t.lng}${y}`);const m=mn(y),g=N.useRef(!0);N.useEffect(()=>{const{bindI18n:v,bindI18nStore:S}=a;g.current=!0,!c&&!o&&(t.lng?lt(i,t.lng,u,()=>{g.current&&f(p)}):ot(i,u,()=>{g.current&&f(p)})),c&&m&&m!==y&&g.current&&f(p);function k(){g.current&&f(p)}return v&&i&&i.on(v,k),S&&i&&i.store.on(S,k),()=>{g.current=!1,v&&i&&v.split(" ").forEach(E=>i.off(E,k)),S&&i&&S.split(" ").forEach(E=>i.store.off(E,k))}},[i,y]);const x=N.useRef(!0);N.useEffect(()=>{g.current&&!x.current&&f(p),x.current=!1},[i,l]);const b=[d,i,c];if(b.t=d,b.i18n=i,b.ready=c,c||!c&&!o)return b;throw new Promise(v=>{t.lng?lt(i,t.lng,u,()=>v()):ot(i,u,()=>v())})}const bn=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xn=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),ct=s=>{const t=xn(s);return t.charAt(0).toUpperCase()+t.slice(1)},Rt=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),wn=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var vn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Sn=N.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:a,...o},l)=>N.createElement("svg",{ref:l,...vn,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:Rt("lucide",r),...!i&&!wn(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,c])=>N.createElement(u,c)),...Array.isArray(i)?i:[i]]));const A=(s,t)=>{const e=N.forwardRef(({className:n,...r},i)=>N.createElement(Sn,{ref:i,iconNode:t,className:Rt(`lucide-${bn(ct(s))}`,`lucide-${s}`,n),...r}));return e.displayName=ct(s),e};const Cn=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Nn=A("arrow-right",Cn);const kn=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],En=A("book-open",kn);const On=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],jn=A("briefcase",On);const Ln=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Rn=A("calculator",Ln);const Pn=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Pt=A("circle-check-big",Pn);const Tn=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ut=A("external-link",Tn);const In=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],_n=A("heart",In);const An=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$n=A("map-pin",An);const Mn=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Dn=A("message-square",Mn);const zn=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Fn=A("navigation",zn);const Vn=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],dt=A("route",Vn);const Bn=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Un=A("search",Bn);const Kn=[["path",{d:"M3.5 21 14 3",key:"1szst5"}],["path",{d:"M20.5 21 10 3",key:"1310c3"}],["path",{d:"M15.5 21 12 15l-3.5 6",key:"1ddtfw"}],["path",{d:"M2 21h20",key:"1nyx9w"}]],Wn=A("tent",Kn);const Hn=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],qn=A("truck",Hn);const Gn=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Jn=A("x",Gn),Yn={BASIC_ROUTING:!0,CAMPSITE_DISPLAY:!0,ROUTE_OPTIMIZATION:!0,MULTI_LANGUAGE_COMPLETE:!1},Je={routing:{endpoints:{openrouteservice:"https://api.openrouteservice.org/v2",osrm:"https://router.project-osrm.org"}},campsites:{sources:{overpass:"https://overpass-api.de/api/interpreter"}}};function Tt(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(t=0;t<r;t++)s[t]&&(e=Tt(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function Qn(){for(var s,t,e=0,n="",r=arguments.length;e<r;e++)(s=arguments[e])&&(t=Tt(s))&&(n&&(n+=" "),n+=t);return n}const tt="-",Zn=s=>{const t=es(s),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:a=>{const o=a.split(tt);return o[0]===""&&o.length!==1&&o.shift(),It(o,t)||Xn(a)},getConflictingClassGroupIds:(a,o)=>{const l=e[a]||[];return o&&n[a]?[...l,...n[a]]:l}}},It=(s,t)=>{if(s.length===0)return t.classGroupId;const e=s[0],n=t.nextPart.get(e),r=n?It(s.slice(1),n):void 0;if(r)return r;if(t.validators.length===0)return;const i=s.join(tt);return t.validators.find(({validator:a})=>a(i))?.classGroupId},ht=/^\[(.+)\]$/,Xn=s=>{if(ht.test(s)){const t=ht.exec(s)[1],e=t?.substring(0,t.indexOf(":"));if(e)return"arbitrary.."+e}},es=s=>{const{theme:t,prefix:e}=s,n={nextPart:new Map,validators:[]};return ns(Object.entries(s.classGroups),e).forEach(([i,a])=>{Ye(a,n,i,t)}),n},Ye=(s,t,e,n)=>{s.forEach(r=>{if(typeof r=="string"){const i=r===""?t:pt(t,r);i.classGroupId=e;return}if(typeof r=="function"){if(ts(r)){Ye(r(n),t,e,n);return}t.validators.push({validator:r,classGroupId:e});return}Object.entries(r).forEach(([i,a])=>{Ye(a,pt(t,i),e,n)})})},pt=(s,t)=>{let e=s;return t.split(tt).forEach(n=>{e.nextPart.has(n)||e.nextPart.set(n,{nextPart:new Map,validators:[]}),e=e.nextPart.get(n)}),e},ts=s=>s.isThemeGetter,ns=(s,t)=>t?s.map(([e,n])=>{const r=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,o])=>[t+a,o])):i);return[e,r]}):s,ss=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,e=new Map,n=new Map;const r=(i,a)=>{e.set(i,a),t++,t>s&&(t=0,n=e,e=new Map)};return{get(i){let a=e.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return r(i,a),a},set(i,a){e.has(i)?e.set(i,a):r(i,a)}}},_t="!",rs=s=>{const{separator:t,experimentalParseClassName:e}=s,n=t.length===1,r=t[0],i=t.length,a=o=>{const l=[];let u=0,c=0,p;for(let g=0;g<o.length;g++){let x=o[g];if(u===0){if(x===r&&(n||o.slice(g,g+i)===t)){l.push(o.slice(c,g)),c=g+i;continue}if(x==="/"){p=g;continue}}x==="["?u++:x==="]"&&u--}const d=l.length===0?o:o.substring(c),f=d.startsWith(_t),y=f?d.substring(1):d,m=p&&p>c?p-c:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:y,maybePostfixModifierPosition:m}};return e?o=>e({className:o,parseClassName:a}):a},is=s=>{if(s.length<=1)return s;const t=[];let e=[];return s.forEach(n=>{n[0]==="["?(t.push(...e.sort(),n),e=[]):e.push(n)}),t.push(...e.sort()),t},as=s=>({cache:ss(s.cacheSize),parseClassName:rs(s),...Zn(s)}),os=/\s+/,ls=(s,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:r}=t,i=[],a=s.trim().split(os);let o="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{modifiers:c,hasImportantModifier:p,baseClassName:d,maybePostfixModifierPosition:f}=e(u);let y=!!f,m=n(y?d.substring(0,f):d);if(!m){if(!y){o=u+(o.length>0?" "+o:o);continue}if(m=n(d),!m){o=u+(o.length>0?" "+o:o);continue}y=!1}const g=is(c).join(":"),x=p?g+_t:g,b=x+m;if(i.includes(b))continue;i.push(b);const v=r(m,y);for(let S=0;S<v.length;++S){const k=v[S];i.push(x+k)}o=u+(o.length>0?" "+o:o)}return o};function cs(){let s=0,t,e,n="";for(;s<arguments.length;)(t=arguments[s++])&&(e=At(t))&&(n&&(n+=" "),n+=e);return n}const At=s=>{if(typeof s=="string")return s;let t,e="";for(let n=0;n<s.length;n++)s[n]&&(t=At(s[n]))&&(e&&(e+=" "),e+=t);return e};function us(s,...t){let e,n,r,i=a;function a(l){const u=t.reduce((c,p)=>p(c),s());return e=as(u),n=e.cache.get,r=e.cache.set,i=o,o(l)}function o(l){const u=n(l);if(u)return u;const c=ls(l,e);return r(l,c),c}return function(){return i(cs.apply(null,arguments))}}const j=s=>{const t=e=>e[s]||[];return t.isThemeGetter=!0,t},$t=/^\[(?:([a-z-]+):)?(.+)\]$/i,ds=/^\d+\/\d+$/,hs=new Set(["px","full","screen"]),ps=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fs=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gs=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ms=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ys=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,G=s=>he(s)||hs.has(s)||ds.test(s),X=s=>pe(s,"length",ks),he=s=>!!s&&!Number.isNaN(Number(s)),ze=s=>pe(s,"number",he),be=s=>!!s&&Number.isInteger(Number(s)),bs=s=>s.endsWith("%")&&he(s.slice(0,-1)),C=s=>$t.test(s),ee=s=>ps.test(s),xs=new Set(["length","size","percentage"]),ws=s=>pe(s,xs,Mt),vs=s=>pe(s,"position",Mt),Ss=new Set(["image","url"]),Cs=s=>pe(s,Ss,Os),Ns=s=>pe(s,"",Es),xe=()=>!0,pe=(s,t,e)=>{const n=$t.exec(s);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):e(n[2]):!1},ks=s=>fs.test(s)&&!gs.test(s),Mt=()=>!1,Es=s=>ms.test(s),Os=s=>ys.test(s),js=()=>{const s=j("colors"),t=j("spacing"),e=j("blur"),n=j("brightness"),r=j("borderColor"),i=j("borderRadius"),a=j("borderSpacing"),o=j("borderWidth"),l=j("contrast"),u=j("grayscale"),c=j("hueRotate"),p=j("invert"),d=j("gap"),f=j("gradientColorStops"),y=j("gradientColorStopPositions"),m=j("inset"),g=j("margin"),x=j("opacity"),b=j("padding"),v=j("saturate"),S=j("scale"),k=j("sepia"),E=j("skew"),R=j("space"),ne=j("translate"),ge=()=>["auto","contain","none"],oe=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto",C,t],O=()=>[C,t],Ee=()=>["",G,X],U=()=>["auto",he,C],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",C],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[he,C];return{cacheSize:500,separator:":",theme:{colors:[xe],spacing:[G,X],blur:["none","",ee,C],brightness:D(),borderColor:[s],borderRadius:["none","","full",ee,C],borderSpacing:O(),borderWidth:Ee(),contrast:D(),grayscale:$(),hueRotate:D(),invert:$(),gap:O(),gradientColorStops:[s],gradientColorStopPositions:[bs,X],inset:H(),margin:H(),opacity:D(),padding:O(),saturate:D(),scale:D(),sepia:$(),skew:D(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",C]}],container:["container"],columns:[{columns:[ee]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),C]}],overflow:[{overflow:oe()}],"overflow-x":[{"overflow-x":oe()}],"overflow-y":[{"overflow-y":oe()}],overscroll:[{overscroll:ge()}],"overscroll-x":[{"overscroll-x":ge()}],"overscroll-y":[{"overscroll-y":ge()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",be,C]}],basis:[{basis:H()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",C]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",be,C]}],"grid-cols":[{"grid-cols":[xe]}],"col-start-end":[{col:["auto",{span:["full",be,C]},C]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[xe]}],"row-start-end":[{row:["auto",{span:[be,C]},C]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",C]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",C]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",C,t]}],"min-w":[{"min-w":[C,t,"min","max","fit"]}],"max-w":[{"max-w":[C,t,"none","full","min","max","fit","prose",{screen:[ee]},ee]}],h:[{h:[C,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[C,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[C,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[C,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ee,X]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ze]}],"font-family":[{font:[xe]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",C]}],"line-clamp":[{"line-clamp":["none",he,ze]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",G,C]}],"list-image":[{"list-image":["none",C]}],"list-style-type":[{list:["none","disc","decimal",C]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",G,X]}],"underline-offset":[{"underline-offset":["auto",G,C]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",C]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",C]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),vs]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ws]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Cs]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:q()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[G,C]}],"outline-w":[{outline:[G,X]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:Ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[G,X]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",ee,Ns]}],"shadow-color":[{shadow:[xe]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...me(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":me()}],filter:[{filter:["","none"]}],blur:[{blur:[e]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ee,C]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[p]}],saturate:[{saturate:[v]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[e]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",C]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",C]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",C]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[be,C]}],"translate-x":[{"translate-x":[ne]}],"translate-y":[{"translate-y":[ne]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",C]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",C]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",C]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[G,X,ze]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ls=us(js);function P(...s){return Ls(Qn(s))}const Pe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ACSI_AFFILIATE_CODE:"your_acsi_affiliate_code",VITE_API_TIMEOUT:"10000",VITE_APP_ENV:"development",VITE_BOOKING_AFFILIATE_ID:"your_booking_affiliate_id",VITE_ORS_API_KEY:"5b3ce3597851110001cf6248a96ac2c424b94ce6b8b4be2a3074bdf3",VITE_PITCHUP_AFFILIATE_ID:"your_pitchup_affiliate_id"},Qe=new Map,je=s=>{const t=Qe.get(s);return t?Object.fromEntries(Object.entries(t.stores).map(([e,n])=>[e,n.getState()])):{}},Rs=(s,t,e)=>{if(s===void 0)return{type:"untracked",connection:t.connect(e)};const n=Qe.get(e.name);if(n)return{type:"tracked",store:s,...n};const r={connection:t.connect(e),stores:{}};return Qe.set(e.name,r),{type:"tracked",store:s,...r}},Ps=(s,t={})=>(e,n,r)=>{const{enabled:i,anonymousActionType:a,store:o,...l}=t;let u;try{u=(i??(Pe?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(Pe?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),s(e,n,r);const{connection:c,...p}=Rs(o,u,l);let d=!0;r.setState=(m,g,x)=>{const b=e(m,g);if(!d)return b;const v=x===void 0?{type:a||"anonymous"}:typeof x=="string"?{type:x}:x;return o===void 0?(c?.send(v,n()),b):(c?.send({...v,type:`${o}/${v.type}`},{...je(l.name),[o]:r.getState()}),b)};const f=(...m)=>{const g=d;d=!1,e(...m),d=g},y=s(r.setState,n,r);if(p.type==="untracked"?c?.init(y):(p.stores[p.store]=r,c?.init(Object.fromEntries(Object.entries(p.stores).map(([m,g])=>[m,m===p.store?y:g.getState()])))),r.dispatchFromDevtools&&typeof r.dispatch=="function"){let m=!1;const g=r.dispatch;r.dispatch=(...x)=>{(Pe?"production":void 0)!=="production"&&x[0].type==="__setState"&&!m&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),m=!0),g(...x)}}return c.subscribe(m=>{var g;switch(m.type){case"ACTION":if(typeof m.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Fe(m.payload,x=>{if(x.type==="__setState"){if(o===void 0){f(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const b=x.state[o];if(b==null)return;JSON.stringify(r.getState())!==JSON.stringify(b)&&f(b);return}r.dispatchFromDevtools&&typeof r.dispatch=="function"&&r.dispatch(x)});case"DISPATCH":switch(m.payload.type){case"RESET":return f(y),o===void 0?c?.init(r.getState()):c?.init(je(l.name));case"COMMIT":if(o===void 0){c?.init(r.getState());return}return c?.init(je(l.name));case"ROLLBACK":return Fe(m.state,x=>{if(o===void 0){f(x),c?.init(r.getState());return}f(x[o]),c?.init(je(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Fe(m.state,x=>{if(o===void 0){f(x);return}JSON.stringify(r.getState())!==JSON.stringify(x[o])&&f(x[o])});case"IMPORT_STATE":{const{nextLiftedState:x}=m.payload,b=(g=x.computedStates.slice(-1)[0])==null?void 0:g.state;if(!b)return;f(o===void 0?b:b[o]),c?.send(null,x);return}case"PAUSE_RECORDING":return d=!d}return}}),y},fe=Ps,Fe=(s,t)=>{let e;try{e=JSON.parse(s)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}e!==void 0&&t(e)};function Ts(s,t){let e;try{e=s()}catch{return}return{getItem:r=>{var i;const a=l=>l===null?null:JSON.parse(l,void 0),o=(i=e.getItem(r))!=null?i:null;return o instanceof Promise?o.then(a):a(o)},setItem:(r,i)=>e.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>e.removeItem(r)}}const Ne=s=>t=>{try{const e=s(t);return e instanceof Promise?e:{then(n){return Ne(n)(e)},catch(n){return this}}}catch(e){return{then(n){return this},catch(n){return Ne(n)(e)}}}},Is=(s,t)=>(e,n,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:g=>g,version:0,merge:(g,x)=>({...x,...g}),...t},a=!1;const o=new Set,l=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return s((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),e(...g)},n,r);const c=Ne(i.serialize),p=()=>{const g=i.partialize({...n()});let x;const b=c({state:g,version:i.version}).then(v=>u.setItem(i.name,v)).catch(v=>{x=v});if(x)throw x;return b},d=r.setState;r.setState=(g,x)=>{d(g,x),p()};const f=s((...g)=>{e(...g),p()},n,r);let y;const m=()=>{var g;if(!u)return;a=!1,o.forEach(b=>b(n()));const x=((g=i.onRehydrateStorage)==null?void 0:g.call(i,n()))||void 0;return Ne(u.getItem.bind(u))(i.name).then(b=>{if(b)return i.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return i.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var v;return y=i.merge(b,(v=n())!=null?v:f),e(y,!0),p()}).then(()=>{x?.(y,void 0),a=!0,l.forEach(b=>b(y))}).catch(b=>{x?.(void 0,b)})};return r.persist={setOptions:g=>{i={...i,...g},g.getStorage&&(u=g.getStorage())},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>a,onHydrate:g=>(o.add(g),()=>{o.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},m(),y||f},_s=(s,t)=>(e,n,r)=>{let i={storage:Ts(()=>localStorage),partialize:m=>m,version:0,merge:(m,g)=>({...g,...m}),...t},a=!1;const o=new Set,l=new Set;let u=i.storage;if(!u)return s((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),e(...m)},n,r);const c=()=>{const m=i.partialize({...n()});return u.setItem(i.name,{state:m,version:i.version})},p=r.setState;r.setState=(m,g)=>{p(m,g),c()};const d=s((...m)=>{e(...m),c()},n,r);r.getInitialState=()=>d;let f;const y=()=>{var m,g;if(!u)return;a=!1,o.forEach(b=>{var v;return b((v=n())!=null?v:d)});const x=((g=i.onRehydrateStorage)==null?void 0:g.call(i,(m=n())!=null?m:d))||void 0;return Ne(u.getItem.bind(u))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[S,k]=b;if(f=i.merge(k,(v=n())!=null?v:d),e(f,!0),S)return c()}).then(()=>{x?.(f,void 0),f=n(),a=!0,l.forEach(b=>b(f))}).catch(b=>{x?.(void 0,b)})};return r.persist={setOptions:m=>{i={...i,...m},m.storage&&(u=m.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:m=>(o.add(m),()=>{o.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},i.skipHydration||y(),f||d},As=(s,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Pe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Is(s,t)):_s(s,t),$e=As;class Dt{constructor(t,e){L(this,"config");L(this,"cache");L(this,"rateLimitState");L(this,"rateLimit");this.config=t,this.cache=new Map,this.rateLimitState=new Map,this.rateLimit=e,this.startCacheCleanup()}async request(t){this.rateLimit.enabled&&await this.checkRateLimit();const e=this.generateCacheKey(t);if(this.config.cacheEnabled&&!t.skipCache){const r=this.getFromCache(e);if(r)return r}const n=await this.makeHttpRequest(t);return this.config.cacheEnabled&&!t.skipCache&&this.setCache(e,n),n}async makeHttpRequest(t){const{method:e,endpoint:n,params:r,headers:i={},body:a}=t,o=t.customTimeout||this.config.timeout;let l=`${this.config.baseUrl}${n}`;if(e==="GET"&&r){const d=new URLSearchParams;Object.entries(r).forEach(([f,y])=>{y!=null&&d.append(f,String(y))}),d.toString()&&(l+=`?${d.toString()}`)}const u={"Content-Type":"application/json",...i};this.config.userAgent&&(u["User-Agent"]=this.config.userAgent),this.config.apiKey&&(u.Authorization=`Bearer ${this.config.apiKey}`);const c={method:e,headers:u,signal:AbortSignal.timeout(o)};if(e!=="GET"&&a){const d=u["Content-Type"]||u["content-type"];d&&d.includes("text/plain")?c.body=a:c.body=JSON.stringify(a)}let p;for(let d=0;d<=this.config.retries;d++)try{const f=await fetch(l,c);if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);const y=f.headers.get("content-type");return y&&y.includes("application/json")?await f.json():await f.text()}catch(f){if(p=f,f instanceof Error){if(f.name==="AbortError")throw new Error(`Request timeout after ${o}ms`);if(f.message.includes("HTTP 4")&&!f.message.includes("HTTP 429"))throw f}if(d<this.config.retries){const y=Math.pow(2,d)*1e3;await new Promise(m=>setTimeout(m,y))}}throw p}classifyError(t,e){const n=t.message.toLowerCase();if(t.name==="AbortError"||n.includes("timeout"))return{type:"timeout",message:`Request timed out${e?` while ${e}`:""}`,originalError:t,suggestion:"The service is taking too long to respond. Please try again or zoom in to search a smaller area.",retryable:!0};if(n.includes("failed to fetch")||n.includes("network"))return{type:"network",message:`Network connection failed${e?` while ${e}`:""}`,originalError:t,suggestion:"Please check your internet connection and try again.",retryable:!0};if(n.includes("rate limit"))return{type:"rate_limit",message:`Too many requests${e?` while ${e}`:""}`,originalError:t,suggestion:t.message.includes("wait")?t.message:"Please wait a moment before trying again.",retryable:!0};if(n.includes("http 5"))return{type:"server",message:`Service temporarily unavailable${e?` while ${e}`:""}`,originalError:t,suggestion:"The service is experiencing issues. Please try again in a few moments.",retryable:!0};if(n.includes("http 4")){const r=n.includes("404");return n.includes("429")?{type:"rate_limit",message:`Too many requests${e?` while ${e}`:""}`,originalError:t,suggestion:"Please wait a moment before searching again.",retryable:!0}:{type:"client",message:r?`No data found${e?` while ${e}`:""}`:`Request failed${e?` while ${e}`:""}`,originalError:t,suggestion:r?"Try searching a different location or zooming out to see more results.":"Please check your request and try again.",retryable:!1}}return{type:"unknown",message:`Something went wrong${e?` while ${e}`:""}`,originalError:t,suggestion:"Please try again. If the problem persists, try refreshing the page.",retryable:!0}}async checkRateLimit(){const t=Date.now(),e="default",n=this.rateLimitState.get(e)||{count:0,resetTime:t+this.rateLimit.windowMs};if(t>n.resetTime&&(n.count=0,n.resetTime=t+this.rateLimit.windowMs),n.count>=this.rateLimit.requests){const r=n.resetTime-t;throw new Error(`Rate limit exceeded. Please wait ${Math.ceil(r/1e3)} seconds.`)}n.count++,this.rateLimitState.set(e,n)}generateCacheKey(t){const{method:e,endpoint:n,params:r,body:i}=t,a=[e,n];return r&&a.push(JSON.stringify(r)),i&&a.push(JSON.stringify(i)),a.join("|")}getFromCache(t){const e=this.cache.get(t);return e?Date.now()>e.timestamp+e.ttl?(this.cache.delete(t),null):e.data:null}setCache(t,e,n){const r=n||this.config.cacheTtl,i={data:e,timestamp:Date.now(),ttl:r};this.cache.set(t,i)}clearCache(){this.cache.clear()}getCacheStats(){const t=Date.now(),e=Array.from(this.cache.entries()).map(([n,r])=>({key:n,size:JSON.stringify(r.data).length,age:t-r.timestamp}));return{size:this.cache.size,entries:e}}startCacheCleanup(){setInterval(()=>{const t=Date.now();for(const[e,n]of this.cache.entries())t>n.timestamp+n.ttl&&this.cache.delete(e)},6e4)}getServiceInfo(){return{name:this.constructor.name,baseUrl:this.config.baseUrl,cacheSize:this.cache.size}}}class V extends Error{constructor(e,n,r,i=!0){super(e);L(this,"code");L(this,"service");L(this,"recoverable");this.name="RoutingError",this.code=n,this.service=r,this.recoverable=i}}class zt extends Dt{constructor(){const e={baseUrl:Je.routing.endpoints.openrouteservice,timeout:15e3,retries:2,cacheEnabled:!0,cacheTtl:36e5,userAgent:"EuropeanCamperPlanner/1.0",apiKey:"5b3ce3597851110001cf6248a96ac2c424b94ce6b8b4be2a3074bdf3"},n={requests:2e3,windowMs:1440*60*1e3,enabled:!0};super(e,n);L(this,"fallbackService");this.initializeFallbackService()}async calculateRoute(e){try{this.validateRouteRequest(e);const n=e.vehicleProfile?this.validateVehicleRestrictions(e.vehicleProfile):null;if(n?.cannotAccommodate)return{id:`restriction_blocked_${Date.now()}`,status:"error",routes:[],metadata:{service:"openrouteservice",profile:this.determineProfile(e.vehicleProfile,e.options?.profile),timestamp:Date.now(),query:e,attribution:"Vehicle restriction validation"},errors:["Vehicle dimensions exceed EU road limits"],restrictions:n};const r={...e,options:{...e.options,alternative_routes:!0,elevation:!0,geometry:!0,instructions:!0}},i=await this.calculateRouteWithORS(r);return n&&(i.restrictions=n,i.warnings=[...i.warnings||[],...n.suggestedActions]),i}catch(n){if(n instanceof V&&!n.recoverable)throw n;console.warn("OpenRouteService failed, trying fallback:",n);try{const r=await this.calculateRouteWithOSRM(e),i=["Primary routing service unavailable, using fallback"];return e.vehicleProfile&&(i.push("⚠️ Vehicle restrictions not supported by fallback service"),i.push("Route may include roads unsuitable for your vehicle")),{...r,warnings:i}}catch(r){throw console.error("Fallback routing service also failed:",r),new V("All routing services are currently unavailable","SERVICE_UNAVAILABLE","all",!1)}}}async calculateRouteWithORS(e){const{waypoints:n,vehicleProfile:r,options:i={}}=e,a=n.map(p=>[p.lng,p.lat]),o=this.determineProfile(r,i.profile),l={coordinates:a,format:"geojson",geometry:i.geometry!==!1,instructions:i.instructions!==!1,elevation:i.elevation||!1};r&&(l.height=r.height,l.width=r.width,l.weight=r.weight,l.length=r.length,l.axleload=Math.round(r.weight/2*10)/10,l.hazmat=!1,l.surface_type="any"),i.alternative_routes!==!1&&(l.alternative_routes={target_count:2,weight_factor:1.4,share_factor:.6}),i.avoidFeatures&&i.avoidFeatures.length>0&&(l.avoid_features=i.avoidFeatures);const u={method:"POST",endpoint:`/directions/${o}/geojson`,body:l,headers:{Accept:"application/json, application/geo+json, application/gpx+xml, img/png; charset=utf-8"}},c=await this.request(u);return this.transformORSResponse(c,e)}async calculateRouteWithOSRM(e){const{waypoints:n}=e,r=n.map(u=>`${u.lng},${u.lat}`).join(";"),i={overview:"full",geometries:"geojson",steps:"true",annotations:"true"},a={method:"GET",endpoint:`/route/v1/driving/${r}`,params:i},o={baseUrl:Je.routing.endpoints.osrm,timeout:1e4,retries:1,cacheEnabled:!0,cacheTtl:18e5,userAgent:"EuropeanCamperPlanner/1.0"},l=this.config;this.config=o;try{const u=await this.request(a);return this.transformOSRMResponse(u,e)}finally{this.config=l}}validateVehicleRestrictions(e){const n={violatedDimensions:[],restrictedSegments:[],cannotAccommodate:!1,suggestedActions:[]},r={height:4,width:2.55,weight:40,length:18.75};return e.height>r.height&&(n.violatedDimensions.push("height"),n.suggestedActions.push(`Vehicle height ${e.height}m exceeds EU limit of ${r.height}m`)),e.width>r.width&&(n.violatedDimensions.push("width"),n.suggestedActions.push(`Vehicle width ${e.width}m exceeds EU limit of ${r.width}m`)),e.weight>r.weight&&(n.violatedDimensions.push("weight"),n.suggestedActions.push(`Vehicle weight ${e.weight}t exceeds EU limit of ${r.weight}t`)),e.length>r.length&&(n.violatedDimensions.push("length"),n.suggestedActions.push(`Vehicle length ${e.length}m exceeds EU limit of ${r.length}m`)),n.cannotAccommodate=n.violatedDimensions.length>0,n.violatedDimensions.length>0?n:null}validateRouteRequest(e){const{waypoints:n,vehicleProfile:r}=e;if(!n||n.length<2)throw new V("At least 2 waypoints are required","INVALID_WAYPOINTS","validation",!1);if(n.length>50)throw new V("Maximum 50 waypoints allowed","TOO_MANY_WAYPOINTS","validation",!1);for(const i of n)if(i.lat<-90||i.lat>90||i.lng<-180||i.lng>180)throw new V(`Invalid coordinates: ${i.lat}, ${i.lng}`,"INVALID_COORDINATES","validation",!1);if(r){if(r.height<=0||r.height>4.5)throw new V("Vehicle height must be between 0 and 4.5 meters","INVALID_VEHICLE","validation",!1);if(r.width<=0||r.width>3)throw new V("Vehicle width must be between 0 and 3.0 meters","INVALID_VEHICLE","validation",!1);if(r.weight<=0||r.weight>40)throw new V("Vehicle weight must be between 0 and 40 tonnes","INVALID_VEHICLE","validation",!1);if(r.length<=0||r.length>20)throw new V("Vehicle length must be between 0 and 20 meters","INVALID_VEHICLE","validation",!1)}}determineProfile(e,n){return n||(e&&(e.height>2.5||e.width>2.2||e.weight>3.5||e.length>7)?"driving-hgv":"driving-car")}transformORSResponse(e,n){const r=e.features||[];if(r.length===0)throw new V("No route found","NO_ROUTE","openrouteservice",!0);const i=r[0],a={geometry:i.geometry,summary:{distance:i.properties.summary.distance,duration:i.properties.summary.duration},segments:i.properties.segments||[],waypoints:i.properties.way_points||[]},o=r.slice(1).map(u=>({geometry:u.geometry,summary:{distance:u.properties.summary.distance,duration:u.properties.summary.duration},segments:u.properties.segments||[],waypoints:u.properties.way_points||[]})),l=[];if(n.vehicleProfile&&a.summary.distance===0&&l.push("Route calculation returned empty result - vehicle may not fit on available roads"),o.length>0){const u=a.summary.distance;Math.min(...o.map(p=>p.summary.distance))>u*1.5&&l.push("Alternative routes are significantly longer - possible vehicle restrictions on main route")}return{id:`ors_${Date.now()}`,status:"success",routes:[a],alternativeRoutes:o,metadata:{service:"openrouteservice",profile:this.determineProfile(n.vehicleProfile,n.options?.profile),timestamp:Date.now(),query:n,attribution:"openrouteservice.org | OpenStreetMap contributors"},warnings:l.length>0?l:void 0}}transformOSRMResponse(e,n){const r=e.routes[0];if(!r)throw new V("No route found","NO_ROUTE","osrm",!0);const i={geometry:r.geometry,summary:{distance:r.distance,duration:r.duration},segments:r.legs||[],waypoints:e.waypoints?.map((a,o)=>o)||[]};return{id:`osrm_${Date.now()}`,status:"success",routes:[i],metadata:{service:"osrm",profile:"driving",timestamp:Date.now(),query:n,attribution:"OpenStreetMap contributors | OSRM"},warnings:["Using fallback routing service (vehicle restrictions not supported)"]}}initializeFallbackService(){this.fallbackService=void 0}async healthCheck(){try{const e={method:"GET",endpoint:"/health",skipCache:!0,customTimeout:5e3};return await this.request(e),!0}catch(e){return console.warn("OpenRouteService health check failed:",e),!1}}getServiceStatus(){const e=this.rateLimitState.get("default")||{count:0,resetTime:Date.now()};return{primary:{name:"OpenRouteService",healthy:!0,cacheSize:this.cache.size},fallback:{name:"OSRM",available:!0},rateLimitInfo:{remaining:Math.max(0,this.rateLimit.requests-e.count),resetTime:e.resetTime}}}}const Yr=new zt;class $s{constructor(){L(this,"dbName","CampsiteCache");L(this,"version",1);L(this,"storeName","campsites");L(this,"db",null)}async initialize(){return new Promise((t,e)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>e(new Error("Failed to open IndexedDB")),n.onsuccess=()=>{this.db=n.result,t()},n.onupgradeneeded=r=>{const i=r.target.result;if(!i.objectStoreNames.contains(this.storeName)){const a=i.createObjectStore(this.storeName,{keyPath:"id"});a.createIndex("lat","lat",{unique:!1}),a.createIndex("lng","lng",{unique:!1}),a.createIndex("type","type",{unique:!1}),a.createIndex("last_updated","last_updated",{unique:!1}),a.createIndex("bounds",["lat","lng"],{unique:!1})}i.objectStoreNames.contains("cache_metadata")||i.createObjectStore("cache_metadata",{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1})}})}async getCampsitesInBounds(t){return this.db||await this.initialize(),new Promise((e,n)=>{const i=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName),a=[],o=i.openCursor();o.onsuccess=l=>{const u=l.target.result;if(u){const c=u.value;c.lat>=t.south&&c.lat<=t.north&&c.lng>=t.west&&c.lng<=t.east&&a.push(c),u.continue()}else e(a)},o.onerror=()=>n(new Error("Failed to query campsites from cache"))})}async storeCampsites(t){return this.db||await this.initialize(),new Promise((e,n)=>{const i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName);let a=0;const o=t.length;if(o===0){e();return}for(const l of t){const u=i.put(l);u.onsuccess=()=>{a++,a===o&&e()},u.onerror=()=>n(new Error("Failed to store campsite in cache"))}})}async getCacheMetadata(t){return this.db||await this.initialize(),new Promise((e,n)=>{const a=this.db.transaction(["cache_metadata"],"readonly").objectStore("cache_metadata").get(t);a.onsuccess=()=>e(a.result?.data),a.onerror=()=>n(new Error("Failed to get cache metadata"))})}async setCacheMetadata(t,e){return this.db||await this.initialize(),new Promise((n,r)=>{const o=this.db.transaction(["cache_metadata"],"readwrite").objectStore("cache_metadata").put({key:t,data:e,timestamp:Date.now()});o.onsuccess=()=>n(),o.onerror=()=>r(new Error("Failed to set cache metadata"))})}async clearExpiredCache(t=1440*60*1e3){this.db||await this.initialize();const e=Date.now()-t;return new Promise((n,r)=>{const o=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).index("last_updated"),l=IDBKeyRange.upperBound(e),u=o.openCursor(l);u.onsuccess=c=>{const p=c.target.result;p?(p.delete(),p.continue()):n()},u.onerror=()=>r(new Error("Failed to clear expired cache"))})}}class Ms extends Dt{constructor(){const e={baseUrl:Je.campsites.sources.overpass,timeout:3e4,retries:1,cacheEnabled:!1,cacheTtl:0,userAgent:"EuropeanCamperPlanner/1.0"};super(e,{requests:2,windowMs:1e3,enabled:!0});L(this,"cacheManager");L(this,"_fallbackService");L(this,"activeRequests",new Map);L(this,"lastNominatimRequest",0);this.cacheManager=new $s,this.initializeFallbackService(),this.initializeCache()}async geocodeLocationMultiple(e,n=5){try{const i=Date.now()-this.lastNominatimRequest;i<1100&&await new Promise(p=>setTimeout(p,1100-i)),this.lastNominatimRequest=Date.now();const a=new URLSearchParams({q:e,format:"json",limit:String(n),addressdetails:"1",extratags:"1",namedetails:"1",countrycodes:"gb,ie,fr,de,es,pt,it,nl,be,at,ch,dk,no,se,fi,pl,cz,hr,si,gr,hu,sk,ro,bg,ee,lv,lt,lu,mt,cy"}),l=!1?`/api/geocode?${a.toString()}`:`https://nominatim.openstreetmap.org/search?${a.toString()}`,u=await fetch(l,{method:"GET",headers:{"User-Agent":"EuropeanCamperPlanner/1.0 (https://github.com/user/camper-planner)"}});if(!u.ok)throw new Error(`Geocoding HTTP error: ${u.status}`);const c=await u.json();return c&&c.length>0?c.map(d=>{let f=d.display_name.split(",")[0].trim();if(d.address){const y=d.address;if(y.house_number&&y.road)f=`${y.house_number} ${y.road}`;else if(y.road)f=y.road;else if(y.postcode){const m=y.city||y.town||y.village||"";f=m?`${y.postcode}, ${m}`:y.postcode}}return{display_name:d.display_name,lat:parseFloat(d.lat),lng:parseFloat(d.lon),boundingbox:d.boundingbox,type:d.type||d.class||"place",importance:parseFloat(d.importance||"0.5"),name:f}}):[]}catch(r){return console.error("Geocoding failed:",r),[]}}async geocodeLocation(e){const n=await this.geocodeLocationMultiple(e,1);return n.length>0?n[0]:null}async searchCampsites(e){const n=Date.now();if(e.locationQuery)return this.searchCampsitesByLocation(e,n);const r=this.generateCampsiteCacheKey(e);if(this.activeRequests.has(r))return this.activeRequests.get(r);if(!e.bounds||typeof e.bounds.south>"u"||typeof e.bounds.west>"u"||typeof e.bounds.north>"u"||typeof e.bounds.east>"u")return console.warn("CampsiteService: Invalid bounds provided, returning empty result"),{status:"error",error:"Invalid bounds provided",campsites:[],metadata:{service:"overpass",timestamp:Date.now(),query:e,results_count:0,query_duration:Date.now()-n,cache_hit:!1},cached:!1,boundingBox:e.bounds};const i=this.executeSearchRequest(e,r,n);this.activeRequests.set(r,i);try{return await i}finally{this.activeRequests.delete(r)}}async searchCampsitesByLocation(e,n){try{const r=await this.geocodeLocation(e.locationQuery);if(!r)return{status:"error",error:`Could not find location: ${e.locationQuery}`,campsites:[],metadata:{service:"overpass",timestamp:Date.now(),query:e,results_count:0,query_duration:Date.now()-n,cache_hit:!1},cached:!1,boundingBox:e.bounds};const i=50,a=i/111,o=i/(111*Math.cos(r.lat*Math.PI/180)),l={...e,bounds:{north:r.lat+a,south:r.lat-a,east:r.lng+o,west:r.lng-o},locationQuery:void 0},u=await this.searchCampsites(l);return{...u,metadata:{...u.metadata,geocoded_location:r,query:e}}}catch(r){return console.error("Location-based search failed:",r),{status:"error",error:`Location search failed: ${r instanceof Error?r.message:"Unknown error"}`,campsites:[],metadata:{service:"overpass",timestamp:Date.now(),query:e,results_count:0,query_duration:Date.now()-n,cache_hit:!1},cached:!1,boundingBox:e.bounds}}}async executeSearchRequest(e,n,r){try{const i=await this.getCachedCampsites(e);if(i)return{...i,metadata:{...i.metadata,cache_hit:!0,query_duration:Date.now()-r}};const a=await this.searchWithOverpass(e);return await this.cacheManager.storeCampsites(a.campsites),await this.setCacheMetadata(e),{...a,metadata:{...a.metadata,cache_hit:!1,query_duration:Date.now()-r}}}catch(i){console.warn("Overpass API failed:",i);const a=await this.getCachedCampsites(e,!0);return a?(console.info("Using stale cache data for campsites"),{...a,metadata:{...a.metadata,cache_hit:!0,query_duration:Date.now()-r}}):(console.warn("No campsite data available, returning error result"),{status:"error",error:"Unable to load campsites. The server may be busy — try again in a moment.",campsites:[],metadata:{service:"overpass",timestamp:Date.now(),query:e,results_count:0,query_duration:Date.now()-r,cache_hit:!1},cached:!1,boundingBox:e.bounds})}}async searchWithOverpass(e){const{bounds:n,types:r=["campsite","aire","caravan_site"],maxResults:i=1e3}=e,o={method:"POST",endpoint:"",body:this.buildOverpassQuery(n,r),headers:{"Content-Type":"text/plain; charset=utf-8"}};let l=await this.request(o);if(typeof l=="string")try{l=JSON.parse(l)}catch{throw new Error("Overpass API returned an invalid response (non-JSON). The server may be overloaded.")}const u=this.parseOverpassResponse(l),c=this.filterAndScoreCampsites(u,e).slice(0,i);return{status:"success",campsites:c,metadata:{service:"overpass",timestamp:Date.now(),query:e,results_count:c.length,cache_hit:!1,query_duration:0},cached:!1,boundingBox:n}}async _searchWithOpenCampingMap(e){const{bounds:n,maxResults:r=1e3}=e,i={baseUrl:"https://opencampingmap.org/api",timeout:15e3,retries:1,cacheEnabled:!1,cacheTtl:0,userAgent:"EuropeanCamperPlanner/1.0"},a=this.config;this.config=i;try{const o={method:"GET",endpoint:"/campsites",params:{bbox:`${n.west},${n.south},${n.east},${n.north}`,limit:r}},l=await this.request(o),u=this.parseOpenCampingMapResponse(l);return{campsites:u,metadata:{service:"opencampingmap",timestamp:Date.now(),query:e,results_count:u.length,cache_hit:!1,query_duration:0},cached:!1,boundingBox:n}}finally{this.config=a}}isValidCoordinate(e,n){return typeof e!="number"||isNaN(e)||!isFinite(e)?!1:n==="latitude"?e>=-90&&e<=90:e>=-180&&e<=180}buildOverpassQuery(e,n){const{south:r,west:i,north:a,east:o}=e;if(!this.isValidCoordinate(r,"latitude")||!this.isValidCoordinate(a,"latitude")||!this.isValidCoordinate(i,"longitude")||!this.isValidCoordinate(o,"longitude"))throw console.error("Invalid coordinates detected",{south:r,west:i,north:a,east:o}),new Error(`Invalid coordinates: lat=${r}-${a}, lng=${i}-${o}`);const l=a-r,u=o-i;if(l>5||u>5)throw console.warn("Bounding box too large for campsite query",{latSpan:l,lngSpan:u,bounds:e}),new Error(`Bounding box too large: ${l}° lat x ${u}° lng (max 5° each)`);const c=`${r.toFixed(6)},${i.toFixed(6)},${a.toFixed(6)},${o.toFixed(6)}`,p=[];return n.includes("campsite")&&(p.push(`node["tourism"="camp_site"](${c});`),p.push(`way["tourism"="camp_site"](${c});`),p.push(`relation["tourism"="camp_site"](${c});`)),n.includes("caravan_site")&&(p.push(`node["tourism"="caravan_site"](${c});`),p.push(`way["tourism"="caravan_site"](${c});`),p.push(`relation["tourism"="caravan_site"](${c});`)),n.includes("aire")&&(p.push(`node["amenity"="parking"]["motorhome"="yes"](${c});`),p.push(`way["amenity"="parking"]["motorhome"="yes"](${c});`),p.push(`node["amenity"="parking"]["caravan"="yes"](${c});`),p.push(`way["amenity"="parking"]["caravan"="yes"](${c});`),p.push(`node["tourism"="wilderness_hut"](${c});`),p.push(`node["highway"="services"]["motorhome"="yes"](${c});`),p.push(`way["highway"="services"]["motorhome"="yes"](${c});`)),`[out:json][timeout:30];(${p.join("")});out center meta 1000;`}parseOverpassResponse(e){return!e||!e.elements?[]:e.elements.map(n=>this.parseOSMElement(n)).filter(Boolean)}parseOpenCampingMapResponse(e){return!e||!e.features?[]:e.features.map(n=>this.parseOpenCampingMapFeature(n)).filter(Boolean)}parseOSMElement(e){const n=e.lat??e.center?.lat,r=e.lon??e.center?.lon;if(!n||!r||!e.tags)return null;const i=e.tags;if(i.disused==="yes"||i.abandoned==="yes"||i.demolished==="yes"||i["tourism:disused"]==="yes"||i.lifecycle_status==="abandoned"||i.lifecycle_status==="disused"||i.lifecycle_status==="demolished")return null;const a=this.determineCampsiteType(i);return{id:e.id,type:a,name:i.name||i["name:en"]||`${a} ${e.id}`,lat:n,lng:r,amenities:{toilets:this.parseBoolean(i.amenity==="toilets"||i.toilets),showers:this.parseBoolean(i.shower),drinking_water:this.parseBoolean(i.drinking_water),electricity:this.parseBoolean(i.electricity),wifi:this.parseBoolean(i.internet_access==="wifi"||i.wifi),restaurant:this.parseBoolean(i.amenity==="restaurant"||i.restaurant),shop:this.parseBoolean(i.shop),playground:this.parseBoolean(i.playground),laundry:this.parseBoolean(i.laundry),swimming_pool:this.parseBoolean(i.swimming_pool)},access:{motorhome:this.parseBoolean(i.motorhome),caravan:this.parseBoolean(i.caravan),tent:this.parseBoolean(i.tents!=="no"&&a==="campsite"),max_height:this.parseNumber(i.maxheight),max_length:this.parseNumber(i.maxlength),max_weight:this.parseNumber(i.maxweight)},contact:{phone:i.phone,website:i.website||i.url,email:i.email},opening_hours:i.opening_hours,fee:i.fee,reservation:i.reservation,capacity:this.parseNumber(i.capacity),source:"openstreetmap",last_updated:Date.now(),quality_score:this.calculateQualityScore(i)}}parseOpenCampingMapFeature(e){if(!e.geometry||!e.properties)return null;const n=e.properties,[r,i]=e.geometry.coordinates;return{id:n.id||Math.random()*1e6,type:"campsite",name:n.name||"Unnamed Campsite",lat:i,lng:r,amenities:{toilets:!!n.toilets,showers:!!n.showers,drinking_water:!!n.drinking_water,electricity:!!n.electricity,wifi:!!n.wifi,restaurant:!!n.restaurant,shop:!!n.shop,playground:!!n.playground,laundry:!!n.laundry,swimming_pool:!!n.swimming_pool},access:{motorhome:!!n.motorhome,caravan:!!n.caravan,tent:!!n.tent,max_height:n.max_height,max_length:n.max_length,max_weight:n.max_weight},contact:{phone:n.phone,website:n.website,email:n.email},opening_hours:n.opening_hours,fee:n.fee,reservation:n.reservation,capacity:n.capacity,source:"opencampingmap",last_updated:Date.now(),quality_score:.8}}determineCampsiteType(e){return e.tourism==="camp_site"?"campsite":e.tourism==="caravan_site"?"caravan_site":e.amenity==="parking"&&(e.motorhome==="yes"||e.caravan==="yes")||e.highway==="services"&&e.motorhome==="yes"?"aire":"campsite"}parseBoolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){const n=e.toLowerCase();return n==="yes"||n==="true"||n==="1"}return!1}parseNumber(e){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseFloat(e.replace(/[^\d.]/g,""));return isNaN(n)?void 0:n}}calculateQualityScore(e){let n=0;const r=[e.name,e.phone||e.website,e.opening_hours,e.drinking_water,e.electricity,e.toilets||e.amenity==="toilets",e.motorhome||e.caravan];return n=r.filter(Boolean).length/r.length,Math.round(n*100)/100}filterAndScoreCampsites(e,n){let r=e;n.vehicleFilter&&(r=r.filter(o=>this.isVehicleCompatible(o,n.vehicleFilter))),n.amenities&&n.amenities.length>0&&(r=r.filter(o=>n.amenities.some(l=>o.amenities[l]===!0)));const i=(n.bounds.north+n.bounds.south)/2,a=(n.bounds.east+n.bounds.west)/2;return r.sort((o,l)=>{const u=this.calculateDistance(i,a,o.lat,o.lng),c=this.calculateDistance(i,a,l.lat,l.lng),p=(o.quality_score||.5)-u/100;return(l.quality_score||.5)-c/100-p})}isVehicleCompatible(e,n){return!(n.motorhome&&!e.access.motorhome||n.caravan&&!e.access.caravan||n.height&&e.access.max_height&&n.height>e.access.max_height||n.length&&e.access.max_length&&n.length>e.access.max_length||n.weight&&e.access.max_weight&&n.weight>e.access.max_weight)}calculateDistance(e,n,r,i){const o=(r-e)*Math.PI/180,l=(i-n)*Math.PI/180,u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}async getCachedCampsites(e,n=!1){try{const r=this.generateCampsiteCacheKey(e),i=await this.cacheManager.getCacheMetadata(r);if(i){const a=Date.now()-i.timestamp,o=1440*60*1e3;if(n||a<o){const l=await this.cacheManager.getCampsitesInBounds(e.bounds);if(l.length>0)return{status:"success",campsites:this.filterAndScoreCampsites(l,e),metadata:{service:i.service||"overpass",timestamp:i.timestamp,query:e,results_count:l.length,cache_hit:!0,query_duration:0},cached:!0,boundingBox:e.bounds}}}return null}catch(r){return console.warn("Cache lookup failed:",r),null}}async setCacheMetadata(e){try{const n=this.generateCampsiteCacheKey(e);await this.cacheManager.setCacheMetadata(n,{timestamp:Date.now(),service:"overpass",bounds:e.bounds})}catch(n){console.warn("Failed to set cache metadata:",n)}}generateCampsiteCacheKey(e){const{bounds:n,types:r=[],amenities:i=[]}=e;if(!n||typeof n.south>"u"||typeof n.west>"u"||typeof n.north>"u"||typeof n.east>"u")return console.warn("CampsiteService: Invalid bounds provided, using fallback cache key"),`campsites_invalid_bounds_${Date.now()}_${r.join(",")}_${i.join(",")}`;const a=o=>Math.round(o*10)/10;return`campsites_${a(n.south)}_${a(n.west)}_${a(n.north)}_${a(n.east)}_${r.join(",")}_${i.join(",")}`}async initializeCache(){try{await this.cacheManager.initialize(),await this.cacheManager.clearExpiredCache()}catch(e){console.warn("Failed to initialize campsite cache:",e)}}initializeFallbackService(){this._fallbackService=void 0}async healthCheck(){try{const n={method:"POST",endpoint:"",body:"[out:json][timeout:5]; out count;",headers:{"Content-Type":"text/plain"},customTimeout:5e3};return await this.request(n),!0}catch(e){return console.warn("Overpass API health check failed:",e),!1}}getServiceStatus(){const e=this.rateLimitState.get("default")||{count:0,resetTime:Date.now()};return{primary:{name:"Overpass API",healthy:!0,cacheSize:"IndexedDB"},fallback:{name:"OpenCampingMap",available:!0},rateLimitInfo:{remaining:Math.max(0,this.rateLimit.requests-e.count),resetTime:e.resetTime}}}async refreshCache(e){const n={bounds:e};await this.searchWithOverpass(n)}getCacheStats(){return{size:0,entries:[]}}}const Qr=new Ms,K=ae()(fe(s=>({center:[54.526,15.2551],zoom:5,selectedWaypoint:null,setCenter:t=>s({center:t}),setZoom:t=>s({zoom:t}),setSelectedWaypoint:t=>s({selectedWaypoint:t})}),{name:"map-store"})),Ze=ae()($e(fe(s=>({profile:null,setProfile:t=>s({profile:t}),clearProfile:()=>s({profile:null})}),{name:"vehicle-store"}),{name:"camper-planner-vehicle",partialize:s=>({profile:s.profile})})),se=s=>s.map((t,e)=>{if(e>0&&e<s.length-1&&(t.type==="campsite"||t.type==="accommodation"))return t;let n;return s.length===1||e===0?n="start":e===s.length-1?n="end":n="waypoint",{...t,type:n}}),re=(s,t)=>{const e=[...s.history.slice(0,s.historyIndex+1),t].slice(-s.maxHistorySize);return{...s,history:e,historyIndex:e.length-1}},Le=ae()($e(fe((s,t)=>({waypoints:[],calculatedRoute:null,isOptimized:!1,totalDistance:0,estimatedTime:0,history:[],historyIndex:-1,maxHistorySize:50,addWaypoint:e=>s(n=>{const r=[...n.waypoints,e],i=se(r),a={type:"add",timestamp:Date.now(),data:e,previousState:n.waypoints};return{...re(n,a),waypoints:i,isOptimized:!1}}),removeWaypoint:e=>s(n=>{const r=n.waypoints.find(l=>l.id===e),i=n.waypoints.filter(l=>l.id!==e),a=se(i),o={type:"remove",timestamp:Date.now(),data:{id:e,waypoint:r},previousState:n.waypoints};return{...re(n,o),waypoints:a,isOptimized:!1}}),updateWaypoint:(e,n)=>s(r=>{const i=r.waypoints.find(l=>l.id===e),a=r.waypoints.map(l=>l.id===e?{...l,...n}:l),o={type:"update",timestamp:Date.now(),data:{id:e,updates:n,previousWaypoint:i},previousState:r.waypoints};return{...re(r,o),waypoints:a}}),reorderWaypoints:e=>{const n=t(),r=se(e),i={type:"reorder",timestamp:Date.now(),data:e,previousState:n.waypoints};s({...re(n,i),waypoints:r,isOptimized:!0})},insertWaypoint:(e,n)=>s(r=>{const i=r.waypoints.findIndex(u=>u.id===n),a=[...r.waypoints.slice(0,i+1),e,...r.waypoints.slice(i+1)],o=se(a),l={type:"add",timestamp:Date.now(),data:{waypoint:e,afterId:n},previousState:r.waypoints};return{...re(r,l),waypoints:o,isOptimized:!1}}),insertBeforeWaypoint:(e,n)=>s(r=>{const i=r.waypoints.findIndex(u=>u.id===n),a=[...r.waypoints.slice(0,i),e,...r.waypoints.slice(i)],o=se(a),l={type:"add",timestamp:Date.now(),data:{waypoint:e,beforeId:n},previousState:r.waypoints};return{...re(r,l),waypoints:o,isOptimized:!1}}),clearRoute:()=>s(e=>{const n={type:"clear",timestamp:Date.now(),data:null,previousState:e.waypoints};return{...re(e,n),waypoints:[],calculatedRoute:null,isOptimized:!1,totalDistance:0,estimatedTime:0}}),setCalculatedRoute:e=>s({calculatedRoute:e}),undo:()=>s(e=>{if(e.historyIndex<0)return e;const n=e.history[e.historyIndex];return{...e,waypoints:se(n.previousState),historyIndex:e.historyIndex-1,isOptimized:!1}}),redo:()=>s(e=>{if(e.historyIndex>=e.history.length-1)return e;const n=e.historyIndex+1,r=e.history[n];let i=e.waypoints;switch(r.type){case"add":{const a=r.data;if("afterId"in a){const o=e.waypoints.findIndex(l=>l.id===a.afterId);i=[...e.waypoints.slice(0,o+1),a.waypoint,...e.waypoints.slice(o+1)]}else i=[...e.waypoints,a];break}case"remove":{const a=r.data;i=e.waypoints.filter(o=>o.id!==a.id);break}case"update":{const a=r.data;i=e.waypoints.map(o=>o.id===a.id?{...o,...a.updates}:o);break}case"reorder":i=r.data;break;case"clear":i=[];break}return{...e,waypoints:se(i),historyIndex:n,isOptimized:r.type==="reorder"}}),canUndo:()=>t().historyIndex>=0,canRedo:()=>{const e=t();return e.historyIndex<e.history.length-1},isValidForRouting:()=>t().waypoints.length>=2}),{name:"route-store"}),{name:"camper-planner-route",partialize:s=>({waypoints:s.waypoints,isOptimized:s.isOptimized,totalDistance:s.totalDistance,estimatedTime:s.estimatedTime})})),Zr=ae()($e(fe((s,t)=>({currentTrip:null,savedTrips:[],setCurrentTrip:e=>s({currentTrip:e}),saveTrip:e=>s(n=>({savedTrips:[...n.savedTrips.filter(r=>r.id!==e.id),e]})),loadTrip:e=>{const n=t().savedTrips.find(r=>r.id===e);n&&s({currentTrip:n})},deleteTrip:e=>s(n=>({savedTrips:n.savedTrips.filter(r=>r.id!==e),currentTrip:n.currentTrip?.id===e?null:n.currentTrip}))}),{name:"trip-store"}),{name:"camper-planner-trips",partialize:s=>({savedTrips:s.savedTrips,currentTrip:s.currentTrip})})),Y=ae()(fe((s,t)=>({isLoading:!1,error:null,notifications:[],sidebarOpen:!0,vehicleSidebarOpen:!1,setLoading:e=>s({isLoading:e}),setError:e=>s({error:e}),addNotification:e=>{const n=Math.random().toString(36).substr(2,9);s(r=>({notifications:[...r.notifications,{...e,id:n}]})),setTimeout(()=>{t().removeNotification(n)},5e3)},removeNotification:e=>s(n=>({notifications:n.notifications.filter(r=>r.id!==e)})),toggleSidebar:()=>s(e=>({sidebarOpen:!e.sidebarOpen})),openVehicleSidebar:()=>s({vehicleSidebarOpen:!0}),closeVehicleSidebar:()=>s({vehicleSidebarOpen:!1})}),{name:"ui-store"})),Ds=ae()(fe(s=>({wizardOpen:!1,wizardStep:0,start:null,end:null,startDate:null,endDate:null,drivingStyle:"moderate",crossing:null,restDayFrequency:0,itinerary:null,isGenerating:!1,generationError:null,openWizard:()=>s({wizardOpen:!0,wizardStep:0}),closeWizard:()=>s({wizardOpen:!1}),setStep:t=>s({wizardStep:t}),nextStep:()=>s(t=>({wizardStep:t.wizardStep+1})),prevStep:()=>s(t=>({wizardStep:Math.max(0,t.wizardStep-1)})),setStart:t=>s({start:t}),setEnd:t=>s({end:t}),setStartDate:t=>s({startDate:t}),setEndDate:t=>s({endDate:t}),setDrivingStyle:t=>s({drivingStyle:t}),setCrossing:t=>s({crossing:t}),setRestDayFrequency:t=>s({restDayFrequency:t}),setItinerary:t=>s({itinerary:t}),setIsGenerating:t=>s({isGenerating:t}),setGenerationError:t=>s({generationError:t}),selectCampsite:(t,e)=>s(n=>{if(!n.itinerary)return n;const r=n.itinerary.days.map(i=>i.dayNumber===t?{...i,selectedOvernight:e}:i);return{itinerary:{...n.itinerary,days:r}}}),resetWizard:()=>s({wizardStep:0,start:null,end:null,startDate:null,endDate:null,drivingStyle:"moderate",crossing:null,restDayFrequency:0,itinerary:null,isGenerating:!1,generationError:null})}),{name:"trip-wizard-store"})),zs=()=>{const s=Ot(),{t}=yn(),[e,n]=N.useState(!1),{toggleSidebar:r,openVehicleSidebar:i}=Y(),{profile:a}=Ze(),{openWizard:o}=Ds(),l=a?{name:a.name||"Custom Vehicle",dims:`${a.height}×${a.width}×${a.length}m`}:null,u=[{path:"/",label:t("nav.planner"),key:"planner"},{path:"/guides",label:"Guides",key:"guides",icon:En},{path:"/about",label:t("nav.about"),key:"about"},{path:"/help",label:t("nav.help"),key:"help"}],c=d=>d==="/"?s.pathname===d:s.pathname.startsWith(d),p=()=>{n(!e)};return h.jsxs(h.Fragment,{children:[h.jsx("header",{className:"bg-white border-b border-neutral-200 sticky top-0 z-40",children:h.jsxs("div",{className:"px-4 sm:px-6",children:[h.jsxs("div",{className:"flex items-center h-16 gap-4",children:[s.pathname==="/"&&h.jsxs("button",{onClick:i,"data-tour-id":"vehicle-badge",className:P("hidden sm:flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all duration-200","hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-500",l?"bg-green-50 text-green-700 ring-1 ring-green-200 hover:bg-green-100":"bg-primary-50 text-primary-700 ring-1 ring-primary-200 hover:bg-primary-100"),title:l?"Edit vehicle profile":"Set up your vehicle profile",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 17h8M8 17v-4h8v4M8 17H5a2 2 0 01-2-2v-3a2 2 0 012-2h1l2-4h8l2 4h1a2 2 0 012 2v3a2 2 0 01-2 2h-3M7 17a1 1 0 11-2 0 1 1 0 012 0zm12 0a1 1 0 11-2 0 1 1 0 012 0z"})}),h.jsx("span",{className:"max-w-[120px] truncate",children:l?l.name:"Setup Vehicle"})]}),h.jsxs("div",{className:"flex items-center space-x-3",children:[s.pathname==="/"&&h.jsx("button",{onClick:r,className:"lg:hidden p-2 rounded-lg text-neutral-500 hover:text-neutral-700 hover:bg-neutral-50","aria-label":"Toggle sidebar",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),h.jsxs(_,{to:"/",className:"flex items-center space-x-3",children:[h.jsx("img",{src:"/logo.png",alt:"European Camper Planner",className:"w-8 h-8"}),h.jsxs("div",{className:"hidden sm:block",children:[h.jsx("h1",{className:"text-lg lg:text-xl font-display font-extrabold text-neutral-900",children:"European Camper Planner"}),h.jsx("p",{className:"text-xs text-primary-600 font-display font-semibold tracking-wider uppercase hidden lg:block",children:"Free trip planning for Europe"})]}),h.jsx("div",{className:"sm:hidden",children:h.jsx("h1",{className:"text-lg font-display font-extrabold text-neutral-900",children:"Camper Planner"})})]})]}),h.jsx("nav",{className:"hidden lg:flex space-x-6",children:u.map(d=>h.jsx(_,{to:d.path,className:P("px-3 py-2 rounded-lg text-sm font-display font-medium transition-all duration-200 border-b-2",c(d.path)?"text-primary-700 border-accent-500":"text-neutral-600 border-transparent hover:text-neutral-900 hover:bg-neutral-50"),children:d.label},d.key))}),h.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-4 ml-auto",children:[s.pathname!=="/"&&h.jsxs(_,{to:"/",className:"hidden sm:flex items-center gap-1.5 px-4 py-2 bg-accent-500 text-white rounded-lg hover:bg-accent-600 text-sm font-display font-semibold transition-all duration-200 shadow-sm hover:shadow-medium active:scale-[0.98]",children:[h.jsx(dt,{className:"w-4 h-4"}),"Plan a Trip"]}),Yn.MULTI_LANGUAGE_COMPLETE,h.jsx("button",{type:"button",onClick:p,className:"lg:hidden p-2 rounded-lg text-neutral-500 hover:text-neutral-700 hover:bg-neutral-50","aria-label":"Toggle menu",children:h.jsx("svg",{className:P("w-6 h-6 transition-transform",e&&"rotate-90"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e?h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),e&&h.jsx("div",{className:"lg:hidden bg-white",children:h.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[u.map(d=>h.jsx(_,{to:d.path,onClick:()=>n(!1),className:P("block px-3 py-2 rounded-lg text-base font-display font-medium transition-all duration-200",c(d.path)?"text-primary-700 bg-primary-50":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-50"),children:d.label},d.key)),s.pathname!=="/"&&h.jsxs(_,{to:"/",onClick:()=>n(!1),className:"w-full flex items-center gap-2 px-3 py-2.5 rounded-lg text-base font-display font-semibold text-accent-700 bg-accent-50 hover:bg-accent-100 transition-all duration-200",children:[h.jsx(dt,{className:"w-4 h-4"}),"Plan a Trip"]})]})})]})}),e&&h.jsx("div",{className:"fixed inset-0 z-30 bg-black/25 backdrop-blur-sm lg:hidden",onClick:()=>n(!1)})]})},Fs="https://ko-fi.com/camperplanning",Vs=()=>{const s=new Date().getFullYear();return h.jsxs("footer",{className:"bg-neutral-900 text-neutral-300",children:[h.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[h.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("img",{src:"/logo.png",alt:"European Camper Planner",className:"w-7 h-7"}),h.jsx("span",{className:"text-white font-display font-semibold text-sm",children:"European Camper Planner"})]}),h.jsx("p",{className:"text-neutral-400 text-sm leading-relaxed",children:"Free, privacy-first trip planning for European camper travellers. No accounts, no subscriptions."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-display font-semibold text-sm mb-3",children:"Plan"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{children:h.jsx(_,{to:"/",className:"text-sm text-neutral-400 hover:text-white hover:underline transition-colors",children:"Trip Planner"})}),h.jsx("li",{children:h.jsx(_,{to:"/guides",className:"text-sm text-neutral-400 hover:text-white hover:underline transition-colors",children:"Travel Guides"})}),h.jsx("li",{children:h.jsx(_,{to:"/about",className:"text-sm text-neutral-400 hover:text-white hover:underline transition-colors",children:"About"})}),h.jsx("li",{children:h.jsx(_,{to:"/help",className:"text-sm text-neutral-400 hover:text-white hover:underline transition-colors",children:"Help Guide"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-display font-semibold text-sm mb-3",children:"Legal"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{children:h.jsx(_,{to:"/privacy",className:"text-sm text-neutral-400 hover:text-white hover:underline transition-colors",children:"Privacy Policy"})}),h.jsx("li",{children:h.jsx(_,{to:"/terms",className:"text-sm text-neutral-400 hover:text-white hover:underline transition-colors",children:"Terms of Use"})}),h.jsx("li",{children:h.jsx(_,{to:"/affiliate-disclosure",className:"text-sm text-neutral-400 hover:text-white hover:underline transition-colors",children:"Affiliate Disclosure"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-display font-semibold text-sm mb-3",children:"Support"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{children:h.jsxs(_,{to:"/support",className:"text-sm text-neutral-400 hover:text-white hover:underline transition-colors inline-flex items-center gap-1",children:[h.jsx(_n,{className:"w-3.5 h-3.5"}),"Support This Project"]})}),h.jsx("li",{children:h.jsxs(_,{to:"/feedback",className:"text-sm text-neutral-400 hover:text-white hover:underline transition-colors inline-flex items-center gap-1",children:[h.jsx(Dn,{className:"w-3.5 h-3.5"}),"Feedback"]})}),h.jsx("li",{children:h.jsxs("a",{href:Fs,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-neutral-400 hover:text-white hover:underline transition-colors inline-flex items-center gap-1",children:["Buy us a coffee",h.jsx(ut,{className:"w-3 h-3"})]})}),h.jsx("li",{children:h.jsxs("a",{href:"https://github.com/AlphaBravoAlpha/camper-planner",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-neutral-400 hover:text-white hover:underline transition-colors inline-flex items-center gap-1",children:["GitHub",h.jsx(ut,{className:"w-3 h-3"})]})})]})]})]})}),h.jsx("div",{className:"border-t border-neutral-800",children:h.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:h.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 text-xs text-neutral-500",children:[h.jsxs("p",{children:["© ",s," European Camper Trip Planner. Free and open source."]}),h.jsxs("p",{className:"text-center sm:text-right",children:["Some links may earn us a small commission at no extra cost to you."," ",h.jsx(_,{to:"/affiliate-disclosure",className:"underline hover:text-neutral-300 transition-colors",children:"Learn more"})]})]})})})]})};class Bs extends N.Component{constructor(e){super(e);L(this,"handleReload",()=>{window.location.reload()});L(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?h.jsx("div",{className:"min-h-screen bg-neutral-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:h.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:h.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:h.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.864-.833-2.632 0L4.182 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),h.jsx("h2",{className:"mt-6 text-lg font-medium text-neutral-900",children:"Something went wrong"}),h.jsx("p",{className:"mt-2 text-sm text-neutral-600",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),!1,h.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[h.jsx("button",{onClick:this.handleReset,className:"px-4 py-2 text-sm font-medium text-neutral-700 bg-white border border-neutral-300 rounded-md hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Try Again"}),h.jsx("button",{onClick:this.handleReload,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Reload Page"}),h.jsx("a",{href:"/",className:"px-4 py-2 text-sm font-medium text-primary-600 bg-primary-50 border border-primary-200 rounded-md hover:bg-primary-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 text-center",children:"Go Home"})]})]})})})}):this.props.children}}const ft=({size:s="md",variant:t="spinner",className:e,text:n})=>{const r={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"},i={xs:"text-xs",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"};return t==="dots"?h.jsxs("div",{className:P("flex items-center justify-center space-x-1",e),children:[[0,1,2].map(a=>h.jsx("div",{className:P("bg-primary-600 rounded-full animate-pulse",r[s]),style:{animationDelay:`${a*.2}s`,animationDuration:"1s"}},a)),n&&h.jsx("span",{className:P("ml-3 text-neutral-600",i[s]),children:n})]}):t==="pulse"?h.jsxs("div",{className:P("flex items-center justify-center",e),children:[h.jsx("div",{className:P("bg-primary-600 rounded-full animate-ping",r[s])}),n&&h.jsx("span",{className:P("ml-3 text-neutral-600",i[s]),children:n})]}):h.jsxs("div",{className:P("flex items-center justify-center",e),children:[h.jsx("div",{className:P("animate-spin rounded-full border-2 border-neutral-300 border-t-primary-600",r[s]),role:"status","aria-label":"Loading",children:h.jsx("span",{className:"sr-only",children:"Loading..."})}),n&&h.jsx("span",{className:P("ml-3 text-neutral-600",i[s]),children:n})]})},Us=({children:s,sidebar:t,sidebarOpen:e=!1,className:n,fullHeight:r=!0})=>h.jsxs("div",{className:P("flex",r?"h-full":"min-h-screen",n),children:[t&&h.jsxs(h.Fragment,{children:[h.jsx("aside",{className:P("hidden lg:flex lg:flex-col lg:w-80 lg:fixed lg:inset-y-0 lg:pt-16","bg-white border-r border-neutral-200","z-30"),children:h.jsx("div",{className:"flex-1 overflow-y-auto",children:t})}),e&&h.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"}),h.jsxs("aside",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[h.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:h.jsxs("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[h.jsx("span",{className:"sr-only",children:"Close sidebar"}),h.jsx("svg",{className:"h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})}),h.jsx("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:t})]})]})]}),h.jsx("main",{className:P("flex-1 flex flex-col",t&&"lg:pl-80"),children:s})]});class Ks{constructor(){L(this,"routingService");L(this,"distanceCache",new Map);this.routingService=new zt}async optimizeRoute(t,e){if(t.length<3)throw new Error("Route optimization requires at least 3 waypoints");const n=Date.now(),r=await this.calculateRouteMetrics(t,e.vehicleProfile),i=await this.buildDistanceMatrix(t,e.vehicleProfile),a=await this.solveTSP(i,e,t),o=this.reorderWaypoints(t,a.order,e.lockedWaypoints),l=await this.calculateRouteMetrics(o,e.vehicleProfile),u=this.calculateImprovements(r,l);return{originalRoute:{waypoints:t,totalDistance:r.distance,totalTime:r.duration,estimatedCost:r.cost},optimizedRoute:{waypoints:o,totalDistance:l.distance,totalTime:l.duration,estimatedCost:l.cost,reorderingApplied:JSON.stringify(t.map(c=>c.id))!==JSON.stringify(o.map(c=>c.id))},improvements:u,optimizationMetadata:{algorithm:e.objective==="shortest"?"Distance-TSP":e.objective==="fastest"?"Time-TSP":"Balanced-TSP",iterations:a.iterations,executionTime:Date.now()-n,convergenceReached:a.converged}}}async findOptimalInsertion(t,e,n){if(t.length===0)return{suggestedPosition:0,routeImpact:{distanceAdded:0,timeAdded:0,efficiency:1},alternatives:[]};const r=[],i=await this.calculateRouteMetrics(t,n.vehicleProfile);for(let o=0;o<=t.length;o++){const l=[...t];l.splice(o,0,e);const u=await this.calculateRouteMetrics(l,n.vehicleProfile),c=u.distance-i.distance,p=u.duration-i.duration,d=this.calculateInsertionEfficiency(c,p,n);r.push({position:o,distanceAdded:c,timeAdded:p,efficiency:d})}r.sort((o,l)=>l.efficiency-o.efficiency);const a=r[0];return{suggestedPosition:a.position,routeImpact:{distanceAdded:a.distanceAdded,timeAdded:a.timeAdded,efficiency:a.efficiency},alternatives:r.slice(1,4)}}async buildDistanceMatrix(t,e){const n=t.length,r=Array(n).fill(null).map(()=>Array(n).fill(0)),i=Array(n).fill(null).map(()=>Array(n).fill(0)),a=Array(n).fill(null).map(()=>Array(n).fill(0)),o=this.generateMatrixCacheKey(t,e),l=this.distanceCache.get(o);if(l)return l;for(let c=0;c<n;c++)for(let p=0;p<n;p++){if(c===p){r[c][p]=0,i[c][p]=0,a[c][p]=0;continue}try{const d={waypoints:[t[c],t[p]],vehicleProfile:e,options:{alternatives:!1,steps:!1,geometries:"geojson"}},f=await this.routingService.calculateRoute(d);if(f.routes&&f.routes.length>0){const y=f.routes[0];r[c][p]=y.summary.distance/1e3,i[c][p]=y.summary.duration/60,a[c][p]=this.estimateRouteCost(y.summary.distance,y.summary.duration,e)}else r[c][p]=this.calculateHaversineDistance(t[c],t[p]),i[c][p]=r[c][p]*1.2,a[c][p]=r[c][p]*.5}catch(d){console.warn(`Failed to calculate route from ${c} to ${p}:`,d),r[c][p]=this.calculateHaversineDistance(t[c],t[p]),i[c][p]=r[c][p]*1.2,a[c][p]=r[c][p]*.5}}const u={distances:r,durations:i,costs:a};return this.distanceCache.set(o,u),u}async solveTSP(t,e,n){const r=t.distances.length;if(r<=3)return{order:Array.from({length:r},(d,f)=>f),iterations:0,converged:!0};const i=this.getLockedPositions(n,e.lockedWaypoints),a=(d,f)=>{switch(e.objective){case"shortest":return t.distances[d][f];case"fastest":return t.durations[d][f];case"balanced":const y=t.durations[d][f]/Math.max(...t.durations.flat()),m=t.distances[d][f]/Math.max(...t.distances.flat());return .6*y+.4*m;default:return t.distances[d][f]}};let o=this.nearestNeighborTSP(t,a,i),l=this.calculateTourCost(o,a);const u=Math.min(1e3,r*r);let c=0,p=!0;for(;p&&c<u;){p=!1;for(let d=1;d<r-1;d++)if(!i.has(d))for(let f=d+1;f<r;f++){if(i.has(f))continue;const y=this.twoOptSwap(o,d,f),m=this.calculateTourCost(y,a);m<l&&(o=y,l=m,p=!0)}c++}return{order:o,iterations:c,converged:!p}}nearestNeighborTSP(t,e,n){const r=t.distances.length,i=new Set,a=[];let o=0;for(a.push(o),i.add(o);i.size<r;){let l=-1,u=1/0;for(let c=0;c<r;c++)if(!i.has(c)){const p=e(o,c);p<u&&(u=p,l=c)}l!==-1&&(a.push(l),i.add(l),o=l)}return a}twoOptSwap(t,e,n){const r=[...t];for(;e<n;)[r[e],r[n]]=[r[n],r[e]],e++,n--;return r}calculateTourCost(t,e){let n=0;for(let r=0;r<t.length-1;r++)n+=e(t[r],t[r+1]);return n}reorderWaypoints(t,e,n){if(n&&n.length>0){const r=[...t],i=new Set(n);let a=0;for(let o=0;o<r.length;o++)if(!i.has(r[o].id)){for(;a<e.length&&i.has(t[e[a]].id);)a++;a<e.length&&(r[o]=t[e[a]],a++)}return r}return e.map(r=>t[r])}async calculateRouteMetrics(t,e){if(t.length<2)return{distance:0,duration:0,cost:0};try{const r={waypoints:t,vehicleProfile:e,options:{alternatives:!1,steps:!1,geometries:"geojson"}},i=await this.routingService.calculateRoute(r);if(i.routes&&i.routes.length>0){const a=i.routes[0];return{distance:a.summary.distance/1e3,duration:a.summary.duration/60,cost:this.estimateRouteCost(a.summary.distance,a.summary.duration,e)}}}catch(r){console.warn("Failed to calculate route metrics:",r)}let n=0;for(let r=0;r<t.length-1;r++)n+=this.calculateHaversineDistance(t[r],t[r+1]);return{distance:n,duration:n*1.2,cost:n*.5}}calculateImprovements(t,e){const n=Math.max(0,t.distance-e.distance),r=Math.max(0,t.duration-e.duration),i=t.cost&&e.cost?Math.max(0,t.cost-e.cost):void 0,a=t.distance>0?n/t.distance*100:0;return{distanceSaved:n,timeSaved:r,costSaved:i,percentageImprovement:a}}calculateInsertionEfficiency(t,e,n){const a=Math.max(0,1-t/50),o=Math.max(0,1-e/60);switch(n.objective){case"shortest":return .8*a+.2*o;case"fastest":return .2*a+.8*o;case"balanced":return .5*a+.5*o;default:return .5*a+.5*o}}getLockedPositions(t,e){const n=new Set;return e&&t.forEach((r,i)=>{e.includes(r.id)&&n.add(i)}),n}generateMatrixCacheKey(t,e){const n=t.map(i=>`${i.lat.toFixed(4)},${i.lng.toFixed(4)}`).join("|"),r=e?`${e.type}-${e.height}-${e.weight}`:"default";return`${n}::${r}`}calculateHaversineDistance(t,e){const r=(e.lat-t.lat)*Math.PI/180,i=(e.lng-t.lng)*Math.PI/180,a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}estimateRouteCost(t,e,n){const r=t/1e3;let i=8;if(n)switch(n.type){case"motorhome":i=12+(n.weight||0)*.5;break;case"caravan":i=10+(n.weight||0)*.3;break;case"van":i=9;break;default:i=7;break}const a=1.5,o=r*.1;return r*i/100*a+o}clearCache(){this.distanceCache.clear()}getCacheStats(){return{size:this.distanceCache.size,keys:Array.from(this.distanceCache.keys())}}}const Xr=new Ks,Ws={consumptionType:"l_per_100km",consumption:12,fuelType:"diesel",tankCapacity:80},Hs={priceType:"default_european",currency:"EUR",lastUpdated:new Date},qs={showCostBreakdown:!0,showDailyEstimates:!0,showOptimizationSuggestions:!0,currency:"EUR",includeAccommodationCosts:!0,includeTollEstimates:!1},Gs=ae()($e((s,t)=>({fuelConsumptionSettings:Ws,setFuelConsumptionSettings:e=>{s({fuelConsumptionSettings:e}),s({lastCalculation:{}})},fuelPriceSettings:Hs,setFuelPriceSettings:e=>{s({fuelPriceSettings:e}),s({lastCalculation:{}})},preferences:qs,setPreferences:e=>{s({preferences:{...t().preferences,...e}})},autoUpdatePrices:!1,setAutoUpdatePrices:e=>{s({autoUpdatePrices:e})},lastCalculation:{},setLastCalculation:e=>{s({lastCalculation:e})}}),{name:"camper-planner-cost-settings",partialize:s=>({fuelConsumptionSettings:s.fuelConsumptionSettings,fuelPriceSettings:s.fuelPriceSettings,preferences:s.preferences,autoUpdatePrices:s.autoUpdatePrices})}));function ei(s,t){const e=s.map(r=>r.id).join("-"),n=t?`${t.type}-${t.length}-${t.weight}`:"default";return`${e}_${n}`}function ti(s,t=30){if(!s)return!1;const e=Date.now(),n=t*60*1e3;return e-s<n}const Ve="camper-planner-onboarding-complete",gt="5.0",Js=()=>{const[s,t]=N.useState(!1),[e,n]=N.useState(!0);N.useEffect(()=>{(()=>{try{const l=localStorage.getItem(Ve);if(!l){t(!0),n(!1);return}if(JSON.parse(l).version!==gt){t(!0),n(!1);return}t(!1),n(!1)}catch(l){console.error("Error checking onboarding status:",l),t(!0),n(!1)}})()},[]);const r=()=>{try{const o={isComplete:!0,version:gt,completedAt:new Date().toISOString()};localStorage.setItem(Ve,JSON.stringify(o)),t(!1)}catch(o){console.error("Error saving onboarding state:",o),t(!1)}};return{showOnboarding:s,isLoading:e,completeOnboarding:r,skipOnboarding:()=>{r()},resetOnboarding:()=>{try{localStorage.removeItem(Ve),t(!0)}catch(o){console.error("Error resetting onboarding:",o)}}}},ie=class ie{constructor(){L(this,"announceElement",null);this.createAnnounceElement()}static getInstance(){return ie.instance||(ie.instance=new ie),ie.instance}createAnnounceElement(){typeof window>"u"||(this.announceElement=document.createElement("div"),this.announceElement.setAttribute("aria-live","polite"),this.announceElement.setAttribute("aria-atomic","true"),this.announceElement.setAttribute("aria-hidden","false"),this.announceElement.className="sr-only",this.announceElement.style.position="absolute",this.announceElement.style.left="-10000px",this.announceElement.style.width="1px",this.announceElement.style.height="1px",this.announceElement.style.overflow="hidden",document.body.appendChild(this.announceElement))}announce(t,e="polite"){this.announceElement&&(this.announceElement.setAttribute("aria-live",e),this.announceElement.textContent="",setTimeout(()=>{this.announceElement&&(this.announceElement.textContent=t)},100),setTimeout(()=>{this.announceElement&&(this.announceElement.textContent="")},1e3))}};L(ie,"instance");let Xe=ie;const Ys=()=>{const s=Xe.getInstance();return(t,e="polite")=>{s.announce(t,e)}},Qs={handleEnterKey:s=>t=>{t.key==="Enter"&&(t.preventDefault(),s())},handleSpaceKey:s=>t=>{t.key===" "&&(t.preventDefault(),s())},handleEscapeKey:s=>t=>{t.key==="Escape"&&(t.preventDefault(),s())},handleArrowKeys:s=>t=>{switch(t.key){case"ArrowUp":s.up&&(t.preventDefault(),s.up());break;case"ArrowDown":s.down&&(t.preventDefault(),s.down());break;case"ArrowLeft":s.left&&(t.preventDefault(),s.left());break;case"ArrowRight":s.right&&(t.preventDefault(),s.right());break}},trapFocus:s=>{const t=s.current?.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select');if(!t||t.length===0)return;const e=t[0],n=t[t.length-1];return r=>{r.key==="Tab"&&(r.shiftKey?document.activeElement===e&&(r.preventDefault(),n.focus()):document.activeElement===n&&(r.preventDefault(),e.focus()))}}},Zs=s=>{const t=N.useRef(null);return N.useEffect(()=>{if(!s||!t.current)return;const e=Qs.trapFocus(t);e&&document.addEventListener("keydown",e);const n=t.current.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select');return n.length>0&&n[0].focus(),()=>{e&&document.removeEventListener("keydown",e)}},[s]),t},Xs=9997,er=({cutoutRect:s,overlayOpacity:t=.6,onClick:e})=>h.jsxs("svg",{className:"fixed inset-0 pointer-events-auto",style:{width:"100vw",height:"100vh",zIndex:Xs},children:[h.jsx("defs",{children:h.jsxs("mask",{id:"spotlight-mask",children:[h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),s&&h.jsx("rect",{x:s.x,y:s.y,width:s.width,height:s.height,rx:s.rx,fill:"black",style:{transition:"all 0.3s ease-out"}})]})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`rgba(0, 0, 0, ${t})`,mask:"url(#spotlight-mask)",onClick:e,style:{cursor:e?"pointer":"default"}}),s&&h.jsx("rect",{x:s.x,y:s.y,width:s.width,height:s.height,rx:s.rx,fill:"none",stroke:"rgba(255, 255, 255, 0.3)",strokeWidth:"2",style:{transition:"all 0.3s ease-out"}})]}),tr={Truck:qn,MapPin:$n,Tent:Wn,Calculator:Rn,Briefcase:jn,CheckCircle:Pt,Search:Un,Navigation:Fn},nr=({current:s,total:t})=>h.jsx("div",{className:"flex items-center justify-center space-x-1.5 mb-4",children:Array.from({length:t}).map((e,n)=>h.jsx("div",{className:P("h-1.5 rounded-full transition-all duration-300",n===s?"w-5 bg-primary-600":n<s?"w-1.5 bg-primary-400":"w-1.5 bg-neutral-300")},n))}),sr=({step:s,currentIndex:t,totalSteps:e,tooltipStyle:n,onNext:r,onBack:i,onSkip:a,isFirstStep:o,isLastStep:l,containerRef:u})=>{const c=tr[s.iconKey],p=s.variant==="welcome";return h.jsxs("div",{ref:u,className:P("fixed bg-white rounded-lg shadow-xl border border-neutral-200 p-5 max-w-[calc(100vw-2rem)] animate-fade-in",p?"w-96":"w-80"),style:{...n,zIndex:9999},role:"dialog","aria-modal":"true","aria-labelledby":`tour-step-${s.id}`,"aria-describedby":`tour-desc-${s.id}`,children:[h.jsx("button",{onClick:a,className:"absolute top-3 right-3 text-neutral-400 hover:text-neutral-600 transition-colors","aria-label":"Close tour",children:h.jsx(Jn,{className:"w-4 h-4"})}),h.jsx(nr,{current:t,total:e}),p?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex justify-center mb-3",children:h.jsx("img",{src:"/images/onboarding-welcome.png",alt:"European Camper Planner",className:"w-14 h-14 rounded-lg object-cover"})}),h.jsx("h2",{id:`tour-step-${s.id}`,className:"text-lg font-display font-bold text-neutral-900 leading-tight text-center mb-2",children:s.headline}),h.jsx("p",{id:`tour-desc-${s.id}`,className:"text-sm text-neutral-600 leading-relaxed text-center mb-4",children:s.body}),s.features&&h.jsx("ul",{className:"space-y-2 mb-4",children:s.features.map((d,f)=>h.jsxs("li",{className:"flex items-start gap-2 text-xs text-neutral-600",children:[h.jsx(Pt,{className:"w-3.5 h-3.5 text-success-500 flex-shrink-0 mt-0.5"}),h.jsx("span",{children:d})]},f))})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary-50 flex items-center justify-center text-primary-600 flex-shrink-0",children:h.jsx(c,{className:"w-5 h-5"})}),h.jsx("div",{className:"pt-1",children:h.jsx("h2",{id:`tour-step-${s.id}`,className:"text-base font-display font-bold text-neutral-900 leading-tight",children:s.headline})})]}),h.jsx("p",{id:`tour-desc-${s.id}`,className:"text-sm text-neutral-600 leading-relaxed mb-3",children:s.body}),s.tip&&h.jsxs("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-2.5 text-xs text-primary-800 mb-4",children:[h.jsx("span",{className:"font-medium",children:"Tip: "}),s.tip]})]}),h.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-neutral-100",children:[h.jsx("button",{onClick:a,className:"text-xs text-neutral-400 hover:text-neutral-600 transition-colors",children:"Skip tour"}),h.jsxs("div",{className:"flex gap-2",children:[!o&&h.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm border border-neutral-300 rounded-lg text-neutral-700 hover:bg-neutral-50 transition-colors",children:"Back"}),h.jsxs("button",{onClick:r,className:"px-4 py-1.5 text-sm bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 active:scale-[0.97] transition-all flex items-center gap-1.5",children:[s.ctaText??(l?"Start Planning":"Next"),!s.ctaText&&!l&&h.jsx(Nn,{className:"w-3.5 h-3.5"})]})]})]})]})},Be=[{id:"demo-london",lat:51.5074,lng:-.1278,type:"start",name:"London, United Kingdom"},{id:"demo-campsite-lyon",lat:45.75,lng:4.85,type:"campsite",name:"Campsite near Lyon"},{id:"demo-campsite-nice",lat:43.7,lng:7.27,type:"campsite",name:"Campsite near Nice"}],rr={id:"demo-vehicle",name:"Hymer B550",type:"motorhome",height:3.1,width:2.35,length:5.99,weight:3.5,fuelType:"diesel",createdAt:new Date().toISOString()};function J(s){const t=document.querySelector(`[aria-label="${s}"]`);return t?(t.click(),!0):!1}function Ue(s){const t=document.querySelector(`[data-tour-id="${s}"]`);return t?(t.click(),!0):!1}function B(s){const t=document.querySelector(s);if(!t)return!1;const e=t.className;return e.includes("bg-green-600")||e.includes("bg-emerald-50")||e.includes("bg-violet-50")}const M={addLondon:()=>{const s=Le.getState();s.waypoints.length>0&&s.clearRoute(),s.addWaypoint(Be[0]),K.getState().setCenter([51.5,-.1]),K.getState().setZoom(8)},panToFrance:()=>{K.getState().setCenter([46.5,2.3]),K.getState().setZoom(6)},addLyonCampsite:()=>{const s=Le.getState();s.waypoints.some(e=>e.id==="demo-campsite-lyon")||s.addWaypoint(Be[1]),K.getState().setCenter([48.5,2.5]),K.getState().setZoom(6)},addNiceCampsite:()=>{const s=Le.getState();s.waypoints.some(e=>e.id==="demo-campsite-nice")||s.addWaypoint(Be[2]),K.getState().setCenter([47,3.5]),K.getState().setZoom(5)},openVehiclePanel:()=>{B('[aria-label="Toggle cost calculator"]')&&J("Toggle cost calculator"),B('[aria-label="Toggle planning tools"]')&&J("Toggle planning tools"),Ze.getState().setProfile(rr),Gs.getState().setFuelConsumptionSettings({consumptionType:"l_per_100km",consumption:12.5,fuelType:"diesel",tankCapacity:80}),Y.getState().openVehicleSidebar()},showPlanningTools:()=>{Y.getState().closeVehicleSidebar(),B('[aria-label="Toggle cost calculator"]')&&J("Toggle cost calculator"),setTimeout(()=>{B('[aria-label="Toggle planning tools"]')||Ue("planning-tools-button")},250)},showCostCalculator:()=>{B('[aria-label="Toggle planning tools"]')&&J("Toggle planning tools"),Y.getState().closeVehicleSidebar(),setTimeout(()=>{B('[aria-label="Toggle cost calculator"]')||J("Toggle cost calculator")},250)},showCampsites:()=>{B('[aria-label="Toggle cost calculator"]')&&J("Toggle cost calculator"),B('[aria-label="Toggle planning tools"]')&&J("Toggle planning tools"),Y.getState().closeVehicleSidebar(),setTimeout(()=>{const s=document.querySelector('[data-tour-id="campsite-toggle"]');s&&s.className.includes("bg-white")&&Ue("campsite-toggle")},250)},closeAllPanels:()=>{B('[data-tour-id="campsite-toggle"]')&&Ue("campsite-toggle"),B('[aria-label="Toggle cost calculator"]')&&J("Toggle cost calculator"),B('[aria-label="Toggle planning tools"]')&&J("Toggle planning tools"),Y.getState().closeVehicleSidebar()},cleanup:()=>{Le.getState().clearRoute(),Ze.getState().clearProfile(),Y.getState().closeVehicleSidebar(),K.getState().setCenter([54.526,15.2551]),K.getState().setZoom(5),M.closeAllPanels()}},we=[{id:"welcome",targetSelector:null,tooltipPosition:"center",variant:"welcome",title:"Welcome",headline:"Plan Your European Camper Trip",body:"Follow along as we plan a motorhome trip from London to the French Riviera — the same workflow you'll use for your own trips.",features:["Search and add stops along your route","Discover campsites with amenity filters","Set vehicle dimensions for safe road routing","View daily driving stages and trip costs","Export routes to GPX for your GPS"],ctaText:"Show Me How",iconKey:"Truck"},{id:"add-start",targetSelector:'[data-tour-id="search-bar"]',tooltipPosition:"below",title:"Start Point",headline:"Start from Home",body:"Every trip starts somewhere. We've added London as your departure point — you'll do the same by searching for your address or right-clicking the map.",tip:"You can search for any address, city, or place of interest.",iconKey:"MapPin",spotlightPadding:12,overlayOpacity:.3,onEnter:M.addLondon},{id:"search-destination",targetSelector:'[data-tour-id="search-bar"]',tooltipPosition:"below",title:"Destination",headline:"Search for a Destination",body:"Now search for where you want to go. We're heading to the South of France — the search finds cities, towns, and campsites near any location.",tip:"Results show both places and campsites. Click 'Go' to navigate the map, or '+ Add' to add it to your route.",iconKey:"Search",spotlightPadding:12,overlayOpacity:.3,onEnter:M.panToFrance},{id:"campsite-near-lyon",targetSelector:null,tooltipPosition:"right",title:"Overnight Stop",headline:"Pick a Campsite for Your First Night",body:"On a long drive, you'll want overnight stops. We've added a campsite near Lyon — around 450km from London, a good day's driving.",tip:"Zoom into any area and toggle campsites on to browse real data from OpenStreetMap.",iconKey:"Tent",overlayOpacity:.12,onEnter:M.addLyonCampsite},{id:"campsite-destination",targetSelector:null,tooltipPosition:"right",title:"Final Destination",headline:"Add Your Destination Campsite",body:"We've added a campsite on the French Riviera as your final stop. With three waypoints, the planner calculates the full multi-stop route.",tip:"Drag waypoint markers on the map to adjust your route at any time.",iconKey:"Tent",overlayOpacity:.08,onEnter:M.addNiceCampsite},{id:"vehicle-setup",targetSelector:'[data-tour-id="vehicle-sidebar-panel"]',tooltipPosition:"right",title:"Vehicle",headline:"Set Up Your Vehicle",body:"Tell the planner your vehicle's dimensions so it avoids roads too narrow, bridges too low, or weight-restricted routes.",tip:"Open this panel any time by clicking the vehicle badge in the header.",iconKey:"Truck",spotlightPadding:0,overlayOpacity:.5,onEnter:M.openVehiclePanel},{id:"daily-stages",targetSelector:'[data-tour-id="planning-tools-panel"]',tooltipPosition:"left",title:"Planning",headline:"Daily Driving Stages",body:"The planning tools split your route into daily stages based on your vehicle type. A motorhome is typically limited to around 6 hours of driving per day.",iconKey:"Navigation",spotlightPadding:0,overlayOpacity:.5,onEnter:M.showPlanningTools},{id:"cost-calculator",targetSelector:".map-panel-right",tooltipPosition:"left",title:"Costs",headline:"Estimate Trip Costs",body:"The cost calculator estimates fuel costs based on your vehicle's consumption and fuel prices in each country along your route.",iconKey:"Calculator",spotlightPadding:0,overlayOpacity:.5,onEnter:M.showCostCalculator},{id:"campsites-map",targetSelector:'[data-tour-id="campsite-toggle"]',tooltipPosition:"right",title:"Campsites",headline:"Explore Campsites on the Map",body:"Toggle campsites on to see real data from OpenStreetMap. Zoom in to see individual markers — click any for details, amenities, and booking links.",tip:"Use the filters to narrow results by type, amenities, or vehicle compatibility.",iconKey:"Tent",spotlightPadding:8,overlayOpacity:.15,onEnter:M.showCampsites},{id:"ready",targetSelector:null,tooltipPosition:"center",variant:"final",title:"Ready",headline:"You're Ready to Plan!",body:"That's the workflow! When you click Start Planning, we'll clear the demo trip and give you a fresh map. Search for your starting point, find campsites along the way, and build your dream route.",ctaText:"Start Planning",iconKey:"CheckCircle",onEnter:M.closeAllPanels}],le=16,ce=320,ve=320,te=16;function ir(s){const t=s.getBoundingClientRect();if(t.width===0&&t.height===0)return!1;const e=window.getComputedStyle(s);return!(e.display==="none"||e.visibility==="hidden")}function Ke(s,t,e,n){if(!s&&t==="center")return{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};if(!s)return{position:"fixed",bottom:"24px",right:"24px"};let r=0,i=0,a=t;return a==="below"&&(r=s.y+s.height+le,i=s.x+s.width/2-ce/2,r+ve>n-te&&(a="above")),a==="above"&&(r=s.y-ve-le,i=s.x+s.width/2-ce/2,r<te&&(r=s.y+s.height+le)),a==="right"&&(r=s.y+s.height/2-ve/2,i=s.x+s.width+le,i+ce>e-te&&(a="left")),a==="left"&&(r=s.y+s.height/2-ve/2,i=s.x-ce-le,i<te&&(r=s.y+s.height+le,i=s.x+s.width/2-ce/2)),i=Math.max(te,Math.min(i,e-ce-te)),r=Math.max(te,Math.min(r,n-ve-te)),{position:"fixed",top:`${r}px`,left:`${i}px`}}function ar(s,t,e=12,n){const[r,i]=N.useState({cutoutRect:null,tooltipStyle:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},isTargetFound:!1}),a=N.useCallback(()=>{const o=window.innerWidth,l=window.innerHeight,u=o<640;if(!s){i({cutoutRect:null,tooltipStyle:Ke(null,t,o,l),isTargetFound:!1});return}const c=document.querySelector(s);if(!c||!ir(c)||u){i({cutoutRect:null,tooltipStyle:Ke(null,"center",o,l),isTargetFound:!1});return}const p=c.getBoundingClientRect(),d={x:p.x-e,y:p.y-e,width:p.width+e*2,height:p.height+e*2,rx:12},f=Ke(d,t,o,l);i({cutoutRect:d,tooltipStyle:f,isTargetFound:!0})},[s,t,e,n]);return N.useEffect(()=>{const o=setTimeout(a,50),l=setTimeout(a,250),u=setTimeout(a,500),c=()=>a();window.addEventListener("resize",c);let p=null;return typeof ResizeObserver<"u"&&(p=new ResizeObserver(a),p.observe(document.body)),()=>{clearTimeout(o),clearTimeout(l),clearTimeout(u),window.removeEventListener("resize",c),p?.disconnect()}},[a]),r}const or=({onComplete:s,onSkip:t})=>{const e=Ys(),[n,r]=N.useState(0),i=Zs(!0),a=N.useRef(!1),o=we[n],l=we.length,u=n===0,c=n===l-1,{cutoutRect:p,tooltipStyle:d}=ar(o.targetSelector,o.tooltipPosition,o.spotlightPadding??12,n);N.useEffect(()=>(document.body.setAttribute("data-tour-step",o.id),()=>{document.body.removeAttribute("data-tour-step")}),[o.id]),N.useEffect(()=>{const g=we[n],x=setTimeout(()=>{g.onEnter?.()},100);return()=>{clearTimeout(x),g.onExit?.()}},[n]),N.useEffect(()=>()=>{a.current||(a.current=!0,M.cleanup())},[]);const f=N.useCallback(()=>{if(c)a.current=!0,M.cleanup(),s();else{const g=n+1;r(g),e(`Step ${g+1} of ${l}: ${we[g].headline}`,"polite")}},[n,c,s,e,l]),y=N.useCallback(()=>{if(n>0){const g=n-1;r(g),e(`Step ${g+1} of ${l}: ${we[g].headline}`,"polite")}},[n,e,l]),m=N.useCallback(()=>{a.current=!0,M.cleanup(),t()},[t]);return N.useEffect(()=>{const g=x=>{x.key==="Escape"&&m()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[m]),N.useEffect(()=>{const g=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=g}},[]),h.jsxs(h.Fragment,{children:[h.jsx(er,{cutoutRect:p,overlayOpacity:o.overlayOpacity}),h.jsx(sr,{step:o,currentIndex:n,totalSteps:l,tooltipStyle:d,onNext:f,onBack:y,onSkip:m,isFirstStep:u,isLastStep:c,containerRef:i})]})},w=s=>typeof s=="string",Se=()=>{let s,t;const e=new Promise((n,r)=>{s=n,t=r});return e.resolve=s,e.reject=t,e},mt=s=>s==null?"":""+s,lr=(s,t,e)=>{s.forEach(n=>{t[n]&&(e[n]=t[n])})},cr=/###/g,yt=s=>s&&s.indexOf("###")>-1?s.replace(cr,"."):s,bt=s=>!s||w(s),Ce=(s,t,e)=>{const n=w(t)?t.split("."):t;let r=0;for(;r<n.length-1;){if(bt(s))return{};const i=yt(n[r]);!s[i]&&e&&(s[i]=new e),Object.prototype.hasOwnProperty.call(s,i)?s=s[i]:s={},++r}return bt(s)?{}:{obj:s,k:yt(n[r])}},xt=(s,t,e)=>{const{obj:n,k:r}=Ce(s,t,Object);if(n!==void 0||t.length===1){n[r]=e;return}let i=t[t.length-1],a=t.slice(0,t.length-1),o=Ce(s,a,Object);for(;o.obj===void 0&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),o=Ce(s,a,Object),o&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=e},ur=(s,t,e,n)=>{const{obj:r,k:i}=Ce(s,t,Object);r[i]=r[i]||[],r[i].push(e)},Te=(s,t)=>{const{obj:e,k:n}=Ce(s,t);if(e)return e[n]},dr=(s,t,e)=>{const n=Te(s,e);return n!==void 0?n:Te(t,e)},Ft=(s,t,e)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in s?w(s[n])||s[n]instanceof String||w(t[n])||t[n]instanceof String?e&&(s[n]=t[n]):Ft(s[n],t[n],e):s[n]=t[n]);return s},ue=s=>s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var hr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const pr=s=>w(s)?s.replace(/[&<>"'\/]/g,t=>hr[t]):s;class fr{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(e!==void 0)return e;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const gr=[" ",",","?","!",";"],mr=new fr(20),yr=(s,t,e)=>{t=t||"",e=e||"";const n=gr.filter(a=>t.indexOf(a)<0&&e.indexOf(a)<0);if(n.length===0)return!0;const r=mr.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let i=!r.test(s);if(!i){const a=s.indexOf(e);a>0&&!r.test(s.substring(0,a))&&(i=!0)}return i},et=function(s,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!s)return;if(s[t])return s[t];const n=t.split(e);let r=s;for(let i=0;i<n.length;){if(!r||typeof r!="object")return;let a,o="";for(let l=i;l<n.length;++l)if(l!==i&&(o+=e),o+=n[l],a=r[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<n.length-1)continue;i+=l-i+1;break}r=a}return r},Ie=s=>s&&s.replace("_","-"),br={type:"logger",log(s){this.output("log",s)},warn(s){this.output("warn",s)},error(s){this.output("error",s)},output(s,t){console&&console[s]&&console[s].apply(console,t)}};class _e{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,e)}init(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||br,this.options=e,this.debug=e.debug}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}deprecate(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,n,r){return r&&!this.debug?null:(w(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new _e(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new _e(this.logger,t)}}var W=new _e;class Me{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const r=this.observers[n].get(e)||0;this.observers[n].set(e,r+1)}),this}off(t,e){if(this.observers[t]){if(!e){delete this.observers[t];return}this.observers[t].delete(e)}}emit(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o.apply(o,[t,...n])})}}class wt extends Me{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,a=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t.split("."):(o=[t,e],n&&(Array.isArray(n)?o.push(...n):w(n)&&i?o.push(...n.split(i)):o.push(n)));const l=Te(this.data,o);return!l&&!e&&!n&&t.indexOf(".")>-1&&(t=o[0],e=o[1],n=o.slice(2).join(".")),l||!a||!w(n)?l:et(this.data&&this.data[t]&&this.data[t][e],n,i)}addResource(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[t,e];n&&(o=o.concat(a?n.split(a):n)),t.indexOf(".")>-1&&(o=t.split("."),r=e,e=o[1]),this.addNamespaces(e),xt(this.data,o,r),i.silent||this.emit("added",t,e,n,r)}addResources(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in n)(w(n[i])||Array.isArray(n[i]))&&this.addResource(t,e,i,n[i],{silent:!0});r.silent||this.emit("added",t,e,n)}addResourceBundle(t,e,n,r,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[t,e];t.indexOf(".")>-1&&(o=t.split("."),r=n,n=e,e=o[1]),this.addNamespaces(e);let l=Te(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?Ft(l,n,i):l={...l,...n},xt(this.data,o,l),a.silent||this.emit("added",t,e,n)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return this.getResource(t,e)!==void 0}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,e)}:this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(r=>e[r]&&Object.keys(e[r]).length>0)}toJSON(){return this.data}}var Vt={processors:{},addPostProcessor(s){this.processors[s.name]=s},handle(s,t,e,n,r){return s.forEach(i=>{this.processors[i]&&(t=this.processors[i].process(t,e,n,r))}),t}};const vt={};class Ae extends Me{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),lr(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=W.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const n=this.resolve(t,e);return n&&n.res!==void 0}extractFromKey(t,e){let n=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const r=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator;let i=e.ns||this.options.defaultNS||[];const a=n&&t.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!yr(t,n,r);if(a&&!o){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:w(i)?[i]:i};const u=t.split(n);(n!==r||n===r&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),t=u.join(r)}return{key:t,namespaces:w(i)?[i]:i}}translate(t,e,n){if(typeof e!="object"&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),typeof e=="object"&&(e={...e}),e||(e={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const r=e.returnDetails!==void 0?e.returnDetails:this.options.returnDetails,i=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(t[t.length-1],e),l=o[o.length-1],u=e.lng||this.language,c=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const S=e.nsSeparator||this.options.nsSeparator;return r?{res:`${l}${S}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:`${l}${S}${a}`}return r?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:a}const p=this.resolve(t,e);let d=p&&p.res;const f=p&&p.usedKey||a,y=p&&p.exactUsedKey||a,m=Object.prototype.toString.apply(d),g=["[object Number]","[object Function]","[object RegExp]"],x=e.joinArrays!==void 0?e.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,v=!w(d)&&typeof d!="boolean"&&typeof d!="number";if(b&&d&&v&&g.indexOf(m)<0&&!(w(x)&&Array.isArray(d))){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,d,{...e,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return r?(p.res=S,p.usedParams=this.getUsedParamsDetails(e),p):S}if(i){const S=Array.isArray(d),k=S?[]:{},E=S?y:f;for(const R in d)if(Object.prototype.hasOwnProperty.call(d,R)){const ne=`${E}${i}${R}`;k[R]=this.translate(ne,{...e,joinArrays:!1,ns:o}),k[R]===ne&&(k[R]=d[R])}d=k}}else if(b&&w(x)&&Array.isArray(d))d=d.join(x),d&&(d=this.extendTranslation(d,t,e,n));else{let S=!1,k=!1;const E=e.count!==void 0&&!w(e.count),R=Ae.hasDefaultValue(e),ne=E?this.pluralResolver.getSuffix(u,e.count,e):"",ge=e.ordinal&&E?this.pluralResolver.getSuffix(u,e.count,{ordinal:!1}):"",oe=E&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi(),H=oe&&e[`defaultValue${this.options.pluralSeparator}zero`]||e[`defaultValue${ne}`]||e[`defaultValue${ge}`]||e.defaultValue;!this.isValidLookup(d)&&R&&(S=!0,d=H),this.isValidLookup(d)||(k=!0,d=a);const Ee=(e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:d,U=R&&H!==d&&this.options.updateMissing;if(k||S||U){if(this.logger.log(U?"updateKey":"missingKey",u,l,a,U?H:d),i){const T=this.resolve(a,{...e,keySeparator:!1});T&&T.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Q=[];const q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if(this.options.saveMissingTo==="fallback"&&q&&q[0])for(let T=0;T<q.length;T++)Q.push(q[T]);else this.options.saveMissingTo==="all"?Q=this.languageUtils.toResolveHierarchy(e.lng||this.language):Q.push(e.lng||this.language);const me=(T,$,Z)=>{const D=R&&Z!==d?Z:Ee;this.options.missingKeyHandler?this.options.missingKeyHandler(T,l,$,D,U,e):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(T,l,$,D,U,e),this.emit("missingKey",T,l,$,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?Q.forEach(T=>{const $=this.pluralResolver.getSuffixes(T,e);oe&&e[`defaultValue${this.options.pluralSeparator}zero`]&&$.indexOf(`${this.options.pluralSeparator}zero`)<0&&$.push(`${this.options.pluralSeparator}zero`),$.forEach(Z=>{me([T],a+Z,e[`defaultValue${Z}`]||H)})}):me(Q,a,H))}d=this.extendTranslation(d,t,e,p,n),k&&d===a&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${a}`),(k||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,S?d:void 0):d=this.options.parseMissingKeyHandler(d))}return r?(p.res=d,p.usedParams=this.getUsedParamsDetails(e),p):d}extendTranslation(t,e,n,r,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const u=w(t)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const d=t.match(this.interpolator.nestingRegexp);c=d&&d.length}let p=n.replace&&!w(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),t=this.interpolator.interpolate(t,p,n.lng||this.language||r.usedLng,n),u){const d=t.match(this.interpolator.nestingRegexp),f=d&&d.length;c<f&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(n.lng=this.language||r.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];return i&&i[0]===f[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${e[0]}`),null):a.translate(...f,e)},n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,l=w(o)?[o]:o;return t!=null&&l&&l.length&&n.applyPostProcessor!==!1&&(t=Vt.handle(l,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,r,i,a,o;return w(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(l,e),c=u.key;r=c;let p=u.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const d=e.count!==void 0&&!w(e.count),f=d&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi(),y=e.context!==void 0&&(w(e.context)||typeof e.context=="number")&&e.context!=="",m=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);p.forEach(g=>{this.isValidLookup(n)||(o=g,!vt[`${m[0]}-${g}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(vt[`${m[0]}-${g}`]=!0,this.logger.warn(`key "${r}" for languages "${m.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(x=>{if(this.isValidLookup(n))return;a=x;const b=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(b,c,x,g,e);else{let S;d&&(S=this.pluralResolver.getSuffix(x,e.count,e));const k=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(b.push(c+S),e.ordinal&&S.indexOf(E)===0&&b.push(c+S.replace(E,this.options.pluralSeparator)),f&&b.push(c+k)),y){const R=`${c}${this.options.contextSeparator}${e.context}`;b.push(R),d&&(b.push(R+S),e.ordinal&&S.indexOf(E)===0&&b.push(R+S.replace(E,this.options.pluralSeparator)),f&&b.push(R+k))}}let v;for(;v=b.pop();)this.isValidLookup(n)||(i=v,n=this.getResource(x,g,v,e))}))})}),{res:n,usedKey:r,exactUsedKey:i,usedLng:a,usedNS:o}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,r):this.resourceStore.getResource(t,e,n,r)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!w(t.replace);let r=n?t.replace:t;if(n&&typeof t.count<"u"&&(r.count=t.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const i of e)delete r[i]}return r}static hasDefaultValue(t){const e="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&t[n]!==void 0)return!0;return!1}}const We=s=>s.charAt(0).toUpperCase()+s.slice(1);class St{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=W.create("languageUtils")}getScriptPartFromCode(t){if(t=Ie(t),!t||t.indexOf("-")<0)return null;const e=t.split("-");return e.length===2||(e.pop(),e[e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(t){if(t=Ie(t),!t||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(w(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let r=Intl.getCanonicalLocales(t)[0];if(r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r)return r}catch{}const e=["hans","hant","latn","cyrl","cans","mong","arab"];let n=t.split("-");return this.options.lowerCaseLng?n=n.map(r=>r.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=We(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=We(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=We(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(n=>{if(e)return;const r=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(r))&&(e=r)}),!e&&this.options.supportedLngs&&t.forEach(n=>{if(e)return;const r=this.getLanguagePartFromCode(n);if(this.isSupportedCode(r))return e=r;e=this.options.supportedLngs.find(i=>{if(i===r)return i;if(!(i.indexOf("-")<0&&r.indexOf("-")<0)&&(i.indexOf("-")>0&&r.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===r||i.indexOf(r)===0&&r.length>1))return i})}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if(typeof t=="function"&&(t=t(e)),w(t)&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}toResolveHierarchy(t,e){const n=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],i=a=>{a&&(this.isSupportedCode(a)?r.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return w(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):w(t)&&i(this.formatLanguageCode(t)),n.forEach(a=>{r.indexOf(a)<0&&i(this.formatLanguageCode(a))}),r}}let xr=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],wr={1:s=>+(s>1),2:s=>+(s!=1),3:s=>0,4:s=>s%10==1&&s%100!=11?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2,5:s=>s==0?0:s==1?1:s==2?2:s%100>=3&&s%100<=10?3:s%100>=11?4:5,6:s=>s==1?0:s>=2&&s<=4?1:2,7:s=>s==1?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2,8:s=>s==1?0:s==2?1:s!=8&&s!=11?2:3,9:s=>+(s>=2),10:s=>s==1?0:s==2?1:s<7?2:s<11?3:4,11:s=>s==1||s==11?0:s==2||s==12?1:s>2&&s<20?2:3,12:s=>+(s%10!=1||s%100==11),13:s=>+(s!==0),14:s=>s==1?0:s==2?1:s==3?2:3,15:s=>s%10==1&&s%100!=11?0:s%10>=2&&(s%100<10||s%100>=20)?1:2,16:s=>s%10==1&&s%100!=11?0:s!==0?1:2,17:s=>s==1||s%10==1&&s%100!=11?0:1,18:s=>s==0?0:s==1?1:2,19:s=>s==1?0:s==0||s%100>1&&s%100<11?1:s%100>10&&s%100<20?2:3,20:s=>s==1?0:s==0||s%100>0&&s%100<20?1:2,21:s=>s%100==1?1:s%100==2?2:s%100==3||s%100==4?3:0,22:s=>s==1?0:s==2?1:(s<0||s>10)&&s%10==0?2:3};const vr=["v1","v2","v3"],Sr=["v4"],Ct={zero:0,one:1,two:2,few:3,many:4,other:5},Cr=()=>{const s={};return xr.forEach(t=>{t.lngs.forEach(e=>{s[e]={numbers:t.nr,plurals:wr[t.fc]}})}),s};class Nr{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=e,this.logger=W.create("pluralResolver"),(!this.options.compatibilityJSON||Sr.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Cr(),this.pluralRulesCache={}}addRule(t,e){this.rules[t]=e}clearCache(){this.pluralRulesCache={}}getRule(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const n=Ie(t==="dev"?"en":t),r=e.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(n,{type:r})}catch{if(!t.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(t);a=this.getRule(l,e)}return this.pluralRulesCache[i]=a,a}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(t,e);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,n).map(r=>`${e}${r}`)}getSuffixes(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(t,e);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((r,i)=>Ct[r]-Ct[i]).map(r=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${r}`):n.numbers.map(r=>this.getSuffix(t,r,e)):[]}getSuffix(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(t,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(e)}`:this.getSuffixRetroCompatible(r,e):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,e){const n=t.noAbs?t.plurals(e):t.plurals(Math.abs(e));let r=t.numbers[n];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?`_plural_${r.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!vr.includes(this.options.compatibilityJSON)}}const Nt=function(s,t,e){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=dr(s,t,e);return!i&&r&&w(e)&&(i=et(s,e,n),i===void 0&&(i=et(t,e,n))),i},He=s=>s.replace(/\$/g,"$$$$");class kr{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=W.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(e=>e),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:p,nestingPrefix:d,nestingPrefixEscaped:f,nestingSuffix:y,nestingSuffixEscaped:m,nestingOptionsSeparator:g,maxReplaces:x,alwaysFormat:b}=t.interpolation;this.escape=e!==void 0?e:pr,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=i?ue(i):a||"{{",this.suffix=o?ue(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?ue(d):f||ue("$t("),this.nestingSuffix=y?ue(y):m||ue(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=x||1e3,this.alwaysFormat=b!==void 0?b:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(e,n)=>e&&e.source===n?(e.lastIndex=0,e):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,e,n,r){let i,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=f=>{if(f.indexOf(this.formatSeparator)<0){const x=Nt(e,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(x,void 0,n,{...r,...e,interpolationkey:f}):x}const y=f.split(this.formatSeparator),m=y.shift().trim(),g=y.join(this.formatSeparator).trim();return this.format(Nt(e,l,m,this.options.keySeparator,this.options.ignoreJSONStructure),g,n,{...r,...e,interpolationkey:m})};this.resetRegExp();const c=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>He(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?He(this.escape(f)):He(f)}].forEach(f=>{for(o=0;i=f.regex.exec(t);){const y=i[1].trim();if(a=u(y),a===void 0)if(typeof c=="function"){const g=c(t,i,r);a=w(g)?g:""}else if(r&&Object.prototype.hasOwnProperty.call(r,y))a="";else if(p){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${t}`),a="";else!w(a)&&!this.useRawValueToEscape&&(a=mt(a));const m=f.safeValue(a);if(t=t.replace(i[0],m),p?(f.regex.lastIndex+=a.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,i,a;const o=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const p=l.split(new RegExp(`${c}[ ]*{`));let d=`{${p[1]}`;l=p[0],d=this.interpolate(d,a);const f=d.match(/'/g),y=d.match(/"/g);(f&&f.length%2===0&&!y||y.length%2!==0)&&(d=d.replace(/'/g,'"'));try{a=JSON.parse(d),u&&(a={...u,...a})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,m),`${l}${c}${d}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;r=this.nestingRegexp.exec(t);){let l=[];a={...n},a=a.replace&&!w(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const c=r[1].split(this.formatSeparator).map(p=>p.trim());r[1]=c.shift(),l=c,u=!0}if(i=e(o.call(this,r[1].trim(),a),a),i&&r[0]===t&&!w(i))return i;w(i)||(i=mt(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${t}`),i=""),u&&(i=l.reduce((c,p)=>this.format(c,p,n.lng,{...n,interpolationkey:r[1].trim()}),i.trim())),t=t.replace(r[0],i),this.regexp.lastIndex=0}return t}}const Er=s=>{let t=s.toLowerCase().trim();const e={};if(s.indexOf("(")>-1){const n=s.split("(");t=n[0].toLowerCase().trim();const r=n[1].substring(0,n[1].length-1);t==="currency"&&r.indexOf(":")<0?e.currency||(e.currency=r.trim()):t==="relativetime"&&r.indexOf(":")<0?e.range||(e.range=r.trim()):r.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=o.trim();e[c]||(e[c]=u),u==="false"&&(e[c]=!1),u==="true"&&(e[c]=!0),isNaN(u)||(e[c]=parseInt(u,10))}})}return{formatName:t,formatOptions:e}},de=s=>{const t={};return(e,n,r)=>{let i=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(i={...i,[r.interpolationkey]:void 0});const a=n+JSON.stringify(i);let o=t[a];return o||(o=s(Ie(n),r),t[a]=o),o(e)}};class Or{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=W.create("formatter"),this.options=t,this.formats={number:de((e,n)=>{const r=new Intl.NumberFormat(e,{...n});return i=>r.format(i)}),currency:de((e,n)=>{const r=new Intl.NumberFormat(e,{...n,style:"currency"});return i=>r.format(i)}),datetime:de((e,n)=>{const r=new Intl.DateTimeFormat(e,{...n});return i=>r.format(i)}),relativetime:de((e,n)=>{const r=new Intl.RelativeTimeFormat(e,{...n});return i=>r.format(i,n.range||"day")}),list:de((e,n)=>{const r=new Intl.ListFormat(e,{...n});return i=>r.format(i)})},this.init(t)}init(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=e.interpolation.formatSeparator||","}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=de(e)}format(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=e.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,l)=>{const{formatName:u,formatOptions:c}=Er(l);if(this.formats[u]){let p=o;try{const d=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},f=d.locale||d.lng||r.locale||r.lng||n;p=this.formats[u](o,f,{...c,...r,...d})}catch(d){this.logger.warn(d)}return p}else this.logger.warn(`there was no format function for ${u}`);return o},t)}}const jr=(s,t)=>{s.pending[t]!==void 0&&(delete s.pending[t],s.pendingCount--)};class Lr extends Me{constructor(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=e,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=W.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(t,e,n,r){const i={},a={},o={},l={};return t.forEach(u=>{let c=!0;e.forEach(p=>{const d=`${u}|${p}`;!n.reload&&this.store.hasResourceBundle(u,p)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?a[d]===void 0&&(a[d]=!0):(this.state[d]=1,c=!1,a[d]===void 0&&(a[d]=!0),i[d]===void 0&&(i[d]=!0),l[p]===void 0&&(l[p]=!0)))}),c||(o[u]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(t,e,n){const r=t.split("|"),i=r[0],a=r[1];e&&this.emit("failedLoading",i,a,e),!e&&n&&this.store.addResourceBundle(i,a,n,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2,e&&n&&(this.state[t]=0);const o={};this.queue.forEach(l=>{ur(l.loaded,[i],a),jr(l,t),e&&l.errors.push(e),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const c=l.loaded[u];c.length&&c.forEach(p=>{o[u][p]===void 0&&(o[u][p]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!t.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:e,fcName:n,tried:r,wait:i,callback:a});return}this.readingCalls++;const o=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(u&&c&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,t,e,n,r+1,i*2,a)},i);return}a(u,c)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const u=l(t,e);u&&typeof u.then=="function"?u.then(c=>o(null,c)).catch(o):o(null,u)}catch(u){o(u)}return}return l(t,e,o)}prepareLoading(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();w(t)&&(t=this.languageUtils.toResolveHierarchy(t)),w(e)&&(e=[e]);const i=this.queueLoad(t,e,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(t,e,n){this.prepareLoading(t,e,{},n)}reload(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}loadOne(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=t.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${e}loading namespace ${i} for language ${r} failed`,a),!a&&o&&this.logger.log(`${e}loaded namespace ${i} for language ${r}`,o),this.loaded(t,a,o)})}saveMissing(t,e,n,r,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)){this.logger.warn(`did not save key "${n}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(t,e,n,r,l):c=u(t,e,n,r),c&&typeof c.then=="function"?c.then(p=>o(null,p)).catch(o):o(null,c)}catch(c){o(c)}else u(t,e,n,r,o,l)}!t||!t[0]||this.store.addResource(t[0],e,n,r)}}}const kt=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:s=>{let t={};if(typeof s[1]=="object"&&(t=s[1]),w(s[1])&&(t.defaultValue=s[1]),w(s[2])&&(t.tDescription=s[2]),typeof s[2]=="object"||typeof s[3]=="object"){const e=s[3]||s[2];Object.keys(e).forEach(n=>{t[n]=e[n]})}return t},interpolation:{escapeValue:!0,format:s=>s,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Et=s=>(w(s.ns)&&(s.ns=[s.ns]),w(s.fallbackLng)&&(s.fallbackLng=[s.fallbackLng]),w(s.fallbackNS)&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs&&s.supportedLngs.indexOf("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),s),Re=()=>{},Rr=s=>{Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(e=>{typeof s[e]=="function"&&(s[e]=s[e].bind(s))})};class ke extends Me{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Et(t),this.services={},this.logger=W,this.modules={external:[]},Rr(this),e&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(){var t=this;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),!e.defaultNS&&e.defaultNS!==!1&&e.ns&&(w(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=kt();this.options={...r,...this.options,...Et(e)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?W.init(i(this.modules.logger),this.options):W.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=Or);const p=new St(this.options);this.store=new wt(this.options.resources,this.options);const d=this.services;d.logger=W,d.resourceStore=this.store,d.languageUtils=p,d.pluralResolver=new Nr(p,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(d.formatter=i(c),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new kr(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new Lr(i(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(f){for(var y=arguments.length,m=new Array(y>1?y-1:0),g=1;g<y;g++)m[g-1]=arguments[g];t.emit(f,...m)}),this.modules.languageDetector&&(d.languageDetector=i(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=i(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Ae(this.services,this.options),this.translator.on("*",function(f){for(var y=arguments.length,m=new Array(y>1?y-1:0),g=1;g<y;g++)m[g-1]=arguments[g];t.emit(f,...m)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Re),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return t.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return t.store[c](...arguments),t}});const l=Se(),u=()=>{const c=(p,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),n(p,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Re;const r=w(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const i=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(u=>{u!=="cimode"&&i.indexOf(u)<0&&i.push(u)})};r?a(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(i,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(t,e,n){const r=Se();return typeof t=="function"&&(n=t,t=void 0),typeof e=="function"&&(n=e,e=void 0),t||(t=this.languages),e||(e=this.options.ns),n||(n=Re),this.services.backendConnector.reload(t,e,i=>{r.resolve(),n(i)}),r}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Vt.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let e=0;e<this.languages.length;e++){const n=this.languages[e];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(t,e){var n=this;this.isLanguageChangingTo=t;const r=Se();this.emit("languageChanging",t);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve(function(){return n.t(...arguments)}),e&&e(l,function(){return n.t(...arguments)})},o=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=w(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{a(c,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),r}getFixedT(t,e,n){var r=this;const i=function(a,o){let l;if(typeof o!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),p=2;p<u;p++)c[p-2]=arguments[p];l=r.options.overloadTranslationOptionHandler([a,o].concat(c))}else l={...o};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||i.keyPrefix);const d=r.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(a)?f=a.map(y=>`${l.keyPrefix}${d}${y}`):f=l.keyPrefix?`${l.keyPrefix}${d}${a}`:a,r.t(f,l)};return w(t)?i.lng=t:i.lngs=t,i.ns=e,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=e.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(e.precheck){const o=e.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,t)&&(!r||a(i,t)))}loadNamespaces(t,e){const n=Se();return this.options.ns?(w(t)&&(t=[t]),t.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{n.resolve(),e&&e(r)}),n):(e&&e(),Promise.resolve())}loadLanguages(t,e){const n=Se();w(t)&&(t=[t]);const r=this.options.preload||[],i=t.filter(a=>r.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return i.length?(this.options.preload=r.concat(i),this.loadResources(a=>{n.resolve(),e&&e(a)}),n):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new St(kt());return e.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new ke(t,e)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Re;const n=t.forkResourceStore;n&&delete t.forkResourceStore;const r={...this.options,...t,isClone:!0},i=new ke(r);return(t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new wt(this.store.data,r),i.services.resourceStore=i.store),i.translator=new Ae(i.services,r),i.translator.on("*",function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];i.emit(o,...u)}),i.init(r,e),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const I=ke.createInstance();I.createInstance=ke.createInstance;I.createInstance;I.dir;I.init;I.loadResources;I.reloadResources;I.use;I.changeLanguage;I.getFixedT;I.t;I.exists;I.setDefaultNamespace;I.hasLoadedNamespace;I.loadNamespaces;I.loadLanguages;const Pr={en:{translation:{nav:{planner:"Trip Planner",about:"About",help:"Help",settings:"Settings"},map:{title:"European Camper Trip Planner",addWaypoint:"Click map to add waypoint",removeWaypoint:"Remove waypoint",clearRoute:"Clear route",optimizeRoute:"Optimize route"},vehicle:{title:"Vehicle Profile",height:"Height (m)",width:"Width (m)",weight:"Weight (t)",length:"Length (m)",save:"Save Profile",clear:"Clear Profile"},route:{title:"Route Planning",distance:"Total Distance",duration:"Estimated Time",waypoints:"Waypoints",export:"Export Route",save:"Save Trip"},campsites:{title:"Campsites",campsite:"Campsite",aire:"Aire",parking:"Parking",filter:"Filter",showAll:"Show All"},actions:{save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",loading:"Loading...",error:"Error",success:"Success"},errors:{routeCalculation:"Failed to calculate route",vehicleValidation:"Invalid vehicle dimensions",networkError:"Network connection error",apiKeyMissing:"API key not configured"},success:{tripSaved:"Trip saved successfully",routeOptimized:"Route optimized",profileSaved:"Vehicle profile saved"}}}};I.use(pn).init({resources:Pr,lng:"en",fallbackLng:"en",supportedLngs:["en"],interpolation:{escapeValue:!1},defaultNS:"translation",debug:!1,react:{useSuspense:!1},saveMissing:!1,missingKeyHandler:(s,t,e)=>{}});const Tr=z.lazy(()=>F(()=>import("./PlannerPage-xnW7JCKT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),Ir=z.lazy(()=>F(()=>import("./AboutPage-_CD-dQq4.js"),__vite__mapDeps([18,1,15,10,19,11,7,16]))),_r=z.lazy(()=>F(()=>import("./HelpPage-B3RpodEY.js"),__vite__mapDeps([20,1,15,12,16]))),Ar=z.lazy(()=>F(()=>import("./SettingsPage-Dbl6qzmE.js"),__vite__mapDeps([21,1,22,10,5,19,16]))),$r=z.lazy(()=>F(()=>import("./NotFoundPage-BFCFE1Q8.js"),__vite__mapDeps([23,1,16]))),Mr=z.lazy(()=>F(()=>import("./SupportPage-CM6ymmHV.js"),__vite__mapDeps([24,1,14,6,11,19,16]))),Dr=z.lazy(()=>F(()=>import("./PrivacyPolicyPage-NQ2KZ-KZ.js"),__vite__mapDeps([25,1,14,19,16]))),zr=z.lazy(()=>F(()=>import("./TermsPage-CwckRtkl.js"),__vite__mapDeps([26,1,14,4,16]))),Fr=z.lazy(()=>F(()=>import("./AffiliateDisclosurePage-Cq_jEVyI.js"),__vite__mapDeps([27,1,14,16]))),Vr=z.lazy(()=>F(()=>import("./FeedbackPage-BnUzoGY9.js"),__vite__mapDeps([28,1,14,13,8,15,16]))),Br=z.lazy(()=>F(()=>import("./BlogListPage-Chw422id.js"),__vite__mapDeps([29,1,30,9,16]))),Ur=z.lazy(()=>F(()=>import("./BlogPostPage-CygZpQUk.js"),__vite__mapDeps([31,1,30,9,15,3,13,22,16]))),Kr=()=>{const s=Ot(),{isLoading:t,error:e,sidebarOpen:n}=Y(),{showOnboarding:r,completeOnboarding:i,skipOnboarding:a}=Js(),o=s.pathname!=="/";return h.jsx(Bs,{children:h.jsxs("div",{className:o?"min-h-screen flex flex-col bg-neutral-50":"h-screen flex flex-col bg-neutral-50",children:[r&&s.pathname==="/"&&h.jsx(or,{onComplete:i,onSkip:a}),h.jsx(zs,{}),t&&h.jsx("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 z-50",children:h.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-3 flex items-center space-x-2",children:[h.jsx(ft,{size:"sm"}),h.jsx("span",{className:"text-sm text-neutral-600",children:"Loading..."})]})}),e&&h.jsx("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),h.jsx("div",{className:"ml-3",children:h.jsx("p",{className:"text-sm text-red-800",children:e})}),h.jsx("div",{className:"ml-auto pl-3",children:h.jsxs("button",{className:"text-red-400 hover:text-red-600",onClick:()=>Y.getState().setError(null),children:[h.jsx("span",{className:"sr-only",children:"Dismiss"}),h.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})}),h.jsx(Us,{sidebar:void 0,sidebarOpen:n,children:h.jsx(N.Suspense,{fallback:h.jsx("div",{className:"h-full flex items-center justify-center",children:h.jsx(ft,{size:"lg"})}),children:h.jsx(Gt,{})})}),o&&h.jsx(Vs,{})]})})},Wr=Ht([{path:"/",element:h.jsx(Kr,{}),children:[{index:!0,element:h.jsx(Tr,{})},{path:"about",element:h.jsx(Ir,{})},{path:"help",element:h.jsx(_r,{})},{path:"settings",element:h.jsx(Ar,{})},{path:"support",element:h.jsx(Mr,{})},{path:"privacy",element:h.jsx(Dr,{})},{path:"terms",element:h.jsx(zr,{})},{path:"affiliate-disclosure",element:h.jsx(Fr,{})},{path:"feedback",element:h.jsx(Vr,{})},{path:"guides",element:h.jsx(Br,{})},{path:"guides/:slug",element:h.jsx(Ur,{})},{path:"*",element:h.jsx($r,{})}]}],{basename:"/"});function Hr(){return h.jsx(qt,{router:Wr})}Zt.createRoot(document.getElementById("root")).render(h.jsx(N.StrictMode,{children:h.jsx(Hr,{})}));export{Nn as A,jn as B,Pt as C,ut as E,Yn as F,_n as H,$n as M,Fn as N,dt as R,Un as S,qn as T,Jn as X,Qr as a,P as b,A as c,Ze as d,Gs as e,Y as f,K as g,Ds as h,V as i,h as j,Xr as k,Wn as l,ei as m,ti as n,Rn as o,Js as p,En as q,Yr as r,Dn as s,Zr as t,Le as u,yn as v};
