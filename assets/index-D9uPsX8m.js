const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlannerPage-z3vCfJZY.js","assets/react-vendor-DB9SfNWA.js","assets/map-vendor-D1_z6wB-.js","assets/state-vendor--7Lts539.js","assets/PlannerPage-CkBHbQju.css","assets/AboutPage-BBvlZos6.js","assets/HelpPage-hKhpxfnC.js","assets/SettingsPage-DxkVwkie.js","assets/NotFoundPage-BRRXHUcj.js"])))=>i.map(i=>d[i]);
var kt=Object.defineProperty;var Rt=(n,e,t)=>e in n?kt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var T=(n,e,t)=>Rt(n,typeof e!="symbol"?e+"":e,t);import{r as Lt,c as Ot,a as j,u as pt,L as Ce,R as ue,d as Et,e as Pt,O as It}from"./react-vendor-DB9SfNWA.js";import{c as te}from"./state-vendor--7Lts539.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var ke={exports:{}},re={};var Ue;function Tt(){if(Ue)return re;Ue=1;var n=Lt(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,d){var u,p={},h=null,f=null;d!==void 0&&(h=""+d),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(f=l.ref);for(u in l)s.call(l,u)&&!i.hasOwnProperty(u)&&(p[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)p[u]===void 0&&(p[u]=l[u]);return{$$typeof:e,type:a,key:h,ref:f,props:p,_owner:r.current}}return re.Fragment=t,re.jsx=o,re.jsxs=o,re}var Ke;function At(){return Ke||(Ke=1,ke.exports=Tt()),ke.exports}var c=At(),ge={},He;function $t(){if(He)return ge;He=1;var n=Ot();return ge.createRoot=n.createRoot,ge.hydrateRoot=n.hydrateRoot,ge}var Mt=$t();const zt="modulepreload",Ft=function(n){return"/camper-planner/"+n},We={},he=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let l=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");r=l(t.map(d=>{if(d=Ft(d),d in We)return;We[d]=!0;const u=d.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":zt,u||(h.as="script"),h.crossOrigin="",h.href=d,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,x)=>{h.addEventListener("load",f),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function Dt(){if(console&&console.warn){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Be={};function Ie(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&Be[e[0]]||(typeof e[0]=="string"&&(Be[e[0]]=new Date),Dt(...e))}const ft=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}};function Je(n,e,t){n.loadNamespaces(e,ft(n,t))}function Ge(n,e,t,s){typeof t=="string"&&(t=[t]),t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,ft(n,s))}function _t(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.languages[0],r=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const d=e.services.backendConnector.state[`${a}|${l}`];return d===-1||d===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(s,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(s,n)&&(!r||o(i,n)))}function Vt(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Ie("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}):_t(n,e,t)}const Ut=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Kt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"Â©","&#169;":"Â©","&reg;":"Â®","&#174;":"Â®","&hellip;":"â€¦","&#8230;":"â€¦","&#x2F;":"/","&#47;":"/"},Ht=n=>Kt[n],Wt=n=>n.replace(Ut,Ht);let Te={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Wt};function Bt(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Te={...Te,...n}}function Jt(){return Te}let gt;function Gt(n){gt=n}function qt(){return gt}const Yt={type:"3rdParty",init(n){Bt(n.options.react),Gt(n)}},Qt=j.createContext();class Zt{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Xt=(n,e)=>{const t=j.useRef();return j.useEffect(()=>{t.current=n},[n,e]),t.current};function mt(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:s,defaultNS:r}=j.useContext(Qt)||{},i=t||s||qt();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new Zt),!i){Ie("You will need to pass in an i18next instance by using initReactI18next");const v=(C,k)=>typeof k=="string"?k:k&&typeof k=="object"&&typeof k.defaultValue=="string"?k.defaultValue:Array.isArray(C)?C[C.length-1]:C,S=[v,{},!1];return S.t=v,S.i18n={},S.ready=!1,S}i.options.react&&i.options.react.wait!==void 0&&Ie("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Jt(),...i.options.react,...e},{useSuspense:a,keyPrefix:l}=o;let d=r||i.options&&i.options.defaultNS;d=typeof d=="string"?[d]:d||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(d);const u=(i.isInitialized||i.initializedStoreOnce)&&d.every(v=>Vt(v,i,o));function p(){return i.getFixedT(e.lng||null,o.nsMode==="fallback"?d:d[0],l)}const[h,f]=j.useState(p);let x=d.join();e.lng&&(x=`${e.lng}${x}`);const g=Xt(x),m=j.useRef(!0);j.useEffect(()=>{const{bindI18n:v,bindI18nStore:S}=o;m.current=!0,!u&&!a&&(e.lng?Ge(i,e.lng,d,()=>{m.current&&f(p)}):Je(i,d,()=>{m.current&&f(p)})),u&&g&&g!==x&&m.current&&f(p);function C(){m.current&&f(p)}return v&&i&&i.on(v,C),S&&i&&i.store.on(S,C),()=>{m.current=!1,v&&i&&v.split(" ").forEach(k=>i.off(k,C)),S&&i&&S.split(" ").forEach(k=>i.store.off(k,C))}},[i,x]);const y=j.useRef(!0);j.useEffect(()=>{m.current&&!y.current&&f(p),y.current=!1},[i,l]);const b=[h,i,u];if(b.t=h,b.i18n=i,b.ready=u,u||!u&&!a)return b;throw new Promise(v=>{e.lng?Ge(i,e.lng,d,()=>v()):Je(i,d,()=>v())})}const qe={routing:{endpoints:{openrouteservice:"https://api.openrouteservice.org/v2",osrm:"https://router.project-osrm.org"}},campsites:{sources:{overpass:"https://overpass-api.de/api/interpreter"}}};function bt(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=bt(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function es(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=bt(n))&&(s&&(s+=" "),s+=e);return s}const _e="-",ts=n=>{const e=ns(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:o=>{const a=o.split(_e);return a[0]===""&&a.length!==1&&a.shift(),xt(a,e)||ss(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&s[o]?[...l,...s[o]]:l}}},xt=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),r=s?xt(n.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const i=n.join(_e);return e.validators.find(({validator:o})=>o(i))?.classGroupId},Ye=/^\[(.+)\]$/,ss=n=>{if(Ye.test(n)){const e=Ye.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},ns=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return is(Object.entries(n.classGroups),t).forEach(([i,o])=>{Ae(o,s,i,e)}),s},Ae=(n,e,t,s)=>{n.forEach(r=>{if(typeof r=="string"){const i=r===""?e:Qe(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(rs(r)){Ae(r(s),e,t,s);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([i,o])=>{Ae(o,Qe(e,i),t,s)})})},Qe=(n,e)=>{let t=n;return e.split(_e).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},rs=n=>n.isThemeGetter,is=(n,e)=>e?n.map(([t,s])=>{const r=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,r]}):n,os=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const r=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,s=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return r(i,o),o},set(i,o){t.has(i)?t.set(i,o):r(i,o)}}},yt="!",as=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,r=e[0],i=e.length,o=a=>{const l=[];let d=0,u=0,p;for(let m=0;m<a.length;m++){let y=a[m];if(d===0){if(y===r&&(s||a.slice(m,m+i)===e)){l.push(a.slice(u,m)),u=m+i;continue}if(y==="/"){p=m;continue}}y==="["?d++:y==="]"&&d--}const h=l.length===0?a:a.substring(u),f=h.startsWith(yt),x=f?h.substring(1):h,g=p&&p>u?p-u:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:x,maybePostfixModifierPosition:g}};return t?a=>t({className:a,parseClassName:o}):o},ls=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},cs=n=>({cache:os(n.cacheSize),parseClassName:as(n),...ts(n)}),ds=/\s+/,us=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:r}=e,i=[],o=n.trim().split(ds);let a="";for(let l=o.length-1;l>=0;l-=1){const d=o[l],{modifiers:u,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:f}=t(d);let x=!!f,g=s(x?h.substring(0,f):h);if(!g){if(!x){a=d+(a.length>0?" "+a:a);continue}if(g=s(h),!g){a=d+(a.length>0?" "+a:a);continue}x=!1}const m=ls(u).join(":"),y=p?m+yt:m,b=y+g;if(i.includes(b))continue;i.push(b);const v=r(g,x);for(let S=0;S<v.length;++S){const C=v[S];i.push(y+C)}a=d+(a.length>0?" "+a:a)}return a};function hs(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=vt(e))&&(s&&(s+=" "),s+=t);return s}const vt=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=vt(n[s]))&&(t&&(t+=" "),t+=e);return t};function ps(n,...e){let t,s,r,i=o;function o(l){const d=e.reduce((u,p)=>p(u),n());return t=cs(d),s=t.cache.get,r=t.cache.set,i=a,a(l)}function a(l){const d=s(l);if(d)return d;const u=us(l,t);return r(l,u),u}return function(){return i(hs.apply(null,arguments))}}const L=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},wt=/^\[(?:([a-z-]+):)?(.+)\]$/i,fs=/^\d+\/\d+$/,gs=new Set(["px","full","screen"]),ms=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,bs=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xs=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ys=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vs=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,U=n=>ee(n)||gs.has(n)||fs.test(n),W=n=>se(n,"length",Ls),ee=n=>!!n&&!Number.isNaN(Number(n)),Re=n=>se(n,"number",ee),ie=n=>!!n&&Number.isInteger(Number(n)),ws=n=>n.endsWith("%")&&ee(n.slice(0,-1)),N=n=>wt.test(n),B=n=>ms.test(n),Ss=new Set(["length","size","percentage"]),Ns=n=>se(n,Ss,St),js=n=>se(n,"position",St),Cs=new Set(["image","url"]),ks=n=>se(n,Cs,Es),Rs=n=>se(n,"",Os),oe=()=>!0,se=(n,e,t)=>{const s=wt.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},Ls=n=>bs.test(n)&&!xs.test(n),St=()=>!1,Os=n=>ys.test(n),Es=n=>vs.test(n),Ps=()=>{const n=L("colors"),e=L("spacing"),t=L("blur"),s=L("brightness"),r=L("borderColor"),i=L("borderRadius"),o=L("borderSpacing"),a=L("borderWidth"),l=L("contrast"),d=L("grayscale"),u=L("hueRotate"),p=L("invert"),h=L("gap"),f=L("gradientColorStops"),x=L("gradientColorStopPositions"),g=L("inset"),m=L("margin"),y=L("opacity"),b=L("padding"),v=L("saturate"),S=L("scale"),C=L("sepia"),k=L("skew"),E=L("space"),$=L("translate"),J=()=>["auto","contain","none"],q=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto",N,e],R=()=>[N,e],fe=()=>["",U,W],F=()=>["auto",ee,N],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],A=()=>["","0",N],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[ee,N];return{cacheSize:500,separator:":",theme:{colors:[oe],spacing:[U,W],blur:["none","",B,N],brightness:M(),borderColor:[n],borderRadius:["none","","full",B,N],borderSpacing:R(),borderWidth:fe(),contrast:M(),grayscale:A(),hueRotate:M(),invert:A(),gap:R(),gradientColorStops:[n],gradientColorStopPositions:[ws,W],inset:_(),margin:_(),opacity:M(),padding:R(),saturate:M(),scale:M(),sepia:A(),skew:M(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",N]}],container:["container"],columns:[{columns:[B]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),N]}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:J()}],"overscroll-x":[{"overscroll-x":J()}],"overscroll-y":[{"overscroll-y":J()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ie,N]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",N]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",ie,N]}],"grid-cols":[{"grid-cols":[oe]}],"col-start-end":[{col:["auto",{span:["full",ie,N]},N]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[oe]}],"row-start-end":[{row:["auto",{span:[ie,N]},N]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",N]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",N]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",N,e]}],"min-w":[{"min-w":[N,e,"min","max","fit"]}],"max-w":[{"max-w":[N,e,"none","full","min","max","fit","prose",{screen:[B]},B]}],h:[{h:[N,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[N,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[N,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[N,e,"auto","min","max","fit"]}],"font-size":[{text:["base",B,W]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Re]}],"font-family":[{font:[oe]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",N]}],"line-clamp":[{"line-clamp":["none",ee,Re]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",U,N]}],"list-image":[{"list-image":["none",N]}],"list-style-type":[{list:["none","disc","decimal",N]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",U,W]}],"underline-offset":[{"underline-offset":["auto",U,N]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",N]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",N]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),js]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ns]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ks]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:V()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[U,N]}],"outline-w":[{outline:[U,W]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[U,W]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",B,Rs]}],"shadow-color":[{shadow:[oe]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",B,N]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[p]}],saturate:[{saturate:[v]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",N]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",N]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",N]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[ie,N]}],"translate-x":[{"translate-x":[$]}],"translate-y":[{"translate-y":[$]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",N]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",N]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",N]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[U,W,Re]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Is=ps(Ps);function O(...n){return Is(es(n))}const xe={BASE_URL:"/camper-planner/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ACSI_AFFILIATE_CODE:"your_acsi_affiliate_code",VITE_API_TIMEOUT:"10000",VITE_APP_ENV:"development",VITE_BOOKING_AFFILIATE_ID:"your_booking_affiliate_id",VITE_ORS_API_KEY:"5b3ce3597851110001cf6248a96ac2c424b94ce6b8b4be2a3074bdf3",VITE_PITCHUP_AFFILIATE_ID:"your_pitchup_affiliate_id"},$e=new Map,me=n=>{const e=$e.get(n);return e?Object.fromEntries(Object.entries(e.stores).map(([t,s])=>[t,s.getState()])):{}},Ts=(n,e,t)=>{if(n===void 0)return{type:"untracked",connection:e.connect(t)};const s=$e.get(t.name);if(s)return{type:"tracked",store:n,...s};const r={connection:e.connect(t),stores:{}};return $e.set(t.name,r),{type:"tracked",store:n,...r}},As=(n,e={})=>(t,s,r)=>{const{enabled:i,anonymousActionType:o,store:a,...l}=e;let d;try{d=(i??(xe?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return(xe?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),n(t,s,r);const{connection:u,...p}=Ts(a,d,l);let h=!0;r.setState=(g,m,y)=>{const b=t(g,m);if(!h)return b;const v=y===void 0?{type:o||"anonymous"}:typeof y=="string"?{type:y}:y;return a===void 0?(u?.send(v,s()),b):(u?.send({...v,type:`${a}/${v.type}`},{...me(l.name),[a]:r.getState()}),b)};const f=(...g)=>{const m=h;h=!1,t(...g),h=m},x=n(r.setState,s,r);if(p.type==="untracked"?u?.init(x):(p.stores[p.store]=r,u?.init(Object.fromEntries(Object.entries(p.stores).map(([g,m])=>[g,g===p.store?x:m.getState()])))),r.dispatchFromDevtools&&typeof r.dispatch=="function"){let g=!1;const m=r.dispatch;r.dispatch=(...y)=>{(xe?"production":void 0)!=="production"&&y[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),m(...y)}}return u.subscribe(g=>{var m;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Le(g.payload,y=>{if(y.type==="__setState"){if(a===void 0){f(y.state);return}Object.keys(y.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const b=y.state[a];if(b==null)return;JSON.stringify(r.getState())!==JSON.stringify(b)&&f(b);return}r.dispatchFromDevtools&&typeof r.dispatch=="function"&&r.dispatch(y)});case"DISPATCH":switch(g.payload.type){case"RESET":return f(x),a===void 0?u?.init(r.getState()):u?.init(me(l.name));case"COMMIT":if(a===void 0){u?.init(r.getState());return}return u?.init(me(l.name));case"ROLLBACK":return Le(g.state,y=>{if(a===void 0){f(y),u?.init(r.getState());return}f(y[a]),u?.init(me(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Le(g.state,y=>{if(a===void 0){f(y);return}JSON.stringify(r.getState())!==JSON.stringify(y[a])&&f(y[a])});case"IMPORT_STATE":{const{nextLiftedState:y}=g.payload,b=(m=y.computedStates.slice(-1)[0])==null?void 0:m.state;if(!b)return;f(a===void 0?b:b[a]),u?.send(null,y);return}case"PAUSE_RECORDING":return h=!h}return}}),x},pe=As,Le=(n,e)=>{let t;try{t=JSON.parse(n)}catch(s){console.error("[zustand devtools middleware] Could not parse the received json",s)}t!==void 0&&e(t)};function $s(n,e){let t;try{t=n()}catch{return}return{getItem:r=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=t.getItem(r))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(r,i)=>t.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>t.removeItem(r)}}const ce=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return ce(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return ce(s)(t)}}}},Ms=(n,e)=>(t,s,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,y)=>({...y,...m}),...e},o=!1;const a=new Set,l=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return n((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...m)},s,r);const u=ce(i.serialize),p=()=>{const m=i.partialize({...s()});let y;const b=u({state:m,version:i.version}).then(v=>d.setItem(i.name,v)).catch(v=>{y=v});if(y)throw y;return b},h=r.setState;r.setState=(m,y)=>{h(m,y),p()};const f=n((...m)=>{t(...m),p()},s,r);let x;const g=()=>{var m;if(!d)return;o=!1,a.forEach(b=>b(s()));const y=((m=i.onRehydrateStorage)==null?void 0:m.call(i,s()))||void 0;return ce(d.getItem.bind(d))(i.name).then(b=>{if(b)return i.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return i.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var v;return x=i.merge(b,(v=s())!=null?v:f),t(x,!0),p()}).then(()=>{y?.(x,void 0),o=!0,l.forEach(b=>b(x))}).catch(b=>{y?.(void 0,b)})};return r.persist={setOptions:m=>{i={...i,...m},m.getStorage&&(d=m.getStorage())},clearStorage:()=>{d?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},g(),x||f},zs=(n,e)=>(t,s,r)=>{let i={storage:$s(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,l=new Set;let d=i.storage;if(!d)return n((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...g)},s,r);const u=()=>{const g=i.partialize({...s()});return d.setItem(i.name,{state:g,version:i.version})},p=r.setState;r.setState=(g,m)=>{p(g,m),u()};const h=n((...g)=>{t(...g),u()},s,r);r.getInitialState=()=>h;let f;const x=()=>{var g,m;if(!d)return;o=!1,a.forEach(b=>{var v;return b((v=s())!=null?v:h)});const y=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(g=s())!=null?g:h))||void 0;return ce(d.getItem.bind(d))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[S,C]=b;if(f=i.merge(C,(v=s())!=null?v:h),t(f,!0),S)return u()}).then(()=>{y?.(f,void 0),f=s(),o=!0,l.forEach(b=>b(f))}).catch(b=>{y?.(void 0,b)})};return r.persist={setOptions:g=>{i={...i,...g},g.storage&&(d=g.storage)},clearStorage:()=>{d?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},i.skipHydration||x(),f||h},Fs=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((xe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Ms(n,e)):zs(n,e),Ne=Fs,Un=te()(pe(n=>({center:[54.526,15.2551],zoom:5,selectedWaypoint:null,setCenter:e=>n({center:e}),setZoom:e=>n({zoom:e}),setSelectedWaypoint:e=>n({selectedWaypoint:e})}),{name:"map-store"})),Ds=te()(Ne(pe(n=>({profile:null,setProfile:e=>n({profile:e}),clearProfile:()=>n({profile:null})}),{name:"vehicle-store"}),{name:"camper-planner-vehicle",partialize:n=>({profile:n.profile})})),Y=n=>n.map((e,t)=>{let s;return n.length===1||t===0?s="start":t===n.length-1?s="end":s="waypoint",{...e,type:s}}),Q=(n,e)=>{const t=[...n.history.slice(0,n.historyIndex+1),e].slice(-n.maxHistorySize);return{...n,history:t,historyIndex:t.length-1}},Ve=te()(Ne(pe((n,e)=>({waypoints:[],calculatedRoute:null,isOptimized:!1,totalDistance:0,estimatedTime:0,history:[],historyIndex:-1,maxHistorySize:50,addWaypoint:t=>n(s=>{const r=[...s.waypoints,t],i=Y(r),o={type:"add",timestamp:Date.now(),data:t,previousState:s.waypoints};return{...Q(s,o),waypoints:i,isOptimized:!1}}),removeWaypoint:t=>n(s=>{const r=s.waypoints.find(l=>l.id===t),i=s.waypoints.filter(l=>l.id!==t),o=Y(i),a={type:"remove",timestamp:Date.now(),data:{id:t,waypoint:r},previousState:s.waypoints};return{...Q(s,a),waypoints:o,isOptimized:!1}}),updateWaypoint:(t,s)=>n(r=>{const i=r.waypoints.find(l=>l.id===t),o=r.waypoints.map(l=>l.id===t?{...l,...s}:l),a={type:"update",timestamp:Date.now(),data:{id:t,updates:s,previousWaypoint:i},previousState:r.waypoints};return{...Q(r,a),waypoints:o}}),reorderWaypoints:t=>{const s=e(),r=Y(t),i={type:"reorder",timestamp:Date.now(),data:t,previousState:s.waypoints};n({...Q(s,i),waypoints:r,isOptimized:!0})},insertWaypoint:(t,s)=>n(r=>{const i=r.waypoints.findIndex(d=>d.id===s),o=[...r.waypoints.slice(0,i+1),t,...r.waypoints.slice(i+1)],a=Y(o),l={type:"add",timestamp:Date.now(),data:{waypoint:t,afterId:s},previousState:r.waypoints};return{...Q(r,l),waypoints:a,isOptimized:!1}}),clearRoute:()=>n(t=>{const s={type:"clear",timestamp:Date.now(),data:null,previousState:t.waypoints};return{...Q(t,s),waypoints:[],calculatedRoute:null,isOptimized:!1,totalDistance:0,estimatedTime:0}}),setCalculatedRoute:t=>n({calculatedRoute:t}),undo:()=>n(t=>{if(t.historyIndex<0)return t;const s=t.history[t.historyIndex];return{...t,waypoints:Y(s.previousState),historyIndex:t.historyIndex-1,isOptimized:!1}}),redo:()=>n(t=>{if(t.historyIndex>=t.history.length-1)return t;const s=t.historyIndex+1,r=t.history[s];let i=t.waypoints;switch(r.type){case"add":if(r.data.afterId){const o=t.waypoints.findIndex(a=>a.id===r.data.afterId);i=[...t.waypoints.slice(0,o+1),r.data.waypoint,...t.waypoints.slice(o+1)]}else i=[...t.waypoints,r.data];break;case"remove":i=t.waypoints.filter(o=>o.id!==r.data.id);break;case"update":i=t.waypoints.map(o=>o.id===r.data.id?{...o,...r.data.updates}:o);break;case"reorder":i=r.data;break;case"clear":i=[];break}return{...t,waypoints:Y(i),historyIndex:s,isOptimized:r.type==="reorder"}}),canUndo:()=>e().historyIndex>=0,canRedo:()=>{const t=e();return t.historyIndex<t.history.length-1},isValidForRouting:()=>e().waypoints.length>=2}),{name:"route-store"}),{name:"camper-planner-route",partialize:n=>({waypoints:n.waypoints,isOptimized:n.isOptimized,totalDistance:n.totalDistance,estimatedTime:n.estimatedTime})}));te()(Ne(pe((n,e)=>({currentTrip:null,savedTrips:[],setCurrentTrip:t=>n({currentTrip:t}),saveTrip:t=>n(s=>({savedTrips:[...s.savedTrips.filter(r=>r.id!==t.id),t]})),loadTrip:t=>{const s=e().savedTrips.find(r=>r.id===t);s&&n({currentTrip:s})},deleteTrip:t=>n(s=>({savedTrips:s.savedTrips.filter(r=>r.id!==t),currentTrip:s.currentTrip?.id===t?null:s.currentTrip}))}),{name:"trip-store"}),{name:"camper-planner-trips",partialize:n=>({savedTrips:n.savedTrips,currentTrip:n.currentTrip})}));const Me=te()(pe((n,e)=>({isLoading:!1,error:null,notifications:[],sidebarOpen:!0,setLoading:t=>n({isLoading:t}),setError:t=>n({error:t}),addNotification:t=>{const s=Math.random().toString(36).substr(2,9);n(r=>({notifications:[...r.notifications,{...t,id:s}]})),setTimeout(()=>{e().removeNotification(s)},5e3)},removeNotification:t=>n(s=>({notifications:s.notifications.filter(r=>r.id!==t)})),toggleSidebar:()=>n(t=>({sidebarOpen:!t.sidebarOpen}))}),{name:"ui-store"})),Ze=[{code:"en",name:"English",nativeName:"English",flag:"ðŸ‡ºðŸ‡¸"},{code:"de",name:"German",nativeName:"Deutsch",flag:"ðŸ‡©ðŸ‡ª"},{code:"fr",name:"French",nativeName:"FranÃ§ais",flag:"ðŸ‡«ðŸ‡·"},{code:"es",name:"Spanish",nativeName:"EspaÃ±ol",flag:"ðŸ‡ªðŸ‡¸"},{code:"it",name:"Italian",nativeName:"Italiano",flag:"ðŸ‡®ðŸ‡¹"},{code:"nl",name:"Dutch",nativeName:"Nederlands",flag:"ðŸ‡³ðŸ‡±"}],_s=({variant:n="dropdown",size:e="md",className:t})=>{const{i18n:s}=mt(),[r,i]=j.useState(!1),o=j.useRef(null),a=Ze.find(d=>d.code===s.language)||Ze[0];j.useEffect(()=>{const d=u=>{o.current&&!o.current.contains(u.target)&&i(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]);const l={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-2",lg:"text-base px-4 py-3"};return c.jsxs("button",{type:"button",className:O("flex items-center space-x-1 rounded-md font-medium transition-colors","text-gray-400 cursor-not-allowed",l[e],t),disabled:!0,title:"Language selection coming soon",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),c.jsx("span",{children:a.code.toUpperCase()})]})},Vs=()=>{const n=pt(),{t:e}=mt(),[t,s]=j.useState(!1),{toggleSidebar:r}=Me(),i=[{path:"/",label:e("nav.planner"),key:"planner"},{path:"/about",label:e("nav.about"),key:"about"},{path:"/help",label:e("nav.help"),key:"help"}],o=l=>l==="/"?n.pathname===l:n.pathname.startsWith(l),a=()=>{s(!t)};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"flex justify-between items-center h-16",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[n.pathname==="/"&&c.jsx("button",{onClick:r,className:"lg:hidden p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100","aria-label":"Toggle sidebar",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c.jsxs(Ce,{to:"/",className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m0 0L9 7",clipRule:"evenodd"})})}),c.jsxs("div",{className:"hidden sm:block",children:[c.jsx("h1",{className:"text-lg lg:text-xl font-bold text-gray-900",children:"European Camper Planner"}),c.jsx("p",{className:"text-xs text-gray-500 hidden lg:block",children:"Free trip planning for Europe"})]}),c.jsx("div",{className:"sm:hidden",children:c.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Camper Planner"})})]})]}),c.jsx("nav",{className:"hidden md:flex space-x-8",children:i.map(l=>c.jsx(Ce,{to:l.path,className:O("px-3 py-2 rounded-md text-sm font-medium transition-colors",o(l.path)?"text-blue-700 bg-blue-50 border-b-2 border-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:l.label},l.key))}),c.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-4",children:[c.jsx(_s,{variant:"button",size:"sm"}),c.jsx("button",{type:"button",onClick:a,className:"md:hidden p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100","aria-label":"Toggle menu",children:c.jsx("svg",{className:O("w-6 h-6 transition-transform",t&&"rotate-90"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),t&&c.jsx("div",{className:"md:hidden border-t border-gray-200 bg-white",children:c.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1",children:i.map(l=>c.jsx(Ce,{to:l.path,onClick:()=>s(!1),className:O("block px-3 py-2 rounded-md text-base font-medium transition-colors",o(l.path)?"text-blue-700 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:l.label},l.key))})})]})}),t&&c.jsx("div",{className:"fixed inset-0 z-30 bg-black bg-opacity-25 md:hidden",onClick:()=>s(!1)})]})};class Us extends j.Component{constructor(t){super(t);T(this,"handleReload",()=>{window.location.reload()});T(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,s){this.setState({error:t,errorInfo:s})}render(){return this.state.hasError?c.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:c.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:c.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:c.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.864-.833-2.632 0L4.182 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("h2",{className:"mt-6 text-lg font-medium text-gray-900",children:"Something went wrong"}),c.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),!1,c.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[c.jsx("button",{onClick:this.handleReset,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Try Again"}),c.jsx("button",{onClick:this.handleReload,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Reload Page"}),c.jsx("a",{href:"/",className:"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 text-center",children:"Go Home"})]})]})})})}):this.props.children}}const Xe=({size:n="md",variant:e="spinner",className:t,text:s})=>{const r={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"},i={xs:"text-xs",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"};return e==="dots"?c.jsxs("div",{className:O("flex items-center justify-center space-x-1",t),children:[[0,1,2].map(o=>c.jsx("div",{className:O("bg-blue-600 rounded-full animate-pulse",r[n]),style:{animationDelay:`${o*.2}s`,animationDuration:"1s"}},o)),s&&c.jsx("span",{className:O("ml-3 text-gray-600",i[n]),children:s})]}):e==="pulse"?c.jsxs("div",{className:O("flex items-center justify-center",t),children:[c.jsx("div",{className:O("bg-blue-600 rounded-full animate-ping",r[n])}),s&&c.jsx("span",{className:O("ml-3 text-gray-600",i[n]),children:s})]}):c.jsxs("div",{className:O("flex items-center justify-center",t),children:[c.jsx("div",{className:O("animate-spin rounded-full border-2 border-gray-300 border-t-blue-600",r[n]),role:"status","aria-label":"Loading",children:c.jsx("span",{className:"sr-only",children:"Loading..."})}),s&&c.jsx("span",{className:O("ml-3 text-gray-600",i[n]),children:s})]})},Ks=({children:n,sidebar:e,sidebarOpen:t=!1,className:s,fullHeight:r=!0})=>c.jsxs("div",{className:O("flex",r?"h-full":"min-h-screen",s),children:[e&&c.jsxs(c.Fragment,{children:[c.jsx("aside",{className:O("hidden lg:flex lg:flex-col lg:w-80 lg:fixed lg:inset-y-0 lg:pt-16","bg-white border-r border-gray-200","z-30"),children:c.jsx("div",{className:"flex-1 overflow-y-auto",children:e})}),t&&c.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"}),c.jsxs("aside",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[c.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:c.jsxs("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[c.jsx("span",{className:"sr-only",children:"Close sidebar"}),c.jsx("svg",{className:"h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})}),c.jsx("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:e})]})]})]}),c.jsx("main",{className:O("flex-1 flex flex-col",e&&"lg:pl-80"),children:n})]});class Hs{constructor(e,t){T(this,"config");T(this,"cache");T(this,"rateLimitState");T(this,"rateLimit");this.config=e,this.cache=new Map,this.rateLimitState=new Map,this.rateLimit=t,this.startCacheCleanup()}async request(e){this.rateLimit.enabled&&await this.checkRateLimit();const t=this.generateCacheKey(e);if(this.config.cacheEnabled&&!e.skipCache){const r=this.getFromCache(t);if(r)return r}const s=await this.makeHttpRequest(e);return this.config.cacheEnabled&&!e.skipCache&&this.setCache(t,s),s}async makeHttpRequest(e){const{method:t,endpoint:s,params:r,headers:i={},body:o}=e,a=e.customTimeout||this.config.timeout;let l=`${this.config.baseUrl}${s}`;if(t==="GET"&&r){const h=new URLSearchParams;Object.entries(r).forEach(([f,x])=>{x!=null&&h.append(f,String(x))}),h.toString()&&(l+=`?${h.toString()}`)}const d={"Content-Type":"application/json",...i};this.config.userAgent&&(d["User-Agent"]=this.config.userAgent),this.config.apiKey&&(d.Authorization=`Bearer ${this.config.apiKey}`);const u={method:t,headers:d,signal:AbortSignal.timeout(a)};if(t!=="GET"&&o){const h=d["Content-Type"]||d["content-type"];h&&h.includes("text/plain")?u.body=o:u.body=JSON.stringify(o)}let p;for(let h=0;h<=this.config.retries;h++)try{const f=await fetch(l,u);if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);const x=f.headers.get("content-type");return x&&x.includes("application/json")?await f.json():await f.text()}catch(f){if(p=f,f instanceof Error){if(f.name==="AbortError")throw new Error(`Request timeout after ${a}ms`);if(f.message.includes("HTTP 4"))throw f}if(h<this.config.retries){const x=Math.pow(2,h)*1e3;await new Promise(g=>setTimeout(g,x))}}throw p}classifyError(e,t){const s=e.message.toLowerCase();if(e.name==="AbortError"||s.includes("timeout"))return{type:"timeout",message:`Request timed out${t?` while ${t}`:""}`,originalError:e,suggestion:"The service is taking too long to respond. Please try again or zoom in to search a smaller area.",retryable:!0};if(s.includes("failed to fetch")||s.includes("network"))return{type:"network",message:`Network connection failed${t?` while ${t}`:""}`,originalError:e,suggestion:"Please check your internet connection and try again.",retryable:!0};if(s.includes("rate limit"))return{type:"rate_limit",message:`Too many requests${t?` while ${t}`:""}`,originalError:e,suggestion:e.message.includes("wait")?e.message:"Please wait a moment before trying again.",retryable:!0};if(s.includes("http 5"))return{type:"server",message:`Service temporarily unavailable${t?` while ${t}`:""}`,originalError:e,suggestion:"The service is experiencing issues. Please try again in a few moments.",retryable:!0};if(s.includes("http 4")){const r=s.includes("404");return s.includes("429")?{type:"rate_limit",message:`Too many requests${t?` while ${t}`:""}`,originalError:e,suggestion:"Please wait a moment before searching again.",retryable:!0}:{type:"client",message:r?`No data found${t?` while ${t}`:""}`:`Request failed${t?` while ${t}`:""}`,originalError:e,suggestion:r?"Try searching a different location or zooming out to see more results.":"Please check your request and try again.",retryable:!1}}return{type:"unknown",message:`Something went wrong${t?` while ${t}`:""}`,originalError:e,suggestion:"Please try again. If the problem persists, try refreshing the page.",retryable:!0}}async checkRateLimit(){const e=Date.now(),t="default",s=this.rateLimitState.get(t)||{count:0,resetTime:e+this.rateLimit.windowMs};if(e>s.resetTime&&(s.count=0,s.resetTime=e+this.rateLimit.windowMs),s.count>=this.rateLimit.requests){const r=s.resetTime-e;throw new Error(`Rate limit exceeded. Please wait ${Math.ceil(r/1e3)} seconds.`)}s.count++,this.rateLimitState.set(t,s)}generateCacheKey(e){const{method:t,endpoint:s,params:r,body:i}=e,o=[t,s];return r&&o.push(JSON.stringify(r)),i&&o.push(JSON.stringify(i)),o.join("|")}getFromCache(e){const t=this.cache.get(e);return t?Date.now()>t.timestamp+t.ttl?(this.cache.delete(e),null):t.data:null}setCache(e,t,s){const r=s||this.config.cacheTtl,i={data:t,timestamp:Date.now(),ttl:r};this.cache.set(e,i)}clearCache(){this.cache.clear()}getCacheStats(){const e=Date.now(),t=Array.from(this.cache.entries()).map(([s,r])=>({key:s,size:JSON.stringify(r.data).length,age:e-r.timestamp}));return{size:this.cache.size,entries:t}}startCacheCleanup(){setInterval(()=>{const e=Date.now();for(const[t,s]of this.cache.entries())e>s.timestamp+s.ttl&&this.cache.delete(t)},6e4)}getServiceInfo(){return{name:this.constructor.name,baseUrl:this.config.baseUrl,cacheSize:this.cache.size}}}class z extends Error{constructor(t,s,r,i=!0){super(t);T(this,"code");T(this,"service");T(this,"recoverable");this.name="RoutingError",this.code=s,this.service=r,this.recoverable=i}}class Nt extends Hs{constructor(){const t={baseUrl:qe.routing.endpoints.openrouteservice,timeout:15e3,retries:2,cacheEnabled:!0,cacheTtl:36e5,userAgent:"EuropeanCamperPlanner/1.0",apiKey:"5b3ce3597851110001cf6248a96ac2c424b94ce6b8b4be2a3074bdf3"},s={requests:2e3,windowMs:1440*60*1e3,enabled:!0};super(t,s);T(this,"fallbackService");this.initializeFallbackService()}async calculateRoute(t){try{this.validateRouteRequest(t);const s=t.vehicleProfile?this.validateVehicleRestrictions(t.vehicleProfile):null;if(s?.cannotAccommodate)return{id:`restriction_blocked_${Date.now()}`,status:"error",routes:[],metadata:{service:"openrouteservice",profile:this.determineProfile(t.vehicleProfile,t.options?.profile),timestamp:Date.now(),query:t,attribution:"Vehicle restriction validation"},errors:["Vehicle dimensions exceed EU road limits"],restrictions:s};const r={...t,options:{...t.options,alternative_routes:!0,elevation:!0,geometry:!0,instructions:!0}},i=await this.calculateRouteWithORS(r);return s&&(i.restrictions=s,i.warnings=[...i.warnings||[],...s.suggestedActions]),i}catch(s){if(s instanceof z&&!s.recoverable)throw s;console.warn("OpenRouteService failed, trying fallback:",s);try{const r=await this.calculateRouteWithOSRM(t),i=["Primary routing service unavailable, using fallback"];return t.vehicleProfile&&(i.push("âš ï¸ Vehicle restrictions not supported by fallback service"),i.push("Route may include roads unsuitable for your vehicle")),{...r,warnings:i}}catch(r){throw console.error("Fallback routing service also failed:",r),new z("All routing services are currently unavailable","SERVICE_UNAVAILABLE","all",!1)}}}async calculateRouteWithORS(t){const{waypoints:s,vehicleProfile:r,options:i={}}=t,o=s.map(p=>[p.lng,p.lat]),a=this.determineProfile(r,i.profile),l={coordinates:o,format:"geojson",geometry:i.geometry!==!1,instructions:i.instructions!==!1,elevation:i.elevation||!1};r&&(l.height=r.height,l.width=r.width,l.weight=r.weight,l.length=r.length,l.axleload=Math.round(r.weight/2*10)/10,l.hazmat=!1,l.surface_type="any"),i.alternative_routes!==!1&&(l.alternative_routes={target_count:2,weight_factor:1.4,share_factor:.6}),i.avoidFeatures&&i.avoidFeatures.length>0&&(l.avoid_features=i.avoidFeatures);const d={method:"POST",endpoint:`/directions/${a}/geojson`,body:l,headers:{Accept:"application/json, application/geo+json, application/gpx+xml, img/png; charset=utf-8"}},u=await this.request(d);return this.transformORSResponse(u,t)}async calculateRouteWithOSRM(t){const{waypoints:s}=t,r=s.map(d=>`${d.lng},${d.lat}`).join(";"),i={overview:"full",geometries:"geojson",steps:"true",annotations:"true"},o={method:"GET",endpoint:`/route/v1/driving/${r}`,params:i},a={baseUrl:qe.routing.endpoints.osrm,timeout:1e4,retries:1,cacheEnabled:!0,cacheTtl:18e5,userAgent:"EuropeanCamperPlanner/1.0"},l=this.config;this.config=a;try{const d=await this.request(o);return this.transformOSRMResponse(d,t)}finally{this.config=l}}validateVehicleRestrictions(t){const s={violatedDimensions:[],restrictedSegments:[],cannotAccommodate:!1,suggestedActions:[]},r={height:4,width:2.55,weight:40,length:18.75};return t.height>r.height&&(s.violatedDimensions.push("height"),s.suggestedActions.push(`Vehicle height ${t.height}m exceeds EU limit of ${r.height}m`)),t.width>r.width&&(s.violatedDimensions.push("width"),s.suggestedActions.push(`Vehicle width ${t.width}m exceeds EU limit of ${r.width}m`)),t.weight>r.weight&&(s.violatedDimensions.push("weight"),s.suggestedActions.push(`Vehicle weight ${t.weight}t exceeds EU limit of ${r.weight}t`)),t.length>r.length&&(s.violatedDimensions.push("length"),s.suggestedActions.push(`Vehicle length ${t.length}m exceeds EU limit of ${r.length}m`)),s.cannotAccommodate=s.violatedDimensions.length>0,s.violatedDimensions.length>0?s:null}validateRouteRequest(t){const{waypoints:s,vehicleProfile:r}=t;if(!s||s.length<2)throw new z("At least 2 waypoints are required","INVALID_WAYPOINTS","validation",!1);if(s.length>50)throw new z("Maximum 50 waypoints allowed","TOO_MANY_WAYPOINTS","validation",!1);for(const i of s)if(i.lat<-90||i.lat>90||i.lng<-180||i.lng>180)throw new z(`Invalid coordinates: ${i.lat}, ${i.lng}`,"INVALID_COORDINATES","validation",!1);if(r){if(r.height<=0||r.height>4.5)throw new z("Vehicle height must be between 0 and 4.5 meters","INVALID_VEHICLE","validation",!1);if(r.width<=0||r.width>3)throw new z("Vehicle width must be between 0 and 3.0 meters","INVALID_VEHICLE","validation",!1);if(r.weight<=0||r.weight>40)throw new z("Vehicle weight must be between 0 and 40 tonnes","INVALID_VEHICLE","validation",!1);if(r.length<=0||r.length>20)throw new z("Vehicle length must be between 0 and 20 meters","INVALID_VEHICLE","validation",!1)}}determineProfile(t,s){return s||(t&&(t.height>2.5||t.width>2.2||t.weight>3.5||t.length>7)?"driving-hgv":"driving-car")}transformORSResponse(t,s){const r=t.features||[];if(r.length===0)throw new z("No route found","NO_ROUTE","openrouteservice",!0);const i=r[0],o={geometry:i.geometry,summary:{distance:i.properties.summary.distance,duration:i.properties.summary.duration},segments:i.properties.segments||[],waypoints:i.properties.way_points||[]},a=r.slice(1).map(d=>({geometry:d.geometry,summary:{distance:d.properties.summary.distance,duration:d.properties.summary.duration},segments:d.properties.segments||[],waypoints:d.properties.way_points||[]})),l=[];if(s.vehicleProfile&&o.summary.distance===0&&l.push("Route calculation returned empty result - vehicle may not fit on available roads"),a.length>0){const d=o.summary.distance;Math.min(...a.map(p=>p.summary.distance))>d*1.5&&l.push("Alternative routes are significantly longer - possible vehicle restrictions on main route")}return{id:`ors_${Date.now()}`,status:"success",routes:[o],alternativeRoutes:a,metadata:{service:"openrouteservice",profile:this.determineProfile(s.vehicleProfile,s.options?.profile),timestamp:Date.now(),query:s,attribution:"openrouteservice.org | OpenStreetMap contributors"},warnings:l.length>0?l:void 0}}transformOSRMResponse(t,s){const r=t.routes[0];if(!r)throw new z("No route found","NO_ROUTE","osrm",!0);const i={geometry:r.geometry,summary:{distance:r.distance,duration:r.duration},segments:r.legs||[],waypoints:t.waypoints?.map((o,a)=>a)||[]};return{id:`osrm_${Date.now()}`,status:"success",routes:[i],metadata:{service:"osrm",profile:"driving",timestamp:Date.now(),query:s,attribution:"OpenStreetMap contributors | OSRM"},warnings:["Using fallback routing service (vehicle restrictions not supported)"]}}initializeFallbackService(){this.fallbackService=void 0}async healthCheck(){try{const t={method:"GET",endpoint:"/health",skipCache:!0,customTimeout:5e3};return await this.request(t),!0}catch(t){return console.warn("OpenRouteService health check failed:",t),!1}}getServiceStatus(){const t=this.rateLimitState.get("default")||{count:0,resetTime:Date.now()};return{primary:{name:"OpenRouteService",healthy:!0,cacheSize:this.cache.size},fallback:{name:"OSRM",available:!0},rateLimitInfo:{remaining:Math.max(0,this.rateLimit.requests-t.count),resetTime:t.resetTime}}}}const Kn=new Nt;class Ws{constructor(){T(this,"routingService");T(this,"distanceCache",new Map);this.routingService=new Nt}async optimizeRoute(e,t){if(e.length<3)throw new Error("Route optimization requires at least 3 waypoints");const s=Date.now(),r=await this.calculateRouteMetrics(e,t.vehicleProfile),i=await this.buildDistanceMatrix(e,t.vehicleProfile),o=await this.solveTSP(i,t,e),a=this.reorderWaypoints(e,o.order,t.lockedWaypoints),l=await this.calculateRouteMetrics(a,t.vehicleProfile),d=this.calculateImprovements(r,l);return{originalRoute:{waypoints:e,totalDistance:r.distance,totalTime:r.duration,estimatedCost:r.cost},optimizedRoute:{waypoints:a,totalDistance:l.distance,totalTime:l.duration,estimatedCost:l.cost,reorderingApplied:JSON.stringify(e.map(u=>u.id))!==JSON.stringify(a.map(u=>u.id))},improvements:d,optimizationMetadata:{algorithm:t.objective==="shortest"?"Distance-TSP":t.objective==="fastest"?"Time-TSP":"Balanced-TSP",iterations:o.iterations,executionTime:Date.now()-s,convergenceReached:o.converged}}}async findOptimalInsertion(e,t,s){if(e.length===0)return{suggestedPosition:0,routeImpact:{distanceAdded:0,timeAdded:0,efficiency:1},alternatives:[]};const r=[],i=await this.calculateRouteMetrics(e,s.vehicleProfile);for(let a=0;a<=e.length;a++){const l=[...e];l.splice(a,0,t);const d=await this.calculateRouteMetrics(l,s.vehicleProfile),u=d.distance-i.distance,p=d.duration-i.duration,h=this.calculateInsertionEfficiency(u,p,s);r.push({position:a,distanceAdded:u,timeAdded:p,efficiency:h})}r.sort((a,l)=>l.efficiency-a.efficiency);const o=r[0];return{suggestedPosition:o.position,routeImpact:{distanceAdded:o.distanceAdded,timeAdded:o.timeAdded,efficiency:o.efficiency},alternatives:r.slice(1,4)}}async buildDistanceMatrix(e,t){const s=e.length,r=Array(s).fill(null).map(()=>Array(s).fill(0)),i=Array(s).fill(null).map(()=>Array(s).fill(0)),o=Array(s).fill(null).map(()=>Array(s).fill(0)),a=this.generateMatrixCacheKey(e,t),l=this.distanceCache.get(a);if(l)return l;for(let u=0;u<s;u++)for(let p=0;p<s;p++){if(u===p){r[u][p]=0,i[u][p]=0,o[u][p]=0;continue}try{const h={waypoints:[e[u],e[p]],vehicleProfile:t,options:{alternatives:!1,steps:!1,geometries:"geojson"}},f=await this.routingService.calculateRoute(h);if(f.routes&&f.routes.length>0){const x=f.routes[0];r[u][p]=x.summary.distance/1e3,i[u][p]=x.summary.duration/60,o[u][p]=this.estimateRouteCost(x.summary.distance,x.summary.duration,t)}else r[u][p]=this.calculateHaversineDistance(e[u],e[p]),i[u][p]=r[u][p]*1.2,o[u][p]=r[u][p]*.5}catch(h){console.warn(`Failed to calculate route from ${u} to ${p}:`,h),r[u][p]=this.calculateHaversineDistance(e[u],e[p]),i[u][p]=r[u][p]*1.2,o[u][p]=r[u][p]*.5}}const d={distances:r,durations:i,costs:o};return this.distanceCache.set(a,d),d}async solveTSP(e,t,s){const r=e.distances.length;if(r<=3)return{order:Array.from({length:r},(h,f)=>f),iterations:0,converged:!0};const i=this.getLockedPositions(s,t.lockedWaypoints),o=(h,f)=>{switch(t.objective){case"shortest":return e.distances[h][f];case"fastest":return e.durations[h][f];case"balanced":const x=e.durations[h][f]/Math.max(...e.durations.flat()),g=e.distances[h][f]/Math.max(...e.distances.flat());return .6*x+.4*g;default:return e.distances[h][f]}};let a=this.nearestNeighborTSP(e,o,i),l=this.calculateTourCost(a,o);const d=Math.min(1e3,r*r);let u=0,p=!0;for(;p&&u<d;){p=!1;for(let h=1;h<r-1;h++)if(!i.has(h))for(let f=h+1;f<r;f++){if(i.has(f))continue;const x=this.twoOptSwap(a,h,f),g=this.calculateTourCost(x,o);g<l&&(a=x,l=g,p=!0)}u++}return{order:a,iterations:u,converged:!p}}nearestNeighborTSP(e,t,s){const r=e.distances.length,i=new Set,o=[];let a=0;for(o.push(a),i.add(a);i.size<r;){let l=-1,d=1/0;for(let u=0;u<r;u++)if(!i.has(u)){const p=t(a,u);p<d&&(d=p,l=u)}l!==-1&&(o.push(l),i.add(l),a=l)}return o}twoOptSwap(e,t,s){const r=[...e];for(;t<s;)[r[t],r[s]]=[r[s],r[t]],t++,s--;return r}calculateTourCost(e,t){let s=0;for(let r=0;r<e.length-1;r++)s+=t(e[r],e[r+1]);return s}reorderWaypoints(e,t,s){if(s&&s.length>0){const r=[...e],i=new Set(s);let o=0;for(let a=0;a<r.length;a++)if(!i.has(r[a].id)){for(;o<t.length&&i.has(e[t[o]].id);)o++;o<t.length&&(r[a]=e[t[o]],o++)}return r}return t.map(r=>e[r])}async calculateRouteMetrics(e,t){if(e.length<2)return{distance:0,duration:0,cost:0};try{const r={waypoints:e,vehicleProfile:t,options:{alternatives:!1,steps:!1,geometries:"geojson"}},i=await this.routingService.calculateRoute(r);if(i.routes&&i.routes.length>0){const o=i.routes[0];return{distance:o.summary.distance/1e3,duration:o.summary.duration/60,cost:this.estimateRouteCost(o.summary.distance,o.summary.duration,t)}}}catch(r){console.warn("Failed to calculate route metrics:",r)}let s=0;for(let r=0;r<e.length-1;r++)s+=this.calculateHaversineDistance(e[r],e[r+1]);return{distance:s,duration:s*1.2,cost:s*.5}}calculateImprovements(e,t){const s=Math.max(0,e.distance-t.distance),r=Math.max(0,e.duration-t.duration),i=e.cost&&t.cost?Math.max(0,e.cost-t.cost):void 0,o=e.distance>0?s/e.distance*100:0;return{distanceSaved:s,timeSaved:r,costSaved:i,percentageImprovement:o}}calculateInsertionEfficiency(e,t,s){const o=Math.max(0,1-e/50),a=Math.max(0,1-t/60);switch(s.objective){case"shortest":return .8*o+.2*a;case"fastest":return .2*o+.8*a;case"balanced":return .5*o+.5*a;default:return .5*o+.5*a}}getLockedPositions(e,t){const s=new Set;return t&&e.forEach((r,i)=>{t.includes(r.id)&&s.add(i)}),s}generateMatrixCacheKey(e,t){const s=e.map(i=>`${i.lat.toFixed(4)},${i.lng.toFixed(4)}`).join("|"),r=t?`${t.type}-${t.height}-${t.weight}`:"default";return`${s}::${r}`}calculateHaversineDistance(e,t){const r=(t.lat-e.lat)*Math.PI/180,i=(t.lng-e.lng)*Math.PI/180,o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}estimateRouteCost(e,t,s){const r=e/1e3;let i=8;if(s)switch(s.type){case"motorhome":i=12+(s.weight||0)*.5;break;case"caravan":i=10+(s.weight||0)*.3;break;case"van":i=9;break;default:i=7;break}const o=1.5,a=r*.1;return r*i/100*o+a}clearCache(){this.distanceCache.clear()}getCacheStats(){return{size:this.distanceCache.size,keys:Array.from(this.distanceCache.keys())}}}const Hn=new Ws,Bs={consumptionType:"l_per_100km",consumption:12,fuelType:"diesel",tankCapacity:80},Js={priceType:"default_european",currency:"EUR",lastUpdated:new Date},Gs={showCostBreakdown:!0,showDailyEstimates:!0,showOptimizationSuggestions:!0,currency:"EUR",includeAccommodationCosts:!0,includeTollEstimates:!1},qs=te()(Ne((n,e)=>({fuelConsumptionSettings:Bs,setFuelConsumptionSettings:t=>{n({fuelConsumptionSettings:t}),n({lastCalculation:{}})},fuelPriceSettings:Js,setFuelPriceSettings:t=>{n({fuelPriceSettings:t}),n({lastCalculation:{}})},preferences:Gs,setPreferences:t=>{n({preferences:{...e().preferences,...t}})},autoUpdatePrices:!1,setAutoUpdatePrices:t=>{n({autoUpdatePrices:t})},lastCalculation:{},setLastCalculation:t=>{n({lastCalculation:t})}}),{name:"camper-planner-cost-settings",partialize:n=>({fuelConsumptionSettings:n.fuelConsumptionSettings,fuelPriceSettings:n.fuelPriceSettings,preferences:n.preferences,autoUpdatePrices:n.autoUpdatePrices})}));function Wn(n,e){const t=n.map(r=>r.id).join("-"),s=e?`${e.type}-${e.length}-${e.weight}`:"default";return`${t}_${s}`}function Bn(n,e=30){if(!n)return!1;const t=Date.now(),s=e*60*1e3;return t-n<s}const Oe="camper-planner-onboarding-complete",et="1.0",Ys=()=>{const[n,e]=j.useState(!1),[t,s]=j.useState(!0);j.useEffect(()=>{(()=>{try{const l=localStorage.getItem(Oe);if(!l){e(!0),s(!1);return}if(JSON.parse(l).version!==et){e(!0),s(!1);return}e(!1),s(!1)}catch(l){console.error("Error checking onboarding status:",l),e(!0),s(!1)}})()},[]);const r=()=>{try{const a={isComplete:!0,version:et,completedAt:new Date().toISOString()};localStorage.setItem(Oe,JSON.stringify(a)),e(!1)}catch(a){console.error("Error saving onboarding state:",a),e(!1)}};return{showOnboarding:n,isLoading:t,completeOnboarding:r,skipOnboarding:()=>{r()},resetOnboarding:()=>{try{localStorage.removeItem(Oe),e(!0)}catch(a){console.error("Error resetting onboarding:",a)}}}},G=class G{constructor(){T(this,"announceElement",null);this.createAnnounceElement()}static getInstance(){return G.instance||(G.instance=new G),G.instance}createAnnounceElement(){typeof window>"u"||(this.announceElement=document.createElement("div"),this.announceElement.setAttribute("aria-live","polite"),this.announceElement.setAttribute("aria-atomic","true"),this.announceElement.setAttribute("aria-hidden","false"),this.announceElement.className="sr-only",this.announceElement.style.position="absolute",this.announceElement.style.left="-10000px",this.announceElement.style.width="1px",this.announceElement.style.height="1px",this.announceElement.style.overflow="hidden",document.body.appendChild(this.announceElement))}announce(e,t="polite"){this.announceElement&&(this.announceElement.setAttribute("aria-live",t),this.announceElement.textContent="",setTimeout(()=>{this.announceElement&&(this.announceElement.textContent=e)},100),setTimeout(()=>{this.announceElement&&(this.announceElement.textContent="")},1e3))}};T(G,"instance");let ze=G;const Qs=()=>{const n=ze.getInstance();return(e,t="polite")=>{n.announce(e,t)}},Zs={handleEnterKey:n=>e=>{e.key==="Enter"&&(e.preventDefault(),n())},handleSpaceKey:n=>e=>{e.key===" "&&(e.preventDefault(),n())},handleEscapeKey:n=>e=>{e.key==="Escape"&&(e.preventDefault(),n())},handleArrowKeys:n=>e=>{switch(e.key){case"ArrowUp":n.up&&(e.preventDefault(),n.up());break;case"ArrowDown":n.down&&(e.preventDefault(),n.down());break;case"ArrowLeft":n.left&&(e.preventDefault(),n.left());break;case"ArrowRight":n.right&&(e.preventDefault(),n.right());break}},trapFocus:n=>{const e=n.current?.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select');if(!e||e.length===0)return;const t=e[0],s=e[e.length-1];return r=>{r.key==="Tab"&&(r.shiftKey?document.activeElement===t&&(r.preventDefault(),s.focus()):document.activeElement===s&&(r.preventDefault(),t.focus()))}}},Xs=n=>{const e=j.useRef(null);return j.useEffect(()=>{if(!n||!e.current)return;const t=Zs.trapFocus(e);t&&document.addEventListener("keydown",t);const s=e.current.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select');return s.length>0&&s[0].focus(),()=>{t&&document.removeEventListener("keydown",t)}},[n]),e},Fe={generateId:(n="aria")=>`${n}-${Math.random().toString(36).substr(2,9)}`,labelledBy:n=>({"aria-labelledby":n}),describedBy:n=>({"aria-describedby":n}),expanded:n=>({"aria-expanded":n}),selected:n=>({"aria-selected":n}),pressed:n=>({"aria-pressed":n}),checked:n=>({"aria-checked":n}),disabled:n=>({"aria-disabled":n}),hidden:n=>({"aria-hidden":n}),live:n=>({"aria-live":n}),role:n=>({role:n}),combobox:(n,e=!0)=>({role:"combobox","aria-expanded":n,"aria-haspopup":e?"listbox":!1}),listbox:(n=!1)=>({role:"listbox","aria-multiselectable":n}),option:(n=!1)=>({role:"option","aria-selected":n}),tab:(n=!1,e)=>({role:"tab","aria-selected":n,...e&&{"aria-controls":e}}),tabpanel:n=>({role:"tabpanel",...n&&{"aria-labelledby":n}}),dialog:(n,e)=>({role:"dialog","aria-modal":!0,...n&&{"aria-labelledby":n},...e&&{"aria-describedby":e}}),button:(n,e)=>({role:"button",...n!==void 0&&{"aria-pressed":n},...e!==void 0&&{"aria-expanded":e}})},en=()=>c.jsxs("div",{className:"text-center space-y-6",children:[c.jsx("div",{className:"text-6xl",children:"ðŸ•ï¸"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to European Camper Trip Planner"}),c.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Plan safe routes that respect your vehicle's size. Find campsites, calculate costs, and export to GPS."})]}),c.jsx("div",{className:"text-sm text-gray-500",children:"Let's set up your vehicle and get you started with your first route."})]}),tn=({onVehicleSet:n,vehicleData:e,setVehicleData:t})=>{const s={motorhome:{height:3.2,width:2.3,length:7,weight:3.5,fuelType:"diesel"},camper_van:{height:2.5,width:2,length:5.5,weight:2.8,fuelType:"diesel"},caravan:{height:2.8,width:2.2,length:6,weight:1.5,fuelType:"petrol"},car_tent:{height:1.6,width:1.8,length:4.5,weight:1.2,fuelType:"petrol"}},r=[{id:"motorhome",name:"Motorhome",icon:"ðŸš",description:"Large self-contained RV"},{id:"camper_van",name:"Camper Van",icon:"ðŸšŒ",description:"Converted van"},{id:"caravan",name:"Caravan",icon:"ðŸ ",description:"Towed trailer"},{id:"car_tent",name:"Car + Tent",icon:"ðŸ•ï¸",description:"Car camping"}],i=a=>{const l=s[a];t({type:a,height:l.height,width:l.width,length:l.length,weight:l.weight})},o=(a,l)=>{const d=parseFloat(l)||0;t({...e,[a]:d})};return j.useEffect(()=>{e.height>0&&e.width>0&&e.length>0&&e.weight>0&&n({id:"onboarding-vehicle",name:`My ${e.type}`,type:e.type,height:e.height,width:e.width,length:e.length,weight:e.weight,fuelType:s[e.type]?.fuelType||"diesel",createdAt:new Date().toISOString()})},[e,n]),c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Tell Us About Your Vehicle"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Your vehicle dimensions ensure routes avoid roads that won't fit."})]}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.map(a=>c.jsx("button",{onClick:()=>i(a.id),className:O("p-3 border-2 rounded-lg text-left transition-colors",e.type===a.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),...Fe.button(),children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-xl",children:a.icon}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:a.name}),c.jsx("p",{className:"text-xs text-gray-500",children:a.description})]})]})},a.id))}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-3 text-sm",children:"Vehicle Dimensions"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Height (m)"}),c.jsx("input",{type:"number",step:"0.1",min:"1",max:"5",value:e.height,onChange:a=>o("height",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Width (m)"}),c.jsx("input",{type:"number",step:"0.1",min:"1",max:"3.5",value:e.width,onChange:a=>o("width",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Length (m)"}),c.jsx("input",{type:"number",step:"0.1",min:"2",max:"20",value:e.length,onChange:a=>o("length",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Weight (tonnes)"}),c.jsx("input",{type:"number",step:"0.1",min:"0.5",max:"40",value:e.weight,onChange:a=>o("weight",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"ðŸ’¡ Check your vehicle registration or measure from ground to highest point (including any roof equipment)."})]})]})},sn=({vehicleType:n,fuelData:e,setFuelData:t})=>{const s={motorhome:14,camper_van:10,caravan:12,car_tent:8},r=[{id:"diesel",name:"Diesel",icon:"â›½"},{id:"petrol",name:"Petrol",icon:"â›½"},{id:"lpg",name:"LPG",icon:"ðŸ”¥"},{id:"electricity",name:"Electric",icon:"âš¡"}];return j.useEffect(()=>{e.consumption===0&&t({...e,consumption:s[n]||12})},[n]),c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Fuel Settings"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"This helps us calculate your trip costs accurately."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuel Type"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.map(i=>c.jsxs("button",{onClick:()=>t({...e,fuelType:i.id}),className:O("p-3 border-2 rounded-lg text-center transition-colors",e.fuelType===i.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),children:[c.jsx("span",{className:"text-lg",children:i.icon}),c.jsx("span",{className:"ml-2 text-sm font-medium",children:i.name})]},i.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuel Consumption"}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("input",{type:"number",step:"0.5",min:"3",max:"30",value:e.consumption,onChange:i=>t({...e,consumption:parseFloat(i.target.value)||0}),className:"flex-1 px-4 py-3 border border-gray-300 rounded-md text-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),c.jsx("span",{className:"text-gray-600 text-sm whitespace-nowrap",children:"L/100km"})]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-blue-900 mb-2 text-sm",children:"ðŸ’¡ Typical consumption values:"}),c.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[c.jsx("li",{children:"â€¢ Motorhome: 12-18 L/100km"}),c.jsx("li",{children:"â€¢ Camper Van: 8-12 L/100km"}),c.jsx("li",{children:"â€¢ Car + Caravan: 10-14 L/100km"}),c.jsx("li",{children:"â€¢ Car + Tent: 6-10 L/100km"})]})]})]})},nn=({onWaypointsAdded:n})=>{const{waypoints:e}=Ve();return j.useEffect(()=>{e.length>=2&&n()},[e.length,n]),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"ðŸ—ºï¸ Let's Plan Your First Route"}),c.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Right-click on the map above to add locations"})]}),c.jsxs("div",{className:"flex justify-center gap-6",children:[c.jsxs("div",{className:O("flex items-center gap-2 text-sm",e.length>=1?"text-green-600":"text-gray-400"),children:[c.jsx("span",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center text-xs font-bold",children:e.length>=1?"âœ“":"1"}),c.jsx("span",{children:"Add start point"})]}),c.jsxs("div",{className:O("flex items-center gap-2 text-sm",e.length>=2?"text-green-600":"text-gray-400"),children:[c.jsx("span",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center text-xs font-bold",children:e.length>=2?"âœ“":"2"}),c.jsx("span",{children:"Add destination"})]})]}),e.length===0&&c.jsx("p",{className:"text-center text-sm text-gray-500",children:"ðŸ’¡ Right-click anywhere on the map to add your first waypoint"}),e.length===1&&c.jsx("p",{className:"text-center text-sm text-gray-500",children:"ðŸ‘ Great! Now right-click to add your destination"}),e.length>=2&&c.jsx("p",{className:"text-center text-sm text-green-600 font-medium",children:"âœ… Perfect! Your route is ready. Click Continue to finish setup."})]})},rn=({vehicleData:n,fuelData:e})=>{const{waypoints:t,calculatedRoute:s}=Ve(),r={motorhome:"Motorhome",camper_van:"Camper Van",caravan:"Caravan",car_tent:"Car + Tent"},i={diesel:"Diesel",petrol:"Petrol",lpg:"LPG",electricity:"Electric"},o=s?.distance?s.distance/1e3:0,a=o/100*e.consumption,l=e.fuelType==="diesel"?1.65:1.75,d=a*l;return c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-2",children:"âœ…"}),c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"You're All Set!"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Here's a summary of your setup"})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Vehicle"}),c.jsxs("span",{className:"text-sm font-medium",children:[r[n.type]," (",n.height,"m Ã— ",n.width,"m Ã— ",n.length,"m)"]})]}),c.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Weight"}),c.jsxs("span",{className:"text-sm font-medium",children:[n.weight," tonnes"]})]}),c.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Fuel"}),c.jsxs("span",{className:"text-sm font-medium",children:[i[e.fuelType]," @ ",e.consumption," L/100km"]})]}),t.length>=2&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Route"}),c.jsxs("span",{className:"text-sm font-medium",children:[t.length," waypoints",o>0&&` â€¢ ${Math.round(o)} km`]})]}),d>0&&c.jsxs("div",{className:"flex justify-between items-center py-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Est. Fuel Cost"}),c.jsxs("span",{className:"text-sm font-medium text-green-600",children:["â‚¬",d.toFixed(0)]})]})]})]}),c.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[c.jsx("h4",{className:"font-medium text-blue-900 mb-2 text-sm",children:"Quick Reference"}),c.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[c.jsxs("li",{children:["ðŸ—ºï¸ ",c.jsx("strong",{children:"Right-click map"})," â†’ Add waypoints"]}),c.jsxs("li",{children:["ðŸ•ï¸ ",c.jsx("strong",{children:"Green button"})," â†’ Find campsites"]}),c.jsxs("li",{children:["âš¡ ",c.jsx("strong",{children:"Lightning bolt"})," â†’ Optimize route order"]}),c.jsxs("li",{children:["ðŸ’¾ ",c.jsx("strong",{children:"Briefcase icon"})," â†’ Save your trip"]})]})]})]})},tt=({currentStep:n,totalSteps:e,steps:t})=>c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Step ",n+1," of ",e]}),c.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round((n+1)/e*100),"% complete"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${(n+1)/e*100}%`}})}),c.jsx("div",{className:"flex justify-between mt-3",children:t.map((s,r)=>c.jsxs("div",{className:O("flex items-center space-x-1 text-xs",r<=n?"text-blue-600":"text-gray-400"),children:[c.jsx("div",{className:O("w-2 h-2 rounded-full",r<n?"bg-blue-600":r===n?"bg-blue-600 animate-pulse":"bg-gray-300")}),c.jsx("span",{className:"hidden sm:inline",children:s.title})]},s.id))})]}),on=({onComplete:n,onSkip:e,className:t})=>{const s=Qs(),[r,i]=j.useState(0),o=Xs(!0),[a,l]=j.useState({type:"camper_van",height:2.5,width:2,length:5.5,weight:2.8}),[d,u]=j.useState({fuelType:"diesel",consumption:0}),[p,h]=j.useState(!1),{setProfile:f}=Ds(),{setFuelConsumptionSettings:x}=qs(),{waypoints:g}=Ve();j.useEffect(()=>{g.length>=2&&h(!0)},[g.length]),j.useEffect(()=>{d.consumption>0&&x({consumptionType:"l_per_100km",consumption:d.consumption,fuelType:d.fuelType,tankCapacity:80})},[d,x]);const m=j.useCallback($=>{f($)},[f]),y=j.useCallback(()=>{h(!0)},[]),b=[{id:"welcome",title:"Welcome",description:"Introduction",content:c.jsx(en,{}),canSkip:!0,canGoBack:!1},{id:"vehicle",title:"Vehicle",description:"Set up your vehicle",content:c.jsx(tn,{onVehicleSet:m,vehicleData:a,setVehicleData:l}),canSkip:!1,canGoBack:!0,validation:()=>a.height>0&&a.width>0&&a.length>0&&a.weight>0},{id:"fuel",title:"Fuel",description:"Fuel settings",content:c.jsx(sn,{vehicleType:a.type,fuelData:d,setFuelData:u}),canSkip:!0,canGoBack:!0,validation:()=>d.consumption>0},{id:"tutorial",title:"Try It",description:"Add waypoints",content:c.jsx(nn,{onWaypointsAdded:y}),canSkip:!0,canGoBack:!0,validation:()=>p||g.length>=2,isBottomPanel:!0},{id:"summary",title:"Done",description:"Summary",content:c.jsx(rn,{vehicleData:a,fuelData:d}),canSkip:!1,canGoBack:!0}],v=b[r],S=v.isBottomPanel,C=j.useCallback(()=>{v.validation&&!v.validation()||(v.onComplete&&v.onComplete(),r<b.length-1?(i(r+1),s(`Step ${r+2}: ${b[r+1].title}`,"polite")):n())},[r,v,b,n,s]),k=j.useCallback(()=>{r>0&&(i(r-1),s(`Step ${r}: ${b[r-1].title}`,"polite"))},[r,b,s]),E=j.useCallback(()=>{e()},[e]);return j.useEffect(()=>{const $=J=>{J.key==="Escape"&&E()};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[E]),S?c.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-2xl rounded-t-2xl z-50 border-t border-gray-200",children:c.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[c.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full mx-auto mb-3"}),c.jsx(tt,{currentStep:r,totalSteps:b.length,steps:b}),v.content,c.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-gray-200",children:[c.jsxs("div",{className:"flex space-x-3",children:[v.canGoBack&&r>0&&c.jsx("button",{onClick:k,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors text-sm",children:"Back"}),v.canSkip&&c.jsx("button",{onClick:C,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Skip this step"})]}),c.jsx("button",{onClick:C,disabled:v.validation&&!v.validation(),className:O("px-6 py-2 rounded-md font-medium transition-colors text-sm",v.validation&&!v.validation()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"Continue"})]})]})}):c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{ref:o,className:O("bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[85vh] flex flex-col",t),...Fe.dialog("onboarding-dialog","onboarding-description"),children:[c.jsx("div",{className:"p-5 border-b border-gray-200",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h1",{id:"onboarding-dialog",className:"text-lg font-semibold text-gray-900",children:"Getting Started"}),c.jsx("p",{id:"onboarding-description",className:"text-sm text-gray-600",children:"Let's set up your trip planner"})]}),c.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600 transition-colors",...Fe.button(),"aria-label":"Close onboarding",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),c.jsxs("div",{className:"p-5 flex-1 overflow-y-auto",children:[c.jsx(tt,{currentStep:r,totalSteps:b.length,steps:b}),c.jsx("div",{children:v.content})]}),c.jsxs("div",{className:"p-5 border-t border-gray-200 flex justify-between items-center",children:[c.jsx("div",{children:v.canSkip&&r<b.length-1&&c.jsx("button",{onClick:E,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Skip setup"})}),c.jsxs("div",{className:"flex space-x-3",children:[v.canGoBack&&r>0&&c.jsx("button",{onClick:k,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Back"}),c.jsx("button",{onClick:C,disabled:v.validation&&!v.validation(),className:O("px-6 py-2 rounded-md font-medium transition-colors",v.validation&&!v.validation()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:r===b.length-1?"Start Planning":"Continue"})]})]})]})})},w=n=>typeof n=="string",ae=()=>{let n,e;const t=new Promise((s,r)=>{n=s,e=r});return t.resolve=n,t.reject=e,t},st=n=>n==null?"":""+n,an=(n,e,t)=>{n.forEach(s=>{e[s]&&(t[s]=e[s])})},ln=/###/g,nt=n=>n&&n.indexOf("###")>-1?n.replace(ln,"."):n,rt=n=>!n||w(n),le=(n,e,t)=>{const s=w(e)?e.split("."):e;let r=0;for(;r<s.length-1;){if(rt(n))return{};const i=nt(s[r]);!n[i]&&t&&(n[i]=new t),Object.prototype.hasOwnProperty.call(n,i)?n=n[i]:n={},++r}return rt(n)?{}:{obj:n,k:nt(s[r])}},it=(n,e,t)=>{const{obj:s,k:r}=le(n,e,Object);if(s!==void 0||e.length===1){s[r]=t;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=le(n,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=le(n,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=t},cn=(n,e,t,s)=>{const{obj:r,k:i}=le(n,e,Object);r[i]=r[i]||[],r[i].push(t)},ye=(n,e)=>{const{obj:t,k:s}=le(n,e);if(t)return t[s]},dn=(n,e,t)=>{const s=ye(n,t);return s!==void 0?s:ye(e,t)},jt=(n,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in n?w(n[s])||n[s]instanceof String||w(e[s])||e[s]instanceof String?t&&(n[s]=e[s]):jt(n[s],e[s],t):n[s]=e[s]);return n},Z=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var un={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const hn=n=>w(n)?n.replace(/[&<>"'\/]/g,e=>un[e]):n;class pn{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const fn=[" ",",","?","!",";"],gn=new pn(20),mn=(n,e,t)=>{e=e||"",t=t||"";const s=fn.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(s.length===0)return!0;const r=gn.getRegExp(`(${s.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!r.test(n);if(!i){const o=n.indexOf(t);o>0&&!r.test(n.substring(0,o))&&(i=!0)}return i},De=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return n[e];const s=e.split(t);let r=n;for(let i=0;i<s.length;){if(!r||typeof r!="object")return;let o,a="";for(let l=i;l<s.length;++l)if(l!==i&&(a+=t),a+=s[l],o=r[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<s.length-1)continue;i+=l-i+1;break}r=o}return r},ve=n=>n&&n.replace("_","-"),bn={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console&&console[n]&&console[n].apply(console,e)}};class we{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||bn,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,r){return r&&!this.debug?null:(w(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new we(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new we(this.logger,e)}}var D=new we;class je{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const r=this.observers[s].get(t)||0;this.observers[s].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,l]=o;for(let d=0;d<l;d++)a(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let d=0;d<l;d++)a.apply(a,[e,...s])})}}class ot extends je{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,o=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],s&&(Array.isArray(s)?a.push(...s):w(s)&&i?a.push(...s.split(i)):a.push(s)));const l=ye(this.data,a);return!l&&!t&&!s&&e.indexOf(".")>-1&&(e=a[0],t=a[1],s=a.slice(2).join(".")),l||!o||!w(s)?l:De(this.data&&this.data[e]&&this.data[e][t],s,i)}addResource(e,t,s,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,t];s&&(a=a.concat(o?s.split(o):s)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),it(this.data,a,r),i.silent||this.emit("added",e,t,s,r)}addResources(e,t,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in s)(w(s[i])||Array.isArray(s[i]))&&this.addResource(e,t,i,s[i],{silent:!0});r.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,r,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=s,s=t,t=a[1]),this.addNamespaces(t);let l=ye(this.data,a)||{};o.skipCopy||(s=JSON.parse(JSON.stringify(s))),r?jt(l,s,i):l={...l,...s},it(this.data,a,l),o.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var Ct={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,s,r){return n.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,t,s,r))}),e}};const at={};class Se extends je{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),an(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=D.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const s=this.resolve(e,t);return s&&s.res!==void 0}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const o=s&&e.indexOf(s)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!mn(e,s,r);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:w(i)?[i]:i};const d=e.split(s);(s!==r||s===r&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),e=d.join(r)}return{key:e,namespaces:w(i)?[i]:i}}translate(e,t,s){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const r=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],t),l=a[a.length-1],d=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(u){const S=t.nsSeparator||this.options.nsSeparator;return r?{res:`${l}${S}${o}`,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:`${l}${S}${o}`}return r?{res:o,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:o}const p=this.resolve(e,t);let h=p&&p.res;const f=p&&p.usedKey||o,x=p&&p.exactUsedKey||o,g=Object.prototype.toString.apply(h),m=["[object Number]","[object Function]","[object RegExp]"],y=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,v=!w(h)&&typeof h!="boolean"&&typeof h!="number";if(b&&h&&v&&m.indexOf(g)<0&&!(w(y)&&Array.isArray(h))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,h,{...t,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return r?(p.res=S,p.usedParams=this.getUsedParamsDetails(t),p):S}if(i){const S=Array.isArray(h),C=S?[]:{},k=S?x:f;for(const E in h)if(Object.prototype.hasOwnProperty.call(h,E)){const $=`${k}${i}${E}`;C[E]=this.translate($,{...t,joinArrays:!1,ns:a}),C[E]===$&&(C[E]=h[E])}h=C}}else if(b&&w(y)&&Array.isArray(h))h=h.join(y),h&&(h=this.extendTranslation(h,e,t,s));else{let S=!1,C=!1;const k=t.count!==void 0&&!w(t.count),E=Se.hasDefaultValue(t),$=k?this.pluralResolver.getSuffix(d,t.count,t):"",J=t.ordinal&&k?this.pluralResolver.getSuffix(d,t.count,{ordinal:!1}):"",q=k&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),_=q&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${$}`]||t[`defaultValue${J}`]||t.defaultValue;!this.isValidLookup(h)&&E&&(S=!0,h=_),this.isValidLookup(h)||(C=!0,h=o);const fe=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:h,F=E&&_!==h&&this.options.updateMissing;if(C||S||F){if(this.logger.log(F?"updateKey":"missingKey",d,l,o,F?_:h),i){const P=this.resolve(o,{...t,keySeparator:!1});P&&P.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let K=[];const V=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&V&&V[0])for(let P=0;P<V.length;P++)K.push(V[P]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(t.lng||this.language):K.push(t.lng||this.language);const ne=(P,A,H)=>{const M=E&&H!==h?H:fe;this.options.missingKeyHandler?this.options.missingKeyHandler(P,l,A,M,F,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(P,l,A,M,F,t),this.emit("missingKey",P,l,A,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?K.forEach(P=>{const A=this.pluralResolver.getSuffixes(P,t);q&&t[`defaultValue${this.options.pluralSeparator}zero`]&&A.indexOf(`${this.options.pluralSeparator}zero`)<0&&A.push(`${this.options.pluralSeparator}zero`),A.forEach(H=>{ne([P],o+H,t[`defaultValue${H}`]||_)})}):ne(K,o,_))}h=this.extendTranslation(h,e,t,p,s),C&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${l}:${o}`),(C||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,S?h:void 0):h=this.options.parseMissingKeyHandler(h))}return r?(p.res=h,p.usedParams=this.getUsedParamsDetails(t),p):h}extendTranslation(e,t,s,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const d=w(e)&&(s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(d){const h=e.match(this.interpolator.nestingRegexp);u=h&&h.length}let p=s.replace&&!w(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,s.lng||this.language||r.usedLng,s),d){const h=e.match(this.interpolator.nestingRegexp),f=h&&h.length;u<f&&(s.nest=!1)}!s.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(s.lng=this.language||r.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var h=arguments.length,f=new Array(h),x=0;x<h;x++)f[x]=arguments[x];return i&&i[0]===f[0]&&!s.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${t[0]}`),null):o.translate(...f,t)},s)),s.interpolation&&this.interpolator.reset()}const a=s.postProcess||this.options.postProcess,l=w(a)?[a]:a;return e!=null&&l&&l.length&&s.applyPostProcessor!==!1&&(e=Ct.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,r,i,o,a;return w(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(s))return;const d=this.extractFromKey(l,t),u=d.key;r=u;let p=d.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const h=t.count!==void 0&&!w(t.count),f=h&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),x=t.context!==void 0&&(w(t.context)||typeof t.context=="number")&&t.context!=="",g=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);p.forEach(m=>{this.isValidLookup(s)||(a=m,!at[`${g[0]}-${m}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(at[`${g[0]}-${m}`]=!0,this.logger.warn(`key "${r}" for languages "${g.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(y=>{if(this.isValidLookup(s))return;o=y;const b=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(b,u,y,m,t);else{let S;h&&(S=this.pluralResolver.getSuffix(y,t.count,t));const C=`${this.options.pluralSeparator}zero`,k=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(b.push(u+S),t.ordinal&&S.indexOf(k)===0&&b.push(u+S.replace(k,this.options.pluralSeparator)),f&&b.push(u+C)),x){const E=`${u}${this.options.contextSeparator}${t.context}`;b.push(E),h&&(b.push(E+S),t.ordinal&&S.indexOf(k)===0&&b.push(E+S.replace(k,this.options.pluralSeparator)),f&&b.push(E+C))}}let v;for(;v=b.pop();)this.isValidLookup(s)||(i=v,s=this.getResource(y,m,v,t))}))})}),{res:s,usedKey:r,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,s,r):this.resourceStore.getResource(e,t,s,r)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!w(e.replace);let r=s?e.replace:e;if(s&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!s){r={...r};for(const i of t)delete r[i]}return r}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}const Ee=n=>n.charAt(0).toUpperCase()+n.slice(1);class lt{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=D.create("languageUtils")}getScriptPartFromCode(e){if(e=ve(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=ve(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(w(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let r=Intl.getCanonicalLocales(e)[0];if(r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r)return r}catch{}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let s=e.split("-");return this.options.lowerCaseLng?s=s.map(r=>r.toLowerCase()):s.length===2?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),t.indexOf(s[1].toLowerCase())>-1&&(s[1]=Ee(s[1].toLowerCase()))):s.length===3&&(s[0]=s[0].toLowerCase(),s[1].length===2&&(s[1]=s[1].toUpperCase()),s[0]!=="sgn"&&s[2].length===2&&(s[2]=s[2].toUpperCase()),t.indexOf(s[1].toLowerCase())>-1&&(s[1]=Ee(s[1].toLowerCase())),t.indexOf(s[2].toLowerCase())>-1&&(s[2]=Ee(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const r=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const r=this.getLanguagePartFromCode(s);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(i=>{if(i===r)return i;if(!(i.indexOf("-")<0&&r.indexOf("-")<0)&&(i.indexOf("-")>0&&r.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===r||i.indexOf(r)===0&&r.length>1))return i})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),w(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],i=o=>{o&&(this.isSupportedCode(o)?r.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return w(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):w(e)&&i(this.formatLanguageCode(e)),s.forEach(o=>{r.indexOf(o)<0&&i(this.formatLanguageCode(o))}),r}}let xn=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],yn={1:n=>+(n>1),2:n=>+(n!=1),3:n=>0,4:n=>n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,5:n=>n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5,6:n=>n==1?0:n>=2&&n<=4?1:2,7:n=>n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,8:n=>n==1?0:n==2?1:n!=8&&n!=11?2:3,9:n=>+(n>=2),10:n=>n==1?0:n==2?1:n<7?2:n<11?3:4,11:n=>n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3,12:n=>+(n%10!=1||n%100==11),13:n=>+(n!==0),14:n=>n==1?0:n==2?1:n==3?2:3,15:n=>n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2,16:n=>n%10==1&&n%100!=11?0:n!==0?1:2,17:n=>n==1||n%10==1&&n%100!=11?0:1,18:n=>n==0?0:n==1?1:2,19:n=>n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3,20:n=>n==1?0:n==0||n%100>0&&n%100<20?1:2,21:n=>n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0,22:n=>n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3};const vn=["v1","v2","v3"],wn=["v4"],ct={zero:0,one:1,two:2,few:3,many:4,other:5},Sn=()=>{const n={};return xn.forEach(e=>{e.lngs.forEach(t=>{n[t]={numbers:e.nr,plurals:yn[e.fc]}})}),n};class Nn{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=D.create("pluralResolver"),(!this.options.compatibilityJSON||wn.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Sn(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const s=ve(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(s,{type:r})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,t)}return this.pluralRulesCache[i]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(e,t);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}getPluralFormsOfKey(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,s).map(r=>`${t}${r}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(e,t);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort((r,i)=>ct[r]-ct[i]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):s.numbers.map(r=>this.getSuffix(e,r,t)):[]}getSuffix(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(e,s);return r?this.shouldUseIntlApi()?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:this.getSuffixRetroCompatible(r,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const s=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[s];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?`_plural_${r.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}shouldUseIntlApi(){return!vn.includes(this.options.compatibilityJSON)}}const dt=function(n,e,t){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=dn(n,e,t);return!i&&r&&w(t)&&(i=De(n,t,s),i===void 0&&(i=De(e,t,s))),i},Pe=n=>n.replace(/\$/g,"$$$$");class jn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=D.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:r,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:d,unescapeSuffix:u,unescapePrefix:p,nestingPrefix:h,nestingPrefixEscaped:f,nestingSuffix:x,nestingSuffixEscaped:g,nestingOptionsSeparator:m,maxReplaces:y,alwaysFormat:b}=e.interpolation;this.escape=t!==void 0?t:hn,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=i?Z(i):o||"{{",this.suffix=a?Z(a):l||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=h?Z(h):f||Z("$t("),this.nestingSuffix=x?Z(x):g||Z(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=y||1e3,this.alwaysFormat=b!==void 0?b:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>t&&t.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,s,r){let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=f=>{if(f.indexOf(this.formatSeparator)<0){const y=dt(t,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,s,{...r,...t,interpolationkey:f}):y}const x=f.split(this.formatSeparator),g=x.shift().trim(),m=x.join(this.formatSeparator).trim();return this.format(dt(t,l,g,this.options.keySeparator,this.options.ignoreJSONStructure),m,s,{...r,...t,interpolationkey:g})};this.resetRegExp();const u=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>Pe(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?Pe(this.escape(f)):Pe(f)}].forEach(f=>{for(a=0;i=f.regex.exec(e);){const x=i[1].trim();if(o=d(x),o===void 0)if(typeof u=="function"){const m=u(e,i,r);o=w(m)?m:""}else if(r&&Object.prototype.hasOwnProperty.call(r,x))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),o="";else!w(o)&&!this.useRawValueToEscape&&(o=st(o));const g=f.safeValue(o);if(e=e.replace(i[0],g),p?(f.regex.lastIndex+=o.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,i,o;const a=(l,d)=>{const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const p=l.split(new RegExp(`${u}[ ]*{`));let h=`{${p[1]}`;l=p[0],h=this.interpolate(h,o);const f=h.match(/'/g),x=h.match(/"/g);(f&&f.length%2===0&&!x||x.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),d&&(o={...d,...o})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,g),`${l}${u}${h}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;r=this.nestingRegexp.exec(e);){let l=[];o={...s},o=o.replace&&!w(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let d=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const u=r[1].split(this.formatSeparator).map(p=>p.trim());r[1]=u.shift(),l=u,d=!0}if(i=t(a.call(this,r[1].trim(),o),o),i&&r[0]===e&&!w(i))return i;w(i)||(i=st(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),d&&(i=l.reduce((u,p)=>this.format(u,p,s.lng,{...s,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const Cn=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const s=n.split("(");e=s[0].toLowerCase().trim();const r=s[1].substring(0,s[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),d=l.join(":").trim().replace(/^'+|'+$/g,""),u=a.trim();t[u]||(t[u]=d),d==="false"&&(t[u]=!1),d==="true"&&(t[u]=!0),isNaN(d)||(t[u]=parseInt(d,10))}})}return{formatName:e,formatOptions:t}},X=n=>{const e={};return(t,s,r)=>{let i=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(i={...i,[r.interpolationkey]:void 0});const o=s+JSON.stringify(i);let a=e[o];return a||(a=n(ve(s),r),e[o]=a),a(t)}};class kn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=D.create("formatter"),this.options=e,this.formats={number:X((t,s)=>{const r=new Intl.NumberFormat(t,{...s});return i=>r.format(i)}),currency:X((t,s)=>{const r=new Intl.NumberFormat(t,{...s,style:"currency"});return i=>r.format(i)}),datetime:X((t,s)=>{const r=new Intl.DateTimeFormat(t,{...s});return i=>r.format(i)}),relativetime:X((t,s)=>{const r=new Intl.RelativeTimeFormat(t,{...s});return i=>r.format(i,s.range||"day")}),list:X((t,s)=>{const r=new Intl.ListFormat(t,{...s});return i=>r.format(i)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=X(t)}format(e,t,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,l)=>{const{formatName:d,formatOptions:u}=Cn(l);if(this.formats[d]){let p=a;try{const h=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},f=h.locale||h.lng||r.locale||r.lng||s;p=this.formats[d](a,f,{...u,...r,...h})}catch(h){this.logger.warn(h)}return p}else this.logger.warn(`there was no format function for ${d}`);return a},e)}}const Rn=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class Ln extends je{constructor(e,t,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=r,this.logger=D.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(s,r.backend,r)}queueLoad(e,t,s,r){const i={},o={},a={},l={};return e.forEach(d=>{let u=!0;t.forEach(p=>{const h=`${d}|${p}`;!s.reload&&this.store.hasResourceBundle(d,p)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,u=!1,o[h]===void 0&&(o[h]=!0),i[h]===void 0&&(i[h]=!0),l[p]===void 0&&(l[p]=!0)))}),u||(a[d]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,t,s){const r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),!t&&s&&this.store.addResourceBundle(i,o,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const a={};this.queue.forEach(l=>{cn(l.loaded,[i],o),Rn(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(d=>{a[d]||(a[d]={});const u=l.loaded[d];u.length&&u.forEach(p=>{a[d][p]===void 0&&(a[d][p]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,t,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:r,wait:i,callback:o});return}this.readingCalls++;const a=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(d&&u&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,r+1,i*2,o)},i);return}o(d,u)},l=this.backend[s].bind(this.backend);if(l.length===2){try{const d=l(e,t);d&&typeof d.then=="function"?d.then(u=>a(null,u)).catch(a):a(null,d)}catch(d){a(d)}return}return l(e,t,a)}prepareLoading(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();w(e)&&(e=this.languageUtils.toResolveHierarchy(e)),w(t)&&(t=[t]);const i=this.queueLoad(e,t,s,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=e.split("|"),r=s[0],i=s[1];this.read(r,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,o),!o&&a&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,a),this.loaded(e,o,a)})}saveMissing(e,t,s,r,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},d=this.backend.create.bind(this.backend);if(d.length<6)try{let u;d.length===5?u=d(e,t,s,r,l):u=d(e,t,s,r),u&&typeof u.then=="function"?u.then(p=>a(null,p)).catch(a):a(null,u)}catch(u){a(u)}else d(e,t,s,r,a,l)}!e||!e[0]||this.store.addResource(e[0],t,s,r)}}}const ut=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),w(n[1])&&(e.defaultValue=n[1]),w(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),ht=n=>(w(n.ns)&&(n.ns=[n.ns]),w(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),w(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n),be=()=>{},On=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class de extends je{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=ht(e),this.services={},this.logger=D,this.modules={external:[]},On(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(s=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(w(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=ut();this.options={...r,...this.options,...ht(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?D.init(i(this.modules.logger),this.options):D.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=kn);const p=new lt(this.options);this.store=new ot(this.options.resources,this.options);const h=this.services;h.logger=D,h.resourceStore=this.store,h.languageUtils=p,h.pluralResolver=new Nn(p,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=i(u),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new jn(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Ln(i(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(f){for(var x=arguments.length,g=new Array(x>1?x-1:0),m=1;m<x;m++)g[m-1]=arguments[m];e.emit(f,...g)}),this.modules.languageDetector&&(h.languageDetector=i(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=i(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Se(this.services,this.options),this.translator.on("*",function(f){for(var x=arguments.length,g=new Array(x>1?x-1:0),m=1;m<x;m++)g[m-1]=arguments[m];e.emit(f,...g)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,s||(s=be),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const l=ae(),d=()=>{const u=(p,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),s(p,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),l}loadResources(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:be;const r=w(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const i=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(d=>{d!=="cimode"&&i.indexOf(d)<0&&i.push(d)})};r?o(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(i,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(a)})}else s(null)}reloadResources(e,t,s){const r=ae();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=be),this.services.backendConnector.reload(e,t,i=>{r.resolve(),s(i)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Ct.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}changeLanguage(e,t){var s=this;this.isLanguageChangingTo=e;const r=ae();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,d)=>{d?(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,r.resolve(function(){return s.t(...arguments)}),t&&t(l,function(){return s.t(...arguments)})},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const d=w(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(d)),this.loadResources(d,u=>{o(u,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),r}getFixedT(e,t,s){var r=this;const i=function(o,a){let l;if(typeof a!="object"){for(var d=arguments.length,u=new Array(d>2?d-2:0),p=2;p<d;p++)u[p-2]=arguments[p];l=r.options.overloadTranslationOptionHandler([o,a].concat(u))}else l={...a};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||s||i.keyPrefix);const h=r.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(x=>`${l.keyPrefix}${h}${x}`):f=l.keyPrefix?`${l.keyPrefix}${h}${o}`:o,r.t(f,l)};return w(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=s,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const d=this.services.backendConnector.state[`${a}|${l}`];return d===-1||d===0||d===2};if(t.precheck){const a=t.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(s,e)&&(!r||o(i,e)))}loadNamespaces(e,t){const s=ae();return this.options.ns?(w(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{s.resolve(),t&&t(r)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=ae();w(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(o=>r.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=r.concat(i),this.loadResources(o=>{s.resolve(),t&&t(o)}),s):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services&&this.services.languageUtils||new lt(ut());return t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new de(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:be;const s=e.forkResourceStore;s&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new de(r);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s&&(i.store=new ot(this.store.data,r),i.services.resourceStore=i.store),i.translator=new Se(i.services,r),i.translator.on("*",function(a){for(var l=arguments.length,d=new Array(l>1?l-1:0),u=1;u<l;u++)d[u-1]=arguments[u];i.emit(a,...d)}),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const I=de.createInstance();I.createInstance=de.createInstance;I.createInstance;I.dir;I.init;I.loadResources;I.reloadResources;I.use;I.changeLanguage;I.getFixedT;I.t;I.exists;I.setDefaultNamespace;I.hasLoadedNamespace;I.loadNamespaces;I.loadLanguages;const En={en:{translation:{nav:{planner:"Trip Planner",about:"About",help:"Help",settings:"Settings"},map:{title:"European Camper Trip Planner",addWaypoint:"Click map to add waypoint",removeWaypoint:"Remove waypoint",clearRoute:"Clear route",optimizeRoute:"Optimize route"},vehicle:{title:"Vehicle Profile",height:"Height (m)",width:"Width (m)",weight:"Weight (t)",length:"Length (m)",save:"Save Profile",clear:"Clear Profile"},route:{title:"Route Planning",distance:"Total Distance",duration:"Estimated Time",waypoints:"Waypoints",export:"Export Route",save:"Save Trip"},campsites:{title:"Campsites",campsite:"Campsite",aire:"Aire",parking:"Parking",filter:"Filter",showAll:"Show All"},actions:{save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",loading:"Loading...",error:"Error",success:"Success"},errors:{routeCalculation:"Failed to calculate route",vehicleValidation:"Invalid vehicle dimensions",networkError:"Network connection error",apiKeyMissing:"API key not configured"},success:{tripSaved:"Trip saved successfully",routeOptimized:"Route optimized",profileSaved:"Vehicle profile saved"}}}};I.use(Yt).init({resources:En,lng:"en",fallbackLng:"en",supportedLngs:["en"],interpolation:{escapeValue:!1},defaultNS:"translation",debug:!1,react:{useSuspense:!1},saveMissing:!1,missingKeyHandler:(n,e,t)=>{}});const Pn=ue.lazy(()=>he(()=>import("./PlannerPage-z3vCfJZY.js"),__vite__mapDeps([0,1,2,3,4]))),In=ue.lazy(()=>he(()=>import("./AboutPage-BBvlZos6.js"),__vite__mapDeps([5,1,3]))),Tn=ue.lazy(()=>he(()=>import("./HelpPage-hKhpxfnC.js"),__vite__mapDeps([6,1,3]))),An=ue.lazy(()=>he(()=>import("./SettingsPage-DxkVwkie.js"),__vite__mapDeps([7,1,3]))),$n=ue.lazy(()=>he(()=>import("./NotFoundPage-BRRXHUcj.js"),__vite__mapDeps([8,1,3]))),Mn=()=>{const n=pt(),{isLoading:e,error:t,sidebarOpen:s}=Me(),{showOnboarding:r,completeOnboarding:i,skipOnboarding:o}=Ys();return c.jsx(Us,{children:c.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[r&&n.pathname==="/"&&c.jsx(on,{onComplete:i,onSkip:o}),c.jsx(Vs,{}),e&&c.jsx("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 z-50",children:c.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-3 flex items-center space-x-2",children:[c.jsx(Xe,{size:"sm"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Loading..."})]})}),t&&c.jsx("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm text-red-800",children:t})}),c.jsx("div",{className:"ml-auto pl-3",children:c.jsxs("button",{className:"text-red-400 hover:text-red-600",onClick:()=>Me.getState().setError(null),children:[c.jsx("span",{className:"sr-only",children:"Dismiss"}),c.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})}),c.jsx(Ks,{sidebar:void 0,sidebarOpen:s,children:c.jsx(j.Suspense,{fallback:c.jsx("div",{className:"h-full flex items-center justify-center",children:c.jsx(Xe,{size:"lg"})}),children:c.jsx(It,{})})})]})})},zn=Et([{path:"/",element:c.jsx(Mn,{}),children:[{index:!0,element:c.jsx(Pn,{})},{path:"about",element:c.jsx(In,{})},{path:"help",element:c.jsx(Tn,{})},{path:"settings",element:c.jsx(An,{})},{path:"*",element:c.jsx($n,{})}]}],{basename:"/camper-planner"});function Fn(){return c.jsx(Pt,{router:zn})}Mt.createRoot(document.getElementById("root")).render(c.jsx(j.StrictMode,{children:c.jsx(Fn,{})}));export{qe as A,Hs as D,z as R,Ds as a,qs as b,O as c,Me as d,Un as e,Hn as f,Wn as g,mt as h,Bn as i,c as j,Ys as k,Kn as r,Ve as u};
